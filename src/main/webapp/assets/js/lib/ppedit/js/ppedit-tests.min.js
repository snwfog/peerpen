(function(){var f,b,a,g,i,e,j,d,c,k,h;i={toBeEqualToPosition:function(l){return Math.round(l.top)===Math.round(this.actual.top)&&Math.round(l.left)===Math.round(this.actual.left)}};g=function(m,l){return describe("",function(){beforeEach(function(){this.addMatchers(i);return $(".editor").ppedit()});afterEach(function(){return $(".editor").children().remove()});return describe(m,l)})};k=function(l){return{left:l.offset().left+l.scrollLeft(),top:l.offset().top+l.scrollTop()}};f=function(l){var m,o,n;for(m=o=0,n=l-1;0<=n?o<=n:o>=n;m=0<=n?++o:--o){$(".addElementBtn").eq(0).simulate("click")}return expect($(".ppedit-box")).toHaveLength(l)};a=function(m,o,n){var l;l=k(m);m.simulate("mousedown",{clientX:l.left+1,clientY:l.top+1}).simulate("mousemove",{clientX:l.left+1,clientY:l.top+1}).simulate("mousemove",{clientX:l.left+o.dx+1,clientY:l.top+o.dy+1}).simulate("mouseup",{clientX:l.left+o.dx+1,clientY:l.top+o.dy+1});expect(k(m)).toBeEqualToPosition({left:l.left+o.dx,top:l.top+o.dy});return h(300,function(){if(n!=null){return n()}})};j=function(l,m){return l.simulate("mousedown",{clientX:m.topLeft.left,clientY:m.topLeft.top}).simulate("mousemove",{clientX:m.topLeft.left,clientY:m.topLeft.top}).simulate("mousemove",{clientX:m.topLeft.left+m.size.width,clientY:m.topLeft.top+m.size.height}).simulate("mouseup",{clientX:m.topLeft.left+m.size.width,clientY:m.topLeft.top+m.size.height})};b=function(l,m){return c(l,function(){expect(l).toBeFocused();return l.simulate("key-sequence",{sequence:m,callback:function(){return expect(l).toHaveHtml(m)}})})};e=function(){$(".ppedit-box-container").simulate("key-combo",{combo:"ctrl+46"});return $(".ppedit-box-container").simulate("key-combo",{combo:"meta+8"})};d=function(l,m){l.simulate("mousedown");l.simulate("mouseup");return h(300,m)};c=function(l,m){l.simulate("mousedown");l.simulate("mouseup");l.simulate("mousedown");l.simulate("mouseup");return h(300,m)};h=function(m,n){var l;l=false;runs((function(){return setTimeout((function(){return l=true}),m)}));waitsFor((function(){return l}),"The operation should run in under "+m+" minutes.",m+500);return runs((function(){return n()}))};g("A ppedit Jasmine test template",function(){return it("contains spec with an expectation",function(){return expect(true).toBe(true)})});g('A test for issue "CAP-49 : As a backend developer, I want an API from PPEdit that provides a changeset made on a particular resume so that I can persist it on the backend"',function(){var l;l=[{1234:'<div class="ppedit-box" tabindex="0" contenteditable="true" id="1234" style="left: 54px; top: 90px; width: 163px; height: 119px; font-family: \'Times New Roman\'; font-size: 100%; font-weight: normal; text-decoration: none; font-style: normal; z-index: 0; text-align: left; vertical-align: bottom;"></div>'}];it("identifies boxes that were created then deleted during current editing as non existent",function(){f(1);return c($(".ppedit-box"),function(){var m;e();m=JSON.parse($(".editor").ppedit("save"));expect(m.removed.length).toEqual(0);expect(m.created[0].length).toEqual(0);expect(m.created[1].length).toEqual(0);return expect(m.modified.length).toEqual(0)})});it("identifies two boxes newly created as saved when the saving API is called",function(){var m;f(2);m=JSON.parse($(".editor").ppedit("save"));expect(m.removed.length).toEqual(0);expect(m.created[0].length).toEqual(2);return expect(m.modified.length).toEqual(0)});it("identifies a new box as created when the saving API is called",function(){f(1);return c($(".ppedit-box"),function(){var m;e();f(1);m=JSON.parse($(".editor").ppedit("save"));expect(m.removed.length).toEqual(0);expect(m.created[0].length).toEqual(1);return expect(m.modified.length).toEqual(0)})});it("generates a unique hash for each different hunk",function(){var m,n;f(1);m=JSON.parse($(".editor").ppedit("save"));expect(m.etag).toBeDefined();expect(m.etag.length).toBeGreaterThan(5);$(".addElementBtn").click();n=JSON.parse($(".editor").ppedit("save"));console.log(JSON.stringify(n,null,4));return expect(m.etag).not.toEqual(n.etag)});it("identifies a box which is first loaded and then deleted as removed",function(){$(".editor").ppedit("load",{hunks:JSON.stringify(l)});return c($(".ppedit-box"),function(){var m;e();m=JSON.parse($(".editor").ppedit("save"));expect(m.removed.length).toEqual(1);expect(m.created[0].length).toEqual(0);expect(m.created[1].length).toEqual(0);return expect(m.modified.length).toEqual(0)})});return it("identifies a box which is first loaded and then moved as modified",function(){var m;$(".editor").ppedit("load",{hunks:JSON.stringify(l)});a($(".ppedit-box"),{dx:100,dy:50});m=JSON.parse($(".editor").ppedit("save"));expect(m.removed.length).toEqual(0);expect(m.created[0].length).toEqual(0);expect(m.created[1].length).toEqual(0);return expect(m.modified.length).toEqual(1)})});g('A test for issue "CAP-48 : As a user, I want to copy and paste aggregate elements in my work area"',function(){it("copies and past one box",function(){var l;f(1);l=$(".ppedit-box");return c(l,function(){$(".ppedit-box-container").simulate("key-combo",{combo:"meta+shift+c"});$(".ppedit-box-container").simulate("key-combo",{combo:"meta+shift+v"});$(".ppedit-box-container").simulate("key-combo",{combo:"ctrl+shift+c"});$(".ppedit-box-container").simulate("key-combo",{combo:"ctrl+shift+v"});return expect($(".ppedit-box")).toHaveLength(2)})});it("copies and past multiple boxes",function(){var m,l;f(2);m=$(".ppedit-box");a(m.eq(0),{dx:200,dy:0});l=$(".ppedit-canvas");j(l,{topLeft:{left:k(l).left+49,top:k(l).top+49},size:{width:500,height:100}});$(".ppedit-box-container").simulate("key-combo",{combo:"meta+shift+c"});$(".ppedit-box-container").simulate("key-combo",{combo:"meta+shift+v"});$(".ppedit-box-container").simulate("key-combo",{combo:"ctrl+shift+c"});$(".ppedit-box-container").simulate("key-combo",{combo:"ctrl+shift+v"});return expect($(".ppedit-box")).toHaveLength(4)});return it("does not copy and past one box if not pressing the shift button",function(){var l;f(1);l=$(".ppedit-box");return c(l,function(){$(".ppedit-box-container").simulate("key-combo",{combo:"meta+c"});$(".ppedit-box-container").simulate("key-combo",{combo:"meta+v"});$(".ppedit-box-container").simulate("key-combo",{combo:"ctrl+c"});$(".ppedit-box-container").simulate("key-combo",{combo:"ctrl+v"});return expect($(".ppedit-box")).toHaveLength(1)})})});g("A test for issue CAP-47 : As a user, I want to select and move aggregated elements in my workspace",function(){return it("can select and move elements in the workspace",function(){var l;f(3);l=$(".ppedit-box");a(l.eq(0),{dx:200,dy:0});return setTimeout((function(){var m;a(l.eq(1),{dx:0,dy:200});m=$(".ppedit-canvas");j(m,{topLeft:{left:k(m).left+49,top:k(m).top+49},size:{width:500,height:100}});return expect($(".ppedit-box-selected")).toHaveLength(2)}),300)})});g("A test for issue CAP-44 : As a user,  I want options to show or hide the grid, and snap or unsnap my elements in the work area.",function(){return it("adds a box on grid button click",function(){expect($(".ppedit-grid")).toHaveCss({display:"block"});$(".gridElementBtn").click();return expect($(".ppedit-grid")).toHaveCss({display:"none"})})});g("A test for issue CAP-42 : As a user, I want to change the opacity of elements in my work area.",function(){return it("drag the slider button to change the box opacity",function(){})});g('A test for issue CAP-40 : "As a user, I want my elements in my work area to snap to a predefined and adjustable grid system.',function(){return it("snap the position of box to closest sanpping point after moving the box",function(){var l;f(1);$(".snapBtn").simulate("click");l=$(".ppedit-box");l.simulate("mousedown",{clientX:l.position().left+1,clientY:l.position().top+1}).simulate("mousemove",{clientX:l.position().left+1,clientY:l.position().top+1}).simulate("mousemove",{clientX:l.position().left+83,clientY:l.position().top+83}).simulate("mouseup",{clientX:l.position().left+83,clientY:l.position().top+83});return expect(l.position()).toBeEqualToPosition({top:128,left:128})})});g("A test for issue CAP-37 : As a user, I want to arrange the elements depth.",function(){return it("can change the index of the element row one above the table element",function(){var l,m=this;f(3);l=$(".ppedit-box");expect(l).toHaveLength(3);return c(l.eq(2),function(){$(".moveElementDownBtn").simulate("click");expect(l.eq(2)).toHaveCss({"z-index":"1"});return expect($(".ppedit-panel-row").eq(1)).toHaveAttr("ppedit-box-id",l.eq(2).attr("ppedit-box-id"))})})});g("A test for issue CAP-35 : As a user,   I want to have horizontal and vertical alignment of my paragraphs.",function(){it("change to left alignment by click left alignment button on the panel",function(){var l=this;f(1);return c($(".ppedit-box"),function(){$(".leftAlignBtn").simulate("click");return expect($(".ppedit-box")).toHaveCss({"text-align":"left"})})});it("change to right alignment by click left alignment button on the panel",function(){var m,l,n=this;f(1);m=$(".ppedit-box");l=$(".rightAlignBtn");return c(m,function(){l.simulate("click");return expect($(".ppedit-box")).toHaveCss({"text-align":"right"})})});return it("change to center alignment by click left alignment button on the panel",function(){var m,l,n=this;f(1);m=$(".ppedit-box");l=$(".centerAlignBtn");return c(m,function(){l.simulate("click");return expect($(".ppedit-box")).toHaveCss({"text-align":"center"})})})});g('A test for issue CAP-33 : "As a user, I want to create ordered and unordered bullet points in my work area."',function(){it("can inserts an ordered list inside an empty box",function(){var l,m=this;f(1);l=$(".ppedit-box");return c(l,function(){$(".orderedPointBtn").simulate("click");return expect(l).toHaveHtml("<ol><li></li></ol>")})});it("can inserts an unordered list inside an empty box",function(){var l,m=this;f(1);l=$(".ppedit-box");return c(l,function(){$(".bulletPointBtn").simulate("click");return expect(l).toHaveHtml("<ul><li></li></ul>")})});it("can inserts an ordered list that wraps an existing text inside a box",function(){var l,m=this;f(1);l=$(".ppedit-box");return c(l,function(){return l.simulate("key-sequence",{sequence:"Lorem ipsum dolor sin amet",callback:function(){$(".orderedPointBtn").simulate("click");return expect(l).toContainHtml("<ol><li>Lorem ipsum dolor sin amet</li></ol>")}})})});return it("can inserts an unordered list that wraps an existing text inside a box",function(){var l,m=this;f(1);l=$(".ppedit-box");return c(l,function(){return l.simulate("key-sequence",{sequence:"Lorem ipsum dolor sin amet",callback:function(){$(".bulletPointBtn").simulate("click");return expect(l).toContainHtml("<ul><li>Lorem ipsum dolor sin amet</li></ul>")}})})})});g("A test for issue CAP-25 : As a user, I want to name my document, so that I can distinguish between my documents",function(){return it("can input text inside the textarea to name document",function(){$(".addElementBtn").val("documentName");return expect($(".addElementBtn")).toHaveValue("documentName")})});g("A test for issue CAP-20 : As a user, I want to clean my work area, so that I can start on a fresh new page, but I want to be able to remedy in the case of a mistake.",function(){return it(" remove boxes when delete element button click",function(){$(".removeElementBtn").click();return expect($(".editor").find(".ppedit-box")).toHaveLength(0)})});g("A test for issue CAP-15 : As a user, I want to resize the bounding box of elements on my work area",function(){return it("can resize a box with the mouse",function(){return f(1)})});g("A test for issue CAP-14 : As a user, I want to reposition elements visible on my work area",function(){it("adds a box when clicking the add element button once",function(){return f(1)});it("adds multiples boxes when clicking the add element button multiple times",function(){return f(10)});it("adds a box when doubleclicking the container",function(){$(".ppedit-box-container").eq(0).simulate("dblclick");return expect($(".ppedit-box")).toHaveLength(1)});it("adds 2 boxes when doubleclicking the container twice",function(){$(".ppedit-box-container").eq(0).simulate("dblclick");$(".ppedit-box-container").eq(0).simulate("dblclick");return expect($(".ppedit-box")).toHaveLength(2)});it("repositions elements with the mouse",function(){f(2);return a($(".ppedit-box").eq(0),{dx:150,dy:180},function(){return a($(".ppedit-box").eq(1),{dx:100,dy:100})})});return it("deletes a box when clicking on ctrl+delete",function(){f(1);return c($(".ppedit-box"),function(){e();return expect($(".ppedit-box")).toHaveLength(0)})})});g('A test for issue CAP-132 : "Add a load content API on PPedit"',function(){var l,m;m=[{1234:'<div class="ppedit-box" tabindex="0" contenteditable="true" id="1234" style="left: 54px; top: 90px; width: 163px; height: 119px; font-family: \'Times New Roman\'; font-size: 100%; font-weight: normal; text-decoration: none; font-style: normal; z-index: 0; text-align: left; vertical-align: bottom;"></div>'}];l=[{1383319360353:'<div class="ppedit-box" tabindex="0" contenteditable="true" id="1383319360353" style="left: 54px; top: 90px; width: 163px; height: 119px; font-family: \'Times New Roman\'; font-size: 100%; font-weight: normal; text-decoration: none; font-style: normal; z-index: 0; text-align: left; vertical-align: bottom;"><div>Hello world.</div></div>',1383319393238:'<div class="ppedit-box" tabindex="0" contenteditable="true" id="1383319393238" style="left: 852px; top: 83px; width: 125px; height: 50px; font-family: \'Times New Roman\'; font-size: 100%; font-weight: bold; text-decoration: none; font-style: normal; z-index: 1; text-align: left; vertical-align: bottom;">This is a bold text at the right of the page</div>'},{1383319427231:'<div class="ppedit-box" tabindex="0" contenteditable="true" id="1383319427231" style="left: 294px; top: 233px; width: 202px; height: 50px; font-family: \'Times New Roman\'; font-size: 100%; font-weight: normal; text-decoration: underline; font-style: italic; z-index: 2; text-align: left; vertical-align: bottom;">This is a Italic and underline text</div>',1383319782815:'<div class="ppedit-box" tabindex="0" contenteditable="true" id="1383319782815" style="left: 56px; top: 350px; width: 199px; height: 64px; font-family: \'Times New Roman\'; font-size: 100%; font-weight: normal; text-decoration: none; font-style: normal; z-index: 3; text-align: center; vertical-align: bottom;">This is a center-aligned text</div>'}];it("can load 1 box",function(){expect($(".ppedit-box")).toHaveLength(0);$(".editor").ppedit("load",{hunks:JSON.stringify(m)});return expect($(".ppedit-box")).toHaveLength(1)});it("can move a loaded box around",function(){var n;$(".editor").ppedit("load",{hunks:JSON.stringify(m)});n=$(".ppedit-box");return a(n,{dx:200,dy:0})});it("can enter content on a loaded box",function(){var n;$(".editor").ppedit("load",{hunks:JSON.stringify(m)});n=$(".ppedit-box");return b(n,"Lorem ipsum dolor sin amet")});it("does not remove the box when requesting undo right after loading it.",function(){$(".editor").ppedit("load",{hunks:JSON.stringify(m)});$(".ppedit-box-container").simulate("key-combo",{combo:"meta+z"});$(".ppedit-box-container").simulate("key-combo",{combo:"ctrl+z"});return expect($(".ppedit-box")).toHaveLength(1)});return it("can load 4 boxes with some contents in each",function(){$(".editor").ppedit("load",{hunks:JSON.stringify(l)});expect($(".ppedit-box")).toHaveLength(4);return expect($(".ppedit-box-container")).toContainHtml(l["1383319393238"])})});g("A test for issue CAP-13 : As a user,   I want to change font settings of my text documents.",function(){it("change font family on select font family on the panel",function(){var l,m=this;f(1);l=$(".ppedit-box");return c(l,function(){$(".fontTypeBtn").val("Glyphicons Halflings").change();return expect($(".ppedit-box")).toHaveCss({"font-family":"'Glyphicons Halflings'"})})});it("change font size on select font size on the panel",function(){var l,m=this;f(1);l=$(".ppedit-box");return c(l,function(){$(".fontSizeBtn").val("12").change();return expect(Math.round(parseInt(l.css("font-size")))).toEqual(16)})});it("change font weight on font bold on the panel",function(){var l,m=this;f(1);l=$(".ppedit-box");return c(l,function(){$(".weightBtn").simulate("click");return expect($(".ppedit-box").css("font-weight")).toEqual("bold")})});it("change font underline on font underline on the panel",function(){var l,m=this;f(1);l=$(".ppedit-box");return c(l,function(){$(".underlineBtn").simulate("click");return expect(l.css("text-decoration")).toMatch(/underline/)})});return it("change font italic on font italic on the panel",function(){var l,m=this;f(1);l=$(".ppedit-box");return c(l,function(){$(".italicBtn").simulate("click");return expect($(".ppedit-box").css("font-style")).toEqual("italic")})})});g('A test for issue CAP-118 : "Moving a box containing new lines moves it too far away" bug.',function(){return it("can move a box containing a new line by the right amount",function(){var l;f(1);l=$(".ppedit-box").html("<br/><br/>");return a(l,{dx:0,dy:200})})});g('A test for issue CAP-116 : "Cannot Undo Box moved" bug.',function(){return it("can undo a box move command",function(){var l;f(1);l=$(".ppedit-box");a(l,{dx:0,dy:200});$(".ppedit-box-container").eq(0).simulate("key-combo",{combo:"meta+z"});$(".ppedit-box-container").eq(0).simulate("key-combo",{combo:"ctrl+z"});expect($(".ppedit-box")).toHaveLength(1);return expect(l.position()).toBeEqualToPosition({top:50,left:50})})});g("A test for issue CAP-114 : As a user, I want to be able to enter text inside an element",function(){return it("can enter text inside a Box",function(){var l;f(1);l=$(".ppedit-box");return b(l,"Lorem ipsum dolor sin amet")})})}).call(this);