(function(){var d,z,C,m,u,x,s,e,B,k,A,h,r,p,w,a,o,F,g,t,f,E,v,n,j,b,c,l,y,i,q={}.hasOwnProperty,D=function(J,H){for(var G in H){if(q.call(H,G)){J[G]=H[G]}}function I(){this.constructor=J}I.prototype=H.prototype;J.prototype=new I();J.__super__=H.prototype;return J};A=(function(){function G(){this.boxIds=[]}G.prototype.undo=function(){};G.prototype.execute=function(){};G.prototype.getType=function(){};G.prototype.getPageNum=function(){};return G})();t=(function(){function G(H){this.root=H;this.element=void 0}G.prototype.buildElement=function(){};G.prototype.bindEvents=function(){};return G})();g=(function(){function G(){}G.rectContainsRect=function(H,I){return I.topLeft.left>=H.topLeft.left&&I.topLeft.top>=H.topLeft.top&&I.topLeft.left+I.size.width<=H.topLeft.left+H.size.width&&I.topLeft.top+I.size.height<=H.topLeft.top+H.size.height};G.rectContainsPoint=function(I,H){return H.left>=I.topLeft.left&&H.top>=I.topLeft.top&&H.left<=I.topLeft.left+I.size.width&&H.top<=I.topLeft.top+I.size.height};G.pointEqualToPoint=function(I,H){return I.left===H.left&&I.top===H.top};return G})();E=(function(){function G(){}G.C=67;G.V=86;G.Z=90;G.Y=89;G.DELETE=46;G.SHIFT=16;G.MAC_CMD_LEFT=91;G.MAC_CMD_RIGHT=93;G.MAC_DELETE=8;return G})();c=(function(){function G(H){this.root=H}G.prototype.bindEvents=function(){var H=this;return this.root.keydown(function(I){if(I.keyCode===E.Z&&I.ctrlKey){I.preventDefault();H.root.trigger("requestUndo")}if(I.keyCode===E.Y&&I.ctrlKey){I.preventDefault();H.root.trigger("requestRedo")}if(I.keyCode===E.DELETE||(I.keyCode===E.DELETE&&I.ctrlKey)){I.preventDefault();H.root.trigger("requestDelete")}if(I.keyCode===E.C&&I.ctrlKey&&I.shiftKey){I.preventDefault();H.root.trigger("requestCopy")}if(I.keyCode===E.V&&I.ctrlKey&&I.shiftKey){I.preventDefault();return H.root.trigger("requestPaste")}})};return G})();n=(function(){function G(H){this.root=H;this.leftCmdKeyPressed=false;this.rightCmdKeyPressed=false}G.prototype.bindEvents=function(){var H=this;return this.root.keydown(function(I){if(I.keyCode===E.MAC_CMD_LEFT){return H.leftCmdKeyPressed=true}else{if(I.keyCode===E.Z&&H._cmdKeyIsPressed()){I.preventDefault();return H.root.trigger("requestUndo")}else{if(I.keyCode===E.Y&&H._cmdKeyIsPressed()){I.preventDefault();return H.root.trigger("requestRedo")}else{if(I.keyCode===E.MAC_DELETE&&H._cmdKeyIsPressed()){I.preventDefault();return H.root.trigger("requestDelete")}else{if(I.keyCode===E.C&&H._cmdKeyIsPressed()&&I.shiftKey){I.preventDefault();return H.root.trigger("requestCopy")}else{if(I.keyCode===E.V&&H._cmdKeyIsPressed()&&I.shiftKey){I.preventDefault();return H.root.trigger("requestPaste")}}}}}}}).keyup(function(I){if(I.keyCode===E.MAC_CMD_LEFT){H.leftCmdKeyPressed=false}if(I.keyCode===E.MAC_CMD_RIGHT){H.rightCmdKeyPressed=false}if(I.keyCode===E.SHIFT){return H.shiftKeyPressed=false}})};G.prototype._cmdKeyIsPressed=function(){return this.rightCmdKeyPressed||this.leftCmdKeyPressed};return G})();p=(function(){function G(){}G.getController=function(H){if(navigator.userAgent.match(/Macintosh/)!==null){return new n(H)}else{return new c(H)}};return G})();C=(function(){function G(H){this.graphic=H;this.controller=void 0;this.content=void 0}G.prototype.bindEvents=function(){var H=this;this.controller=p.getController(this.graphic.element);this.graphic.element.on("requestUndo",function(I){H._checkNewContent(false);return I.stopPropagation()}).focus(function(I){return H._checkNewContent(true)}).blur(function(I){return H._checkNewContent(true)});return this.controller.bindEvents()};G.prototype._checkNewContent=function(I){var H;H=this.graphic.element.html();if((this.content!=null)&&this.content!==H){this.graphic.element.trigger("graphicContentChanged",[{graphic:this.graphic,prevContent:this.content,newContent:H}])}return this.content=I?H:void 0};return G})();z=(function(H){D(G,H);G.CLICK_TIME_MILLIS=200;G.DBLCLICK_TIME_MILLIS=200;function G(I,J){this.root=I;this.options=J;G.__super__.constructor.call(this,this.root);this.helper=new C(this);this.prevPosition=void 0;this.prevMouseDownTime=0;this.clickCount=0;this.prevMouseUpTime=0;this.clickTimeoutId=0}G.prototype.buildElement=function(){var J,I,K;I=void 0;J=this.root.find(".ppedit-box");if(J.length>0){I=0;J.each(function(L,M){return I=Math.max(I,parseInt($(M).css("z-index")))})}K=$.extend({left:"50px",top:"50px",width:"75px",height:"50px",color:"black","font-family":"Times New Roman","font-size":"12pt","font-weight":"normal","text-decoration":"none","font-style":"normal","z-index":I!=null?I+1:0,"text-align":"left","vertical-align":"bottom"},this.options);return this.element=$("<div></div>").addClass("ppedit-box").attr("contenteditable",true).attr("id",$.now()).css(K)};G.prototype.bindEvents=function(){var I=this;this.element.mousedown(function(J){J.stopPropagation();J.preventDefault();I.select();return I.prevMouseDownTime=J.timeStamp}).mouseup(function(J){J.preventDefault();if(J.timeStamp-I.prevMouseDownTime<G.CLICK_TIME_MILLIS){I.clickCount++;if(I.clickTimeoutId===0){I.clickTimeoutId=setTimeout((function(){if(I.clickCount===1){I._onClick()}else{if(I.clickCount>=2){I._onDoubleClick()}}I.clickTimeoutId=0;return I.clickCount=0}),G.DBLCLICK_TIME_MILLIS)}}return I.stopMoving()}).click(function(J){J.stopPropagation();return J.preventDefault()}).dblclick(function(J){J.stopPropagation();J.preventDefault();console.log(I.root.parent());return I.root.parent().find(".FontPanel").css("visibility","")}).focus(function(J){return I.element.trigger("boxSelected",[I])}).on("containerMouseMove",function(K,J,L){if(K.target===I.element.get(0)){if(I.element.hasClass("ppedit-box-selected")&&(L!=null)){return I.move(L.x,L.y)}}}).on("containerMouseLeave",function(){return I.stopMoving()}).on("containerMouseUp",function(K,J){return I.stopMoving()}).on("containerKeyDown",function(K,J){if(I.element.hasClass("ppedit-box-selected")){return I._processKeyDownEvent(J)}}).keydown(function(J){if(!I.isFocused()){return I._processKeyDownEvent(J)}});return this.helper.bindEvents()};G.prototype._processKeyDownEvent=function(K){var J,I;I=this.currentPosition();J=false;if(K.which===37){K.preventDefault();J=true;this.move(-1,0)}if(K.which===38){K.preventDefault();J=true;this.move(0,-1)}if(K.which===39){K.preventDefault();J=true;this.move(1,0)}if(K.which===40){K.preventDefault();J=true;this.move(0,1)}if(J){return this.element.trigger("boxMoved",[this,this.currentPosition(),I])}};G.prototype.stopMoving=function(){this.element.removeClass("ppedit-box-selected");if((this.prevPosition!=null)&&!g.pointEqualToPoint(this.currentPosition(),this.prevPosition)){if($(document).find(".snapImg").hasClass("snapBtn-selected")){this.snap()}this.root.trigger("boxMoved",[this,$.extend(true,{},this.currentPosition()),$.extend(true,{},this.prevPosition)])}this.prevPosition=void 0;if($(document).find(".snapImg").hasClass("snapBtn-selected")){this.root.find(".hDotLine").removeClass("ppedit-hDotLine");this.root.find(".vDotLine").removeClass("ppedit-vDotLine")}return this.root.parent().find(".FontPanel").css("visibility","hidden")};G.prototype.move=function(J,I){var K,L;K=this.currentPosition();this.setPosition(J+K.left,I+K.top);L=this.getSnapPosition(this.currentPosition());if($(document).find(".snapImg").hasClass("snapBtn-selected")){this.root.find(".hDotLine").addClass("ppedit-hDotLine").css("top",L.top);return this.root.find(".vDotLine").addClass("ppedit-vDotLine").css("left",L.left)}};G.prototype.setPosition=function(I,J){this.element.css("left",I+"px");return this.element.css("top",J+"px")};G.prototype.currentPosition=function(){return this.element.position()};G.prototype.snap=function(){var I;I=this.getSnapPosition(this.currentPosition());return this.setPosition(I.left,I.top)};G.prototype.getSnapPosition=function(K){var I,J;I=parseInt(K.left/8)*8;J=parseInt(K.top/8)*8;return{left:I,top:J}};G.prototype.select=function(){this.element.addClass("ppedit-box-selected");return this.prevPosition=this.currentPosition()};G.prototype.isFocused=function(){return this.element.get(0)===document.activeElement};G.prototype._enableFocus=function(){this.root.find(".ppedit-box").removeClass("ppedit-box-focus").removeClass("ppedit-box-selected");return this.element.addClass("ppedit-box-focus").focus()};G.prototype.addBulletPoint=function(){return this._addHtml($("<ul><li></li></ul>"))};G.prototype.addOrderedPointList=function(){return this._addHtml($("<ol><li></li></ol>"))};G.prototype._addHtml=function(I){var J;J=$(window.getSelection().getRangeAt(0).startContainer.parentNode);if(J.closest(".ppedit-box").length===0){J=this.element}I.find("li").html(J.html());return J.empty().append(I)};G.prototype._getCursorPosition=function(){return window.getSelection().getRangeAt(0).startOffset};G.prototype._onClick=function(){};G.prototype._onDoubleClick=function(){return this._enableFocus()};return G})(t);i=(function(H){D(G,H);function G(K,M,J){var L,I;this.editor=K;this.pageNum=M;G.__super__.constructor.call(this);I=J.toArray();this.boxIds=(function(){var P,O,N;N=[];for(P=0,O=I.length;P<O;P++){L=I[P];N.push(L.id)}return N})();this.boxes=this.editor.areas[this.pageNum].boxesContainer.getBoxesFromIds(this.boxIds)}G.prototype.execute=function(){var M,L,J,K,I;this.editor.areas[this.pageNum].boxesContainer.removeBoxes(this.boxIds);K=this.boxIds;I=[];for(L=0,J=K.length;L<J;L++){M=K[L];I.push(this.editor.panel.removeBoxRow(M))}return I};G.prototype.undo=function(){var K,M,J,L,I;L=this.boxes;I=[];for(M=0,J=L.length;M<J;M++){K=L[M];this.editor.areas[this.pageNum].boxesContainer.addBox(K);I.push(this.editor.panel[this.pageNum].addBoxRow(K.element.attr("id")))}return I};G.prototype.getType=function(){return"Remove"};return G})(A);b=(function(G){D(H,G);function H(J,K,I){this.box=J;this.toPosition=K;this.fromPosition=I;H.__super__.constructor.call(this);this.boxIds.push(this.box.element.attr("id"));if(I==null){this.fromPosition=this.box.currentPosition()}}H.prototype.execute=function(){return this.box.setPosition(this.toPosition.left,this.toPosition.top)};H.prototype.undo=function(){return this.box.setPosition(this.fromPosition.left,this.fromPosition.top)};H.prototype.getType=function(){return"Modify"};return H})(A);v=(function(H){D(G,H);function G(J,I){this.editor=J;this.jsonBoxes=I;G.__super__.constructor.call(this)}G.prototype.execute=function(){var K,Q,R,P,J,L,I,S,N,O,M;L=JSON.parse(this.jsonBoxes);M=[];for(P=N=0,O=L.length-1;0<=O?N<=O:N>=O;P=0<=O?++N:--N){M.push((function(){var T,U,V=this;T=L[P];U=[];for(J in T){R=T[J];K=this.editor.areas[P];I=this.editor.panel;Q=new z(K.boxesContainer.element);Q.element=$(R);K.boxesContainer.addBox(Q);S=I.getRows(P);if(S.length===0){U.push(I.addBoxRow(J))}else{U.push(S.each(function(W,Y){var X,Z;X=$(Y).attr("ppedit-box-id");Z=K.boxesContainer.boxes[X].element.css("z-index");if(parseInt(Z)<parseInt(Q.element.css("z-index"))||W===S.length-1){I.addBoxRow(J,W);return false}}))}}return U}).call(this))}return M};G.prototype.undo=function(){};G.prototype.getType=function(){return"Create"};G.prototype.getPageNum=function(){};return G})(A);a=(function(G){D(H,G);function H(I,J,K){this.editor=I;this.pageNum=J;this.optionsList=K;H.__super__.constructor.call(this);this.boxes=[]}H.prototype.execute=function(){var O,Q,M,K,P,I,N,L,J;if(this.optionsList!=null){if(this.boxes.length===0){N=this.optionsList;for(M=0,P=N.length;M<P;M++){Q=N[M];this.boxes.push(new z(this.editor.areas[this.pageNum].boxesContainer.element,Q))}}L=this.boxes;J=[];for(K=0,I=L.length;K<I;K++){O=L[K];J.push(this._addBox(O))}return J}else{if(this.boxes.length===0){this.boxes.push(new z(this.editor.areas[this.pageNum].boxesContainer.element))}return this._addBox(this.boxes[0])}};H.prototype.undo=function(){var K,M,J,L,I;L=this.boxes;I=[];for(M=0,J=L.length;M<J;M++){K=L[M];this.editor.areas[this.pageNum].boxesContainer.removeBoxes([K.element.attr("id")]);I.push(this.editor.panel.removeBoxRow([K.element.attr("id")]))}return I};H.prototype._addBox=function(I){var J;this.editor.areas[this.pageNum].boxesContainer.addBox(I);J=I.element.attr("id");this.editor.panel.addBoxRow(this.pageNum,J);if(this.boxIds.indexOf(J)===-1){return this.boxIds.push(J)}};H.prototype.getType=function(){return"Create"};H.prototype.getPageNum=function(){return this.pageNum};return H})(A);w=(function(H){D(G,H);function G(J,K,I){this.editor=J;this.pageNum=K;this.boxesClones=I;G.__super__.constructor.call(this);this.newBoxes=[]}G.prototype.execute=function(){var K,J,M,L,I,N=this;if(this.newBoxes.length===0){this.boxesClones.each(function(P,O){var R,Q;Q=CSSJSON.toJSON(O.style.cssText).attributes;R=new z(N.editor.areas[N.pageNum].boxesContainer.element,Q);return N.newBoxes[P]=R})}I=[];for(J=M=0,L=this.newBoxes.length-1;0<=L?M<=L:M>=L;J=0<=L?++M:--M){K=this.newBoxes[J];this.editor.areas[this.pageNum].boxesContainer.addBox(K);K.element.html(this.boxesClones.eq(J).html());this.editor.panel.addBoxRow(this.pageNum,K.element.attr("id"));I.push(this.boxIds[J]=K.element.attr("id"))}return I};G.prototype.undo=function(){var K,M,J,L,I;L=this.newBoxes;I=[];for(M=0,J=L.length;M<J;M++){K=L[M];this.editor.areas[this.pageNum].boxesContainer.removeBoxes([K.element.attr("id")]);I.push(this.editor.panel.removeBoxRow([K.element.attr("id")]))}return I};G.prototype.getType=function(){return"Create"};G.prototype.getPageNum=function(){return this.pageNum};return G})(A);r=(function(){function G(){this.undoStack=[];this.redoStack=[]}G.prototype.pushCommand=function(I,H){if((H==null)||H){I.execute()}this.undoStack.push(I);return this.redoStack.splice(0,this.redoStack.length)};G.prototype.undo=function(){var H;if(this.undoStack.length>0){H=this.undoStack.pop();H.undo();return this.redoStack.push(H)}};G.prototype.redo=function(){var H;if(this.redoStack.length>0){H=this.redoStack.pop();H.execute();return this.undoStack.push(H)}};G.prototype.getUndoJSON=function(){var S,M,H,R,J,N,T,W,P,V,O,L,U,I,Q,K;N={};H={};T={};Q=this.undoStack;for(O=0,U=Q.length;O<U;O++){M=Q[O];K=M.boxIds;for(L=0,I=K.length;L<I;L++){J=K[L];switch(M.getType()){case"Create":H[""+J]={html:$("#"+J).clone().wrap("<div></div>").parent().html()||"",pageNum:M.getPageNum()};break;case"Modify":if(H[""+J]==null){N[""+J]=$("#"+J).clone().wrap("<div></div>").parent().html()||""}break;case"Remove":delete N[""+J];if(H[""+J]!=null){delete H[""+J]}else{T[""+J]=""}}}}W={modified:(function(){var X;X=[];for(S in N){V=N[S];X.push({id:S,html:V})}return X})(),removed:(function(){var X;X=[];for(S in T){V=T[S];X.push({id:S,html:V})}return X})(),created:[[],[]]};for(S in H){V=H[S];W.created[V.pageNum].push({id:S,html:V.html})}P=new jsSHA(JSON.stringify(W),"TEXT");R=P.getHMAC("","TEXT","SHA-256","HEX");W.etag=R;return JSON.stringify(W)};G.prototype.clearHistory=function(){return this.undoStack.splice(0,this.undoStack.length)};return G})();B=(function(H){D(G,H);function G(K,J,I){this.editor=K;this.boxesSelector=J;this.newCssOptions=I;G.__super__.constructor.call(this);this.boxesToCopy=this.boxesSelector.clone()}G.prototype.execute=function(){var I=this;return this.boxesSelector.each(function(J,K){return $(K).css(I.newCssOptions)})};G.prototype.undo=function(){var I=this;return this.boxesToCopy.each(function(K,L){var J;J=CSSJSON.toJSON(I.boxesToCopy.filter("#"+L.id).attr("style")).attributes;return I.boxesSelector.filter("#"+L.id).css(J)})};G.prototype.getType=function(){return"Modify"};return G})(A);e=(function(H){D(G,H);function G(J,L,K,I){this.editor=J;this.pageNum=L;this.moveUp=I;G.__super__.constructor.call(this);this.boxId=K.attr("id")}G.prototype.execute=function(){if(this.moveUp){return this.swapRowWithUpperRow()}else{return this.swapRowWithLowerRow()}};G.prototype.undo=function(){if(this.moveUp){return this.swapRowWithLowerRow()}else{return this.swapRowWithUpperRow()}};G.prototype.swapRowWithUpperRow=function(){var J,K,I;K=this.editor.panel.getRowWithBoxId(this.boxId);J=K.index();if(J-1>=0){I=this.editor.panel.getRowAtIndex(this.pageNum,J-1);return this.swapRows(K,I)}};G.prototype.swapRowWithLowerRow=function(){var I,J,K;K=this.editor.panel.getRowWithBoxId(this.boxId);I=K.index();if(I+1<this.editor.panel.getRows(this.pageNum).length){J=this.editor.panel.getRowAtIndex(this.pageNum,I+1);return this.swapRows(K,J)}};G.prototype.swapRows=function(M,L){var J,K,I;if(M.index()<L.index()){M.insertAfter(L)}else{M.insertBefore(L)}J=this.editor.areas[this.pageNum].boxesContainer.boxes[M.attr("ppedit-box-id")];K=J.element.css("z-index");I=this.editor.areas[this.pageNum].boxesContainer.boxes[L.attr("ppedit-box-id")];J.element.css("z-index",I.element.css("z-index"));return I.element.css("z-index",K)};G.prototype.getType=function(){return"Modify"};return G})(A);x=(function(H){D(G,H);function G(K,J,I){this.box=K;this.prevContent=J;this.newContent=I;G.__super__.constructor.call(this);this.boxIds.push(this.box.element.attr("id"))}G.prototype.execute=function(){return this.box.element.html(this.newContent)};G.prototype.undo=function(){return this.box.element.html(this.prevContent)};G.prototype.getType=function(){return"Modify"};return G})(A);s=(function(H){D(G,H);function G(J,L,K,M,I){this.editor=J;this.pageNum=L;this.boxId=K;this.prevVal=M;this.newVal=I;G.__super__.constructor.call(this)}G.prototype.execute=function(){var I;I=new o(row);return this.changeOpacityToVal(this.newVal)};G.prototype.undo=function(){return this.changeOpacityToVal(this.prevVal)};G.prototype.changeOpacityToVal=function(I){this.editor.areas[this.pageNum].boxesContainer.changeBoxOpacity(this.boxId,I);return this.editor.panel.element.find("tr[ppedit-box-id="+this.boxId+"]").find(".ppedit-slider").slider("setValue",parseInt(I*100))};G.prototype.getType=function(){return"Modify"};return G})(A);u=(function(H){D(G,H);function G(I){this.root=I;G.__super__.constructor.call(this,this.root);this.downPosition=void 0;this.rectSize=void 0;this._context=void 0}G.prototype.buildElement=function(){return this.element=$("<canvas></canvas>").addClass("ppedit-canvas").attr("width","920px").attr("height","1325px")};G.prototype.bindEvents=function(){var I=this;this.element.on("containerMouseDown",function(J,K){I.downPosition={left:K.offsetX,top:K.offsetY};return I.rectSize={width:0,height:0}}).on("containerMouseMove",function(K,J,L){if((I.downPosition!=null)&&(I.rectSize!=null)&&(L!=null)){I.rectSize.width+=L.x;I.rectSize.height+=L.y;return I.drawRect(I.downPosition,I.rectSize)}}).on("containerMouseLeave",function(){return I.clear()}).on("containerMouseUp",function(){if((I.downPosition!=null)&&(I.rectSize!=null)){I.root.trigger("canvasRectSelect",[{topLeft:I.downPosition,size:I.rectSize}])}return I.clear()});return this._context=this.element.get(0).getContext("2d")};G.prototype.drawRect=function(J,I){this._context.clearRect(0,0,this.element.width(),this.element.height());this._context.globalAlpha=0.2;this._context.beginPath();this._context.rect(J.left,J.top,I.width,I.height);this._context.fillStyle="blue";return this._context.fill()};G.prototype.clear=function(){this._context.clearRect(0,0,this.element.width(),this.element.height());this.downPosition=void 0;return this.rectSize=void 0};return G})(t);m=(function(H){D(G,H);G.CLICK_TIME_INTERVAL=200;function G(I){this.root=I;G.__super__.constructor.call(this,this.root);this.boxes={}}G.prototype.buildElement=function(){this.element=$("<div></div>").addClass("ppedit-box-container");this.element.append('<p class="hDotLine"></p>');return this.element.append('<p class="vDotLine"></p>')};G.prototype.bindEvents=function(){var J,M,K,I,L=this;this.element.mousedown(function(N){N.preventDefault();return L.unSelectAllBoxes()}).dblclick(function(N){var O;O=L.getPointClicked(N);if(L.getSelectedBoxes().length===0){return L.element.trigger("addBoxRequested",[O])}}).click(function(N){return L.root.trigger("unSelectBoxes")});K=this.boxes;I=[];for(M in K){J=K[M];I.push(J.bindEvents())}return I};G.prototype.selectBoxesInRect=function(J){var I,K=this;I={topLeft:{left:J.topLeft.left+this.element.scrollLeft(),top:J.topLeft.top+this.element.scrollTop()},size:J.size};if(I.size.width<0){I.topLeft.left-=Math.abs(I.size.width);I.size.width=Math.abs(I.size.width)}if(I.size.height<0){I.topLeft.top-=Math.abs(I.size.height);I.size.height=Math.abs(I.size.height)}return this.getAllBoxes().each(function(L,M){if(g.rectContainsRect(I,K.boxBounds($(M)))){return K.boxes[M.id].select()}})};G.prototype.boxBounds=function(J){var I;return I={topLeft:{left:J.position().left+this.element.scrollLeft(),top:J.position().top+this.element.scrollTop()},size:{width:J.width(),height:J.height()}}};G.prototype.addBox=function(I){if(I.element==null){I.buildElement()}this.element.append(I.element);I.bindEvents();return this.boxes[I.element.attr("id")]=I};G.prototype.removeBoxes=function(K){var M,L,J,I;I=[];for(L=0,J=K.length;L<J;L++){M=K[L];this.boxes[M].element.removeClass("ppedit-box-selected").removeClass("ppedit-box-focus").remove();I.push(delete this.boxes[M])}return I};G.prototype.getBoxesFromIds=function(I){var J;return(function(){var M,L,K;K=[];for(M=0,L=I.length;M<L;M++){J=I[M];if(this.boxes[J]!=null){K.push(this.boxes[J])}}return K}).call(this)};G.prototype.getBoxesFromSelector=function(I){var L,K,N,J,M;K={};M=I.toArray();for(N=0,J=M.length;N<J;N++){L=M[N];K[L.id]=this.boxes[L.id]}return K};G.prototype.getAllBoxes=function(){return this.element.find(".ppedit-box")};G.prototype.getSelectedBoxes=function(){return this.element.find(".ppedit-box:focus, .ppedit-box-selected, .ppedit-box-focus")};G.prototype.getNotFocusedSelectedBoxes=function(){return this.element.find(".ppedit-box-selected")};G.prototype.changeBoxOpacity=function(I,J){return this.boxes[I].element.css("opacity",J)};G.prototype.unSelectAllBoxes=function(){var J,L,K,I;K=this.boxes;I=[];for(L in K){J=K[L];J.stopMoving();I.push(J.element.removeClass("ppedit-box-focus").blur())}return I};G._rectContainsRect=function(I,J){return J.topLeft.x>=I.topLeft.x&&J.topLeft.y>=I.topLeft.y&&J.topLeft.x+J.size.width<=I.topLeft.x+I.size.width&&J.topLeft.y+J.size.height<=I.topLeft.y+I.size.height};G.prototype.getPointClicked=function(I){return{left:event.offsetX+this.element.scrollLeft(),top:event.offsetY+this.element.scrollTop()}};G.prototype.getAllHunks=function(){var I,J;return(function(){var L,K;L=this.boxes;K=[];for(J in L){I=L[J];K.push({id:J,html:I.element.wrap("<div></div>").parent().html()})}return K}).call(this)};return G})(t);f=(function(H){D(G,H);function G(I){this.root=I;G.__super__.constructor.call(this,this.root)}G.prototype.buildElement=function(){return this.element=$('       <div class="ppedit-grid">            <svg width="100%" height="100%">              <defs>                <pattern id="smallGrid" width="8" height="8" patternUnits="userSpaceOnUse">                  <path d="M 8 0 L 0 0 0 8" fill="none" stroke="gray" stroke-width="0.5"/>                </pattern>                <pattern id="grid" width="80" height="80" patternUnits="userSpaceOnUse">                  <rect width="80" height="80" fill="url(#smallGrid)"/>                  <path d="M 80 0 L 0 0 0 80" fill="none" stroke="gray" stroke-width="1"/>                </pattern>              </defs>              <rect width="100%" height="100%" fill="url(#grid)" />            </svg>      </div>')};G.prototype.toggleGrid=function(){return this.element.toggle()};return G})(t);o=(function(H){D(G,H);function G(I,J){this.root=I;this.pageNum=J;G.__super__.constructor.call(this,this.root);this.prevMouseMoveEvent=void 0;this.canvas=void 0;this.grid=void 0;this.boxesContainer=void 0;this.fontPanel=void 0}G.prototype.buildElement=function(){this.element=$('<div class="editContainer shadow-effect"></div>').attr("id","ppedit-page-"+this.pageNum).append("<div></div>").addClass("ppedit-container").addClass("col-xs-8").attr("tabindex",0);this.boxesContainer=new m(this.element);this.canvas=new u(this.element);this.grid=new f(this.element);this.fontPanel=new F(this.element);this.boxesContainer.buildElement();this.canvas.buildElement();this.grid.buildElement();this.fontPanel.buildElement();this.element.append(this.boxesContainer.element);this.element.append(this.canvas.element);this.element.append(this.grid.element);return this.element.append(this.fontPanel.element)};G.prototype.bindEvents=function(){var I=this;this.element.mousedown(function(){if(I.boxesContainer.getNotFocusedSelectedBoxes().length===0){return I.canvas.element.trigger("containerMouseDown",[event])}}).mousemove(function(J){var K;K=void 0;if(I.prevMouseMoveEvent!=null){K={x:J.clientX-I.prevMouseMoveEvent.clientX,y:J.clientY-I.prevMouseMoveEvent.clientY}}I.element.find("*").trigger("containerMouseMove",[J,K]);return I.prevMouseMoveEvent=J}).mouseleave(function(){I.element.find("*").trigger("containerMouseLeave");return I.prevMouseMoveEvent=void 0}).mouseup(function(J){I.element.find("*").trigger("containerMouseUp",[J]);return I.prevMouseMoveEvent=void 0}).keydown(function(J){return I.element.find("*").trigger("containerKeyDown",[J])}).on("canvasRectSelect",function(K,J){return I.boxesContainer.selectBoxesInRect(J)}).on("boxSelected",function(K,J){return I.fontPanel.setSettingsFromStyle(J.element.get(0).style)});this.boxesContainer.bindEvents();this.canvas.bindEvents();this.grid.bindEvents();return this.fontPanel.bindEvents()};return G})(t);d=(function(H){D(G,H);function G(I,K,J){this.editor=I;this.addPage=K;this.pageNum=J;this.area=void 0;G.__super__.constructor.call(this)}G.prototype.execute=function(){if(this.addPage){if(this.pageNum==null){this.pageNum=this.editor.areas.length}return this._insertNewPage(this.pageNum)}else{return this._removePage(this.pageNum)}};G.prototype.undo=function(){return this._removePage(this.pageNum)(this.addPage?void 0:this._insertPage(this.pageNum,this.area))};G.prototype._insertNewPage=function(J){var I;I=new o(this.editor.element,this.editor.areas.length);I.buildElement();this._insertPage(J,I);this.area=I;return this.editor.areas=this.editor.areas.slice(0,J).concat([this.area]).concat(this.editor.areas.slice(J,this.editor.areas.length))};G.prototype._insertPage=function(P,K){var N,J,I,Q,M,L,O=this;if(P>0){K.element.insertAfter(this.editor.superContainer.children().eq(P-1))}else{this.editor.superContainer.append(K.element)}K.bindEvents();I=this.editor.panel;I.insertTab(P);M=K.boxesContainer.boxes;L=[];for(J in M){N=M[J];Q=I.getRows(P);if(Q.length===0){L.push(I.addBoxRow(J))}else{L.push(Q.each(function(R,T){var S,U;S=$(T).attr("ppedit-box-id");U=K.boxesContainer.boxes[S].element.css("z-index");if(parseInt(U)<parseInt(N.element.css("z-index"))||R===Q.length-1){I.addBoxRow(J,R);return false}}))}}return L};G.prototype._removePage=function(I){this.area=this.editor.areas.splice(I,1);this.area.element.remove();return this.editor.panel.removeTab(I)};G.prototype.getType=function(){return"Modify"};return G})(A);h=(function(){function G(){}G.prototype.createChangeFontSizeCommand=function(J,I,H){return new B(J,I,{"font-size":H})};G.prototype.createChangeFontTypeCommand=function(J,I,H){return new B(J,I,{"font-family":H})};G.prototype.createChangeFontWeightCommand=function(K,J,I){var H;H=I?"bold":"normal";return new B(K,J,{"font-weight":H})};G.prototype.createChangeItalicFontCommand=function(K,J,I){var H;H=I?"italic":"normal";return new B(K,J,{"font-style":H})};G.prototype.createChangeUnderlineFontCommand=function(K,J,I){var H;H=I?"underline":"none";return new B(K,J,{"text-decoration":H})};G.prototype.createRightAlignmentCommand=function(I,H){return new B(I,H,{"text-align":"right"})};G.prototype.createLeftAlignmentCommand=function(I,H){return new B(I,H,{"text-align":"left"})};G.prototype.createCenterAlignmentCommand=function(I,H){return new B(I,H,{"text-align":"center"})};G.prototype.createChangeTextColorCommand=function(J,I,H){return new B(J,I,{color:"#"+H})};G.prototype.createChangeOpacityCommand=function(J,I,K,L,H){return new s(J,I,K,L,H)};G.prototype.createMoveBoxCommand=function(I,J,H){return new b(I,J,H)};G.prototype.createRemoveBoxesCommand=function(I,J,H){return new i(I,J,H)};G.prototype.createCopyBoxesCommand=function(J,I,H){return new w(J,I,H)};G.prototype.createCreateBoxesCommand=function(H,I,J){return new a(H,I,J)};G.prototype.createCreateChangeBoxContentCommand=function(J,I,H){return new x(J,I,H)};G.prototype.createMoveUpCommand=function(H,J,I){return new e(H,J,I,true)};G.prototype.createMoveDownCommand=function(H,J,I){return new e(H,J,I,false)};G.prototype.createLoadBoxesCommand=function(I,H){return new v(I,H)};G.prototype.createAddPageCommand=function(H){return new d(H,true)};return G})();y=(function(G){D(H,G);function H(I){this.root=I;this.prevOpacityVal=void 0;H.__super__.constructor.call(this,this.root)}H.prototype.buildElement=function(){return this.element=$('      <div class="menu-sidebar">          <!-- Sidebar Right -->        <div class="menu-tab-sidebar">            <div class="minimize-sidebar-btn shadow-effect">                <span class="minimize-text">&lt;&lt;</span>            </div>            <div class="menu-tab-pages">            </div>            <div class="add-tab-sidebar-btn shadow-effect">                <span class="add-text">+</span>            </div>        </div>         <div class="right-sidebar-container shadow-effect">            <!-- Row 1 Menu  -->            <div class="right-sidebar-menu1">              <div class="moveElementUpBtn menu-panel-icon"></div>              <div class="moveElementDownBtn menu-panel-icon"></div>              <div class="addElementBtn menu-panel-icon"></div>            </div>          </div>      </div>')};H.prototype.bindEvents=function(){var I=this;this.element.find(".addElementBtn").click(function(){return I.element.trigger("panelClickAddBtnClick",[I._getDisplayedTabIndex()])});this.element.find(".moveElementUpBtn").click(function(){return I.element.trigger("moveElementUpBtnClick",[I._getDisplayedTabIndex()])});this.element.find(".moveElementDownBtn").click(function(){return I.element.trigger("moveElementDownBtnClick",[I._getDisplayedTabIndex()])});return this.element.find(".minimize-sidebar-btn").click(function(J){return I.element.toggleClass("menu-sidebar-open")})};H.prototype.addNewTab=function(){return this.insertTab(this.element.find(".page-sidebar-tab").length)};H.prototype.insertTab=function(I){var L,J,K,M=this;L=Math.max(I,this.element.find(".page-sidebar-tab").length);K=$('           <a href="#ppedit-page-'+L+'">                  <div class="page-sidebar-tab menu-right-btn shadow-effect">                    <span class="vertical-text">Page '+(L+1)+"</span>                  </div>           </a>    ");if(L===0){this.element.find(".menu-tab-pages").append(K)}else{K.insertAfter(this.element.find(".menu-tab-pages a").eq(L-1))}K.click(function(N){return M._displayTab(L)}).nextAll("a").each(function(O,N){$(O).attr("href","#ppedit-page-"+(L+N+1)).html('            <div class="page-sidebar-tab menu-right-btn shadow-effect">              <span class="vertical-text">Page '+(L+N+2)+"</span>            </div>          ").click(function(){return M._displayTab(L+N+1)});return console.log(O)});J=$('      <!-- Row 2 Menu -->      <div class="ppedit-row-container">        <table class="right-sidebar-menu2" cellspacing="0px" cellpadding="2px">        </table>      </div>    ');if(L===0){this.element.find(".right-sidebar-container").append(J)}else{J.insertAfter(this.element.find(".ppedit-row-container").eq(L-1))}return this.element.find(".ppedit-row-container").removeClass("ppedit-row-container-active").eq(L).addClass("ppedit-row-container-active")};H.prototype.addBoxRow=function(I,L,K){var J,M=this;J=$('		<tr class="ppedit-panel-row">			<td style="width:10%">				<div class="deleteElementBtn menu-panel-icon"></div>		    </td>            <td style="width:50%">            <input type="text" class="form-control" placeholder="Element 1">            </td>            <td style="width:40%">              <div class="ppedit-slider"></div>            </td>	    </tr>	      ').attr("ppedit-box-id",L);if((K==null)||K===0){this._getRowContainer(I).find(".right-sidebar-menu2").prepend(J)}else{J.insertBefore(this._getRowContainer(I).find('.ppedit-panel-row:nth-child("'+K+'")'))}J.find(".ppedit-slider").slider({min:0,max:100,step:1,value:100}).on("slideStart",function(N){return M.prevOpacityVal=$(N.target).val()||100}).on("slide",function(N){var O;O=$(N.target).val();return $(N.target).trigger("onRowSliderValChanged",[I,L,parseInt(O)/100])}).on("slideStop",function(N){var O;O=$(N.target).val();if(M.prevOpacityVal!==O){$(N.target).trigger("onRowSliderStopValChanged",[I,L,parseInt(M.prevOpacityVal)/100,parseInt(O)/100])}return M.prevOpacityVal=void 0});return J.find(".deleteElementBtn").on("click",function(N){return $(N.target).trigger("onRowDeleteBtnClick",[I,L])})};H.prototype.removeBoxRow=function(I){return this.getRowWithBoxId(I).remove()};H.prototype.getRowWithBoxId=function(I){return this.element.find("tr[ppedit-box-id="+I+"]").eq(0)};H.prototype.getRowAtIndex=function(I,J){return this._getRowContainer(I).find(".ppedit-panel-row").eq(J)};H.prototype.setRowName=function(J,I){return this.getRowWithBoxId(J).find("ppedit-rowName").val(I)};H.prototype.getRows=function(I){return this._getRowContainer(I).find(".ppedit-panel-row")};H.prototype._displayTab=function(I){return this.element.find(".ppedit-row-container").removeClass("ppedit-row-container-active").eq(I).addClass("ppedit-row-container-active")};H.prototype.removeTab=function(I){this._getRowContainer(I).remove();return this.element.find(".page-sidebar-tab").eq(I).remove()};H.prototype._getRowContainer=function(I){return this.element.find(".ppedit-row-container").eq(I)};H.prototype._getDisplayedRowContainer=function(){return this.element.find(".ppedit-row-container-active").eq(0)};H.prototype._getDisplayedTabIndex=function(){return this._getDisplayedRowContainer().index()-1};return H})(t);k=(function(){function G(){this.items=void 0}G.prototype.pushItems=function(H){return this.items=$.extend(true,{},H)};G.prototype.popItems=function(){var H;H=this.items;this.items=void 0;if(H!=null){return H}else{return[]}};return G})();l=(function(H){D(G,H);G.INIT_NUM_OF_PAGES=2;function G(I){this.root=I;G.__super__.constructor.call(this,this.root);this.clipboard=new k;this.commandManager=new r;this.cmdFactory=new h;this.fontPanel=void 0;this.controller=void 0;this.panel=void 0}G.prototype.buildElement=function(){this.element=$('      <div class="container" tabindex="0">      </div>    ');this.controller=p.getController(this.element);this.superContainer=$('      <div class="superContainer">      </div>    ');this.areas=[];this.panel=new y(this.element);this.mainPanel=new j(this.element);this.fontPanel=new F(this.element);this.panel.buildElement();this.mainPanel.buildElement();this.fontPanel.buildElement();this.element.append(this.mainPanel.element);this.element.append(this.panel.element);this.element.append(this.superContainer);return this.element.append(this.fontPanel.element)};G.prototype.bindEvents=function(){var M,J,L,K,I,N=this;this.element.on("requestUndo",function(O){return N.commandManager.undo()}).on("requestRedo",function(O){return N.commandManager.redo()}).on("requestDelete",function(Q){var P,S,R,O;O=[];for(P=S=0,R=G.INIT_NUM_OF_PAGES-1;0<=R?S<=R:S>=R;P=0<=R?++S:--S){if(N.areas[P].boxesContainer.getSelectedBoxes().length!==0){O.push(N.commandManager.pushCommand(N.cmdFactory.createRemoveBoxesCommand(N,P,N.areas[0].boxesContainer.getSelectedBoxes())))}else{O.push(void 0)}}return O}).on("requestCopy",function(Q){var P,S,R,O;O=[];for(P=S=0,R=G.INIT_NUM_OF_PAGES-1;0<=R?S<=R:S>=R;P=0<=R?++S:--S){if(N.areas[P].boxesContainer.getSelectedBoxes().length!==0){N.clipboard.pushItems({pageNum:P,boxes:N.areas[P].boxesContainer.getSelectedBoxes()});break}else{O.push(void 0)}}return O}).on("requestPaste",function(P){var O;O=N.clipboard.popItems();if((O.boxes!=null)&&O.boxes.length>0){return N.commandManager.pushCommand(N.cmdFactory.createCopyBoxesCommand(N,O.pageNum,O.boxes))}}).on("textColorChanged",function(Q,P){var O;O=N.getSelectedBoxes();if(O.length!==0){return N.commandManager.pushCommand(N.cmdFactory.createChangeTextColorCommand(N,N.getPageNum(O),N.areas[0].boxesContainer.getSelectedBoxes(),P))}}).on("graphicContentChanged",function(O,P){return N.commandManager.pushCommand(N.cmdFactory.createCreateChangeBoxContentCommand(P.graphic,P.prevContent,P.newContent),false)}).on("boxMoved",function(Q,P,R,O){return N.commandManager.pushCommand(N.cmdFactory.createMoveBoxCommand(P,R,O),false)}).on("moveElementUpBtnClick",function(Q,O){var P;P=N.getSelectedBoxes();if(P.length>0){return N.commandManager.pushCommand(N.cmdFactory.createMoveUpCommand(N,O,P))}}).on("moveElementDownBtnClick",function(Q,O){var P;P=N.getSelectedBoxes();if(P.length>0){return N.commandManager.pushCommand(N.cmdFactory.createMoveDownCommand(N,O,P))}}).on("panelClickAddBtnClick",function(P,O){return N.commandManager.pushCommand(N.cmdFactory.createCreateBoxesCommand(N,O))}).on("panelClickGridBtnClick",function(R){var Q,T,P,S,O;S=N.areas;O=[];for(T=0,P=S.length;T<P;T++){Q=S[T];O.push(Q.grid.toggleGrid())}return O}).on("onRowDeleteBtnClick",function(P,O,Q){return N.commandManager.pushCommand(N.cmdFactory.createRemoveBoxesCommand(N,O,N.root.find("#"+Q)))}).on("onRowSliderValChanged",function(P,O,Q,R){return N.areas[O].boxesContainer.changeBoxOpacity(Q,R)}).on("onRowSliderStopValChanged",function(Q,O,R,S,P){return N.commandManager.pushCommand(N.cmdFactory.createChangeOpacityCommand(N,O,R,S,P))}).on("addBoxRequested",function(O,Q){var P;P=N.getPageNum($(O.target));return N.commandManager.pushCommand(N.cmdFactory.createCreateBoxesCommand(N,P,[Q]))}).on("fontTypeChanged",function(P,O){var Q;Q=N.getSelectedBoxes();if(Q.length!==0){return N.commandManager.pushCommand(N.cmdFactory.createChangeFontTypeCommand(N,Q,O))}}).on("fontSizeChanged",function(P,O){var Q;Q=N.getSelectedBoxes();if(Q.length!==0){return N.commandManager.pushCommand(N.cmdFactory.createChangeFontSizeCommand(N,Q,O))}}).on("fontWeightBtnEnableClick",function(O){var P;P=N.getSelectedBoxes();if(P.length!==0){return N.commandManager.pushCommand(N.cmdFactory.createChangeFontWeightCommand(N,P,true))}}).on("fontWeightBtnDisableClick",function(O){var P;P=N.getSelectedBoxes();if(P.length!==0){return N.commandManager.pushCommand(N.cmdFactory.createChangeFontWeightCommand(N,P,false))}}).on("fontUnderlinedBtnEnableClick",function(O){var P;P=N.getSelectedBoxes();if(P.length!==0){return N.commandManager.pushCommand(N.cmdFactory.createChangeUnderlineFontCommand(N,P,true))}}).on("fontUnderlinedBtnDisableClick",function(O){var P;P=N.getSelectedBoxes();if(P.length!==0){return N.commandManager.pushCommand(N.cmdFactory.createChangeUnderlineFontCommand(N,P,false))}}).on("fontItalicBtnEnableClick",function(O){var P;P=N.getSelectedBoxes();if(P.length!==0){return N.commandManager.pushCommand(N.cmdFactory.createChangeItalicFontCommand(N,P,true))}}).on("fontItalicBtnDisableClick",function(O){var P;P=N.getSelectedBoxes();if(P.length!==0){return N.commandManager.pushCommand(N.cmdFactory.createChangeItalicFontCommand(N,P,false))}}).on("rightAlignment",function(O){var P;P=N.getSelectedBoxes();if(P.length!==0){return N.commandManager.pushCommand(N.cmdFactory.createRightAlignmentCommand(N,P))}}).on("leftAlignment",function(O){var P;P=N.getSelectedBoxes();if(P.length!==0){return N.commandManager.pushCommand(N.cmdFactory.createLeftAlignmentCommand(N,P))}}).on("centerAlignment",function(O){var P;P=N.getSelectedBoxes();if(P.length!==0){return N.commandManager.pushCommand(N.cmdFactory.createCenterAlignmentCommand(N,P))}}).on("bulletPointBtnEnableClick",function(R){var Q,P,T,U,S,O;T=N.getSelectedBoxes();S=N.getPageNum(T);P=N.areas[S].boxesContainer.getBoxesFromSelector(T.eq(0));O=[];for(U in P){Q=P[U];O.push(Q.addBulletPoint())}return O}).on("orderedPointBtnEnableClick",function(R){var Q,P,T,U,S,O;T=N.getSelectedBoxes();S=N.getPageNum(T);P=N.areas[S].boxesContainer.getBoxesFromSelector(T.eq(0));O=[];for(U in P){Q=P[U];O.push(Q.addOrderedPointList())}return O});this.panel.bindEvents();this.fontPanel.bindEvents();this.controller.bindEvents();this.mainPanel.bindEvents();I=[];for(J=L=0,K=G.INIT_NUM_OF_PAGES-1;0<=K?L<=K:L>=K;J=0<=K?++L:--L){M=this.cmdFactory.createAddPageCommand(this);I.push(M.execute())}return I};G.prototype.getSelectedBoxes=function(){return this.element.find(".ppedit-box:focus, .ppedit-box-selected, .ppedit-box-focus")};G.prototype.getPageNum=function(I){return I.parents(".editContainer").index()};G.prototype.load=function(I){var J;J=this.cmdFactory.createLoadBoxesCommand(this,I);return J.execute()};G.prototype.getAllHunks=function(){var I;return JSON.stringify((function(){var M,K,L,J;L=this.areas;J=[];for(M=0,K=L.length;M<K;M++){I=L[M];J.push(this.area.boxesContainer.getAllHunks())}return J}).call(this))};return G})(t);F=(function(H){D(G,H);function G(I){this.root=I;G.__super__.constructor.call(this,this.root)}G.prototype.buildElement=function(){return this.element=$('          <div class="edit-menu shadow-effect" style="visibility:hidden;">            <div class="edit-menu-row1">               <select class="fontTypeBtn from-control edit-menu-row1-dd-ff">                 <option value="Times New Roman" selected>Times New Roman</option>                 <option value="Arial">Arial</option>                 <option value="Inconsolata">Inconsolata</option>                 <option value="Glyphicons Halflings">Glyphicons Halflings</option>               </select>                              <select class="fontSizeBtn from-control edit-menu-row1-dd-fs">                 <option value="6">6</option>                 <option value="8">8</option>                 <option value="10" selected>10</option>                 <option value="11">11</option>                 <option value="12">12</option>                 <option value="14">14</option>                 <option value="16">16</option>                 <option value="20">20</option>               </select>               <div class="boldButton boldButtonDisable font-panel-icon-row"></div>               <div class="italicButton italicButtonDisable font-panel-icon-row"></div>               <div class="underlineButton underlineButtonDisable font-panel-icon-row"></div>             </div>             <div class="edit-menu-row2">                <div class="leftAlignBtn leftAlignButtonEnable font-panel-icon-row"></div>                <div class="centerAlignBtn centerAlignButtonDisable font-panel-icon-row"></div>                <div class="rightAlignBtn rightAlignButtonDisable font-panel-icon-row"></div>             </div>            </div>').addClass("FontPanel")};G.prototype.bindEvents=function(){var I=this;this.element.find("select.fontTypeBtn").change(function(K){var J;J=$(K.target).find("option:selected").val();return I.root.trigger("fontTypeChanged",[J])});this.element.find("select.fontSizeBtn").change(function(K){var J;J=$(K.target).find("option:selected").val()+"pt";return I.root.trigger("fontSizeChanged",[J])});this.element.find(".colorPicker").click(function(J){return $(J.target).colpick({colorScheme:"dark",layout:"rgbhex",color:"ff8800",onSubmit:function(K,N,L,M){I.element.trigger("textColorChanged",[N]);return $(M).colpickHide()}})});this.element.find(".boldButton").click(function(K){var J;if($(K.target).hasClass("boldButtonDisable")){J=$(K.target).attr("class","boldButton boldButtonEnable font-panel-icon-row");return J.trigger(J.hasClass("boldButtonEnable font-panel-icon-row")?"fontWeightBtnEnableClick":"fontWeightBtnDisableClick")}else{J=$(K.target).attr("class","boldButtonDisable font-panel-icon-row");return J.trigger(J.hasClass(".boldButtonDisable font-panel-icon")?"fontWeightBtnEnableClick":"fontWeightBtnDisableClick")}});this.element.find(".italicButton").click(function(K){var J;if($(K.target).hasClass("italicButtonDisable")){J=$(K.target).attr("class","italicButtonEnable font-panel-icon-row");return J.trigger(J.hasClass("italicButtonEnable font-panel-icon-row")?"fontItalicBtnEnableClick":"fontItalicBtnDisableClick")}else{J=$(K.target).attr("class","italicButtonDisable font-panel-icon-row");return J.trigger(J.hasClass(".italicButtonDisable font-panel-icon")?"fontItalicBtnEnableClick":"fontItalicBtnDisableClick")}});this.element.find(".underlineButton").click(function(K){var J;if($(K.target).hasClass("underlineButtonDisable")){J=$(K.target).attr("class","underlineButtonEnable font-panel-icon-row");return J.trigger(J.hasClass("underlineButtonEnable font-panel-icon-row")?"fontUnderlinedBtnEnableClick":"fontUnderlinedBtnDisableClick")}else{J=$(K.target).attr("class","underlineButtonDisable font-panel-icon-row");return J.trigger(J.hasClass(".underlineButtonDisable font-panel-icon-row")?"fontUnderlinedBtnEnableClick":"fontUnderlinedBtnDisableClick")}});this.element.find(".centerAlignBtn").click(function(K){var J;if($(K.target).hasClass("centerAlignButtonDisable")){J=$(K.target).attr("class","centerAlignButtonEnable font-panel-icon-row");I.element.find(".leftAlignBtn").attr("class","leftAlignButtonDisable font-panel-icon-row");I.element.find(".rightAlignBtn").attr("class","rightAlignButtonDisable font-panel-icon-row");return J.trigger(J.hasClass("centerAlignButtonEnable font-panel-icon-row")?"":"")}else{J=$(K.target).attr("class","centerAlignButtonDisable font-panel-icon-row");I.element.find(".leftAlignBtn").attr("class","leftAlignButtonEnable font-panel-icon-row");I.element.find(".rightAlignBtn").attr("class","rightAlignButtonDisable font-panel-icon-row");return J.trigger(J.hasClass("leftAlignButtonDisable font-panel-icon-row")?"":"")}});this.element.find(".rightAlignBtn").click(function(J){return $(J.target).trigger("rightAlignment")});this.element.find(".leftAlignBtn").click(function(J){console.log("leftAlignBtn");return $(J.target).trigger("leftAlignment")});this.element.find(".centerAlignBtn").click(function(J){return $(J.target).trigger("centerAlignment")});this.element.find(".bulletPointBtn").click(function(J){return $(J.target).trigger("bulletPointBtnEnableClick")});this.element.find(".orderedPointBtn").click(function(J){return $(J.target).trigger("orderedPointBtnEnableClick")});this.element.find(".gridElementBtn").click(function(){return $(event.target).trigger("panelClickGridBtnClick")});return this.element.find(".snapBtn").click(function(){if(!$(event.target).hasClass("snapBtn-selected")){return $(event.target).addClass("snapBtn-selected")}else{return $(event.target).removeClass("snapBtn-selected")}})};G.prototype.changeColor=function(I,L,J,K){$(K).css("background-color","#"+L);return $(K).colpickHide()};G.prototype.setSettingsFromStyle=function(I){this.element.find(".fontTypeBtn").children().removeAttr("selected").filter("option[value="+I["font-family"]+"]").attr("selected","selected");this.element.find(".fontSizeBtn").children().removeAttr("selected").filter('option[value="'+parseInt(I["font-size"])+'"]').attr("selected","selected");this._switchBtn(".wbtn",I["font-weight"]==="bold");this._switchBtn(".ubtn",I["text-decoration"].indexOf("underline")!==-1);this._switchBtn(".ibtn",I["font-style"]==="italic");this.element.find(".centerAlignBtn").removeClass("active");this.element.find(".leftAlignBtn").removeClass("active");this.element.find(".rightAlignBtn").removeClass("active");if(I["text-align"]==="left"){return this.element.find(".leftAlignBtn").addClass("active")}else{if(I["text-align"]==="center"){return this.element.find(".centerAlignBtn").addClass("active")}else{if(I["text-align"]==="right"){return this.element.find(".rightAlignBtn").addClass("active")}}}};G.prototype._switchBtn=function(I,J){if(J){return this.element.find(I).addClass("ppedit-btn-enabled active")}else{return this.element.find(I).removeClass("ppedit-btn-enabled active")}};return G})(t);j=(function(G){D(H,G);function H(I){this.root=I;H.__super__.constructor.call(this,this.root)}H.prototype.buildElement=function(){return this.element=$('            <div class="left-sidebar">              <img class="icon-set undoImg" src="./ppedit/img/icons/OFF/glyphicons_221_unshare.png">              <img class="icon-set redoImg" src="./ppedit/img//icons/OFF/glyphicons_222_share.png">              <img class="icon-set gridImg" src="./ppedit/img/icons/OFF/glyphicons_155_show_big_thumbnails.png">              <img class="icon-set snapImg" src="./ppedit/img/icons/OFF/glyphicons_023_magnet.png">          </div>')};H.prototype.bindEvents=function(){var I=this;this.element.find(".snapImg").click(function(){if(!$(event.target).hasClass("snapBtn-selected")){return $(event.target).addClass("snapBtn-selected")}else{return $(event.target).removeClass("snapBtn-selected")}});this.element.find(".snapImg").mouseover(function(J){return $(J.target).attr("src","./ppedit/img/icons/ON/glyphicons_023_magnet.png")});this.element.find(".snapImg").mouseout(function(J){return $(J.target).attr("src","./ppedit/img/icons/OFF/glyphicons_023_magnet.png")});this.element.find(".gridImg").click(function(){return I.root.find(".row").trigger("panelClickGridBtnClick")});this.element.find(".gridImg").mouseover(function(J){return $(J.target).attr("src","./ppedit/img/icons/ON/glyphicons_155_show_big_thumbnails.png")});this.element.find(".gridImg").mouseout(function(J){return $(J.target).attr("src","./ppedit/img/icons/OFF/glyphicons_155_show_big_thumbnails.png")});this.element.find(".undoImg").click(function(){return I.root.trigger("requestUndo")});this.element.find(".undoImg").mouseover(function(J){return $(J.target).attr("src","./ppedit/img/icons/ON/glyphicons_221_unshare.png")});this.element.find(".undoImg").mouseout(function(J){return $(J.target).attr("src","./ppedit/img/icons/OFF/glyphicons_221_unshare.png")});this.element.find(".redoImg").click(function(){return I.root.trigger("requestRedo")});this.element.find(".redoImg").mouseover(function(J){return $(J.target).attr("src","./ppedit/img/icons/ON/glyphicons_222_share.png")});return this.element.find(".redoImg").mouseout(function(J){return $(J.target).attr("src","./ppedit/img/icons/OFF/glyphicons_222_share.png")})};return H})(t);(function(K,M,O){var N,H,P,G,J,L,I;N=void 0;I={"default":"cool!"};J=false;P=null;G=null;H={init:function(Q){N=K(this);K.extend(I,Q||{});G=new l(N);G.buildElement();N.append(G.element);G.bindEvents();return N},doSomething:function(Q){return N},destroy:function(){return N},save:function(){return G.commandManager.getUndoJSON()},allHunks:function(){return G.area.boxesContainer.getAllHunks()},clearHistory:function(){G.commandManager.clearHistory();return N},load:function(Q){G.load(Q.hunks);return N}};L={toggleFlag:function(){return J=!J}};return K.fn.ppedit=function(Q){if(H[Q]){return H[Q].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof Q==="object"||!Q){return H.init.apply(this,arguments)}else{return K.error("Method "+Q+" does not exist on jquery.ppedit")}}}})(jQuery,window,document)}).call(this);