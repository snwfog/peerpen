(function(b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{b(jQuery)}}(function(g){var e={exports:{}};e.exports=h;function h(a){if(a){return f(a)}}function f(a){for(var b in h.prototype){a[b]=h.prototype[b]}return a}h.prototype.on=function(a,b){this._callbacks=this._callbacks||{};(this._callbacks[a]=this._callbacks[a]||[]).push(b);return this};h.prototype.once=function(a,b){var c=this;this._callbacks=this._callbacks||{};function d(){c.off(a,d);b.apply(this,arguments)}b._off=d;this.on(a,d);return this};h.prototype.off=h.prototype.removeListener=h.prototype.removeAllListeners=function(a,c){this._callbacks=this._callbacks||{};var b=this._callbacks[a];if(!b){return this}if(1==arguments.length){delete this._callbacks[a];return this}var d=b.indexOf(c._off||c);if(~d){b.splice(d,1)}return this};h.prototype.emit=function(a){this._callbacks=this._callbacks||{};var d=[].slice.call(arguments,1),b=this._callbacks[a];if(b){b=b.slice(0);for(var c=0,i=b.length;c<i;++c){b[c].apply(this,d)}}return this};h.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks[a]||[]};h.prototype.hasListeners=function(a){return !!this.listeners(a).length};(function(){var d,t,u,r,v,q,a,b,c={}.hasOwnProperty,s=function(i,k){for(var l in k){if(c.call(k,l)){i[l]=k[l]}}function j(){this.constructor=i}j.prototype=k.prototype;i.prototype=new j();i.__super__=k.prototype;return i},p=[].slice;t=typeof h!=="undefined"&&h!==null?h:require("emitter");a=function(){};d=(function(j){var i;s(k,j);k.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached"];k.prototype.defaultOptions={url:null,method:"post",withCredentials:false,parallelUploads:2,uploadMultiple:false,maxFilesize:256,paramName:"file",createImageThumbnails:true,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:true,ignoreHiddenFiles:true,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:true,addRemoveLinks:false,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(l,m){return m()},init:function(){return a},forceFallback:false,fallback:function(){var l,y,o,m,z,n;this.element.className=""+this.element.className+" dz-browser-not-supported";n=this.element.getElementsByTagName("div");for(m=0,z=n.length;m<z;m++){l=n[m];if(/(^| )dz-message($| )/.test(l.className)){y=l;l.className="dz-message";continue}}if(!y){y=k.createElement('<div class="dz-message"><span></span></div>');this.element.appendChild(y)}o=y.getElementsByTagName("span")[0];if(o){o.textContent=this.options.dictFallbackMessage}return this.element.appendChild(this.getFallbackForm())},resize:function(n){var l,m,o;l={srcX:0,srcY:0,srcWidth:n.width,srcHeight:n.height};m=n.width/n.height;o=this.options.thumbnailWidth/this.options.thumbnailHeight;if(n.height<this.options.thumbnailHeight||n.width<this.options.thumbnailWidth){l.trgHeight=l.srcHeight;l.trgWidth=l.srcWidth}else{if(m>o){l.srcHeight=n.height;l.srcWidth=l.srcHeight*o}else{l.srcWidth=n.width;l.srcHeight=l.srcWidth/o}}l.srcX=(n.width-l.srcWidth)/2;l.srcY=(n.height-l.srcHeight)/2;return l},drop:function(l){return this.element.classList.remove("dz-drag-hover")},dragstart:a,dragend:function(l){return this.element.classList.remove("dz-drag-hover")},dragenter:function(l){return this.element.classList.add("dz-drag-hover")},dragover:function(l){return this.element.classList.add("dz-drag-hover")},dragleave:function(l){return this.element.classList.remove("dz-drag-hover")},paste:a,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(L){var N,R,P,n,o,J,M,O,Q,m,H,K,I,l=this;if(this.element===this.previewsContainer){this.element.classList.add("dz-started")}L.previewElement=k.createElement(this.options.previewTemplate.trim());L.previewTemplate=L.previewElement;this.previewsContainer.appendChild(L.previewElement);m=L.previewElement.querySelectorAll("[data-dz-name]");for(n=0,M=m.length;n<M;n++){N=m[n];N.textContent=L.name}H=L.previewElement.querySelectorAll("[data-dz-size]");for(o=0,O=H.length;o<O;o++){N=H[o];N.innerHTML=this.filesize(L.size)}if(this.options.addRemoveLinks){L._removeLink=k.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>");L.previewElement.appendChild(L._removeLink)}R=function(w){w.preventDefault();w.stopPropagation();if(L.status===k.UPLOADING){return k.confirm(l.options.dictCancelUploadConfirmation,function(){return l.removeFile(L)})}else{if(l.options.dictRemoveFileConfirmation){return k.confirm(l.options.dictRemoveFileConfirmation,function(){return l.removeFile(L)})}else{return l.removeFile(L)}}};K=L.previewElement.querySelectorAll("[data-dz-remove]");I=[];for(J=0,Q=K.length;J<Q;J++){P=K[J];I.push(P.addEventListener("click",R))}return I},removedfile:function(m){var l;if((l=m.previewElement)!=null){l.parentNode.removeChild(m.previewElement)}return this._updateMaxFilesReachedClass()},thumbnail:function(n,B){var o,l,z,m,A;n.previewElement.classList.remove("dz-file-preview");n.previewElement.classList.add("dz-image-preview");m=n.previewElement.querySelectorAll("[data-dz-thumbnail]");A=[];for(l=0,z=m.length;l<z;l++){o=m[l];o.alt=n.name;A.push(o.src=B)}return A},error:function(o,m){var n,B,z,l,A;o.previewElement.classList.add("dz-error");if(typeof m!=="String"&&m.error){m=m.error}l=o.previewElement.querySelectorAll("[data-dz-errormessage]");A=[];for(B=0,z=l.length;B<z;B++){n=l[B];A.push(n.textContent=m)}return A},errormultiple:a,processing:function(l){l.previewElement.classList.add("dz-processing");if(l._removeLink){return l._removeLink.textContent=this.options.dictCancelUpload}},processingmultiple:a,uploadprogress:function(m,o,n){var l,C,A,D,B;D=m.previewElement.querySelectorAll("[data-dz-uploadprogress]");B=[];for(C=0,A=D.length;C<A;C++){l=D[C];B.push(l.style.width=""+o+"%")}return B},totaluploadprogress:a,sending:a,sendingmultiple:a,success:function(l){return l.previewElement.classList.add("dz-success")},successmultiple:a,canceled:function(l){return this.emit("error",l,"Upload canceled.")},canceledmultiple:a,complete:function(l){if(l._removeLink){return l._removeLink.textContent=this.options.dictRemoveFile}},completemultiple:a,maxfilesexceeded:a,maxfilesreached:a,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>✔</span></div>\n  <div class="dz-error-mark"><span>✘</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'};i=function(){var o,z,m,l,B,n,A;l=arguments[0],m=2<=arguments.length?p.call(arguments,1):[];for(n=0,A=m.length;n<A;n++){z=m[n];for(o in z){B=z[o];l[o]=B}}return l};function k(n,o){var x,l,m;this.element=n;this.version=k.version;this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,"");this.clickableElements=[];this.listeners=[];this.files=[];if(typeof this.element==="string"){this.element=document.querySelector(this.element)}if(!(this.element&&(this.element.nodeType!=null))){throw new Error("Invalid dropzone element.")}if(this.element.dropzone){throw new Error("Dropzone already attached.")}k.instances.push(this);this.element.dropzone=this;x=(m=k.optionsForElement(this.element))!=null?m:{};this.options=i({},this.defaultOptions,x,o!=null?o:{});if(this.options.forceFallback||!k.isBrowserSupported()){return this.options.fallback.call(this)}if(this.options.url==null){this.options.url=this.element.getAttribute("action")}if(!this.options.url){throw new Error("No URL provided.")}if(this.options.acceptedFiles&&this.options.acceptedMimeTypes){throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.")}if(this.options.acceptedMimeTypes){this.options.acceptedFiles=this.options.acceptedMimeTypes;delete this.options.acceptedMimeTypes}this.options.method=this.options.method.toUpperCase();if((l=this.getExistingFallback())&&l.parentNode){l.parentNode.removeChild(l)}if(this.options.previewsContainer){this.previewsContainer=k.getElement(this.options.previewsContainer,"previewsContainer")}else{this.previewsContainer=this.element}if(this.options.clickable){if(this.options.clickable===true){this.clickableElements=[this.element]}else{this.clickableElements=k.getElements(this.options.clickable,"clickable")}}this.init()}k.prototype.getAcceptedFiles=function(){var n,l,o,m,x;m=this.files;x=[];for(l=0,o=m.length;l<o;l++){n=m[l];if(n.accepted){x.push(n)}}return x};k.prototype.getRejectedFiles=function(){var n,l,o,m,x;m=this.files;x=[];for(l=0,o=m.length;l<o;l++){n=m[l];if(!n.accepted){x.push(n)}}return x};k.prototype.getQueuedFiles=function(){var n,l,o,m,x;m=this.files;x=[];for(l=0,o=m.length;l<o;l++){n=m[l];if(n.status===k.QUEUED){x.push(n)}}return x};k.prototype.getUploadingFiles=function(){var n,l,o,m,x;m=this.files;x=[];for(l=0,o=m.length;l<o;l++){n=m[l];if(n.status===k.UPLOADING){x.push(n)}}return x};k.prototype.init=function(){var o,D,l,m,A,n,B,C=this;if(this.element.tagName==="form"){this.element.setAttribute("enctype","multipart/form-data")}if(this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")){this.element.appendChild(k.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>"))}if(this.clickableElements.length){l=function(){if(C.hiddenFileInput){document.body.removeChild(C.hiddenFileInput)}C.hiddenFileInput=document.createElement("input");C.hiddenFileInput.setAttribute("type","file");if((C.options.maxFiles==null)||C.options.maxFiles>1){C.hiddenFileInput.setAttribute("multiple","multiple")}if(C.options.acceptedFiles!=null){C.hiddenFileInput.setAttribute("accept",C.options.acceptedFiles)}C.hiddenFileInput.style.visibility="hidden";C.hiddenFileInput.style.position="absolute";C.hiddenFileInput.style.top="0";C.hiddenFileInput.style.left="0";C.hiddenFileInput.style.height="0";C.hiddenFileInput.style.width="0";document.body.appendChild(C.hiddenFileInput);return C.hiddenFileInput.addEventListener("change",function(){var z,y,x,w;y=C.hiddenFileInput.files;if(y.length){for(x=0,w=y.length;x<w;x++){z=y[x];C.addFile(z)}}return l()})};l()}this.URL=(n=window.URL)!=null?n:window.webkitURL;B=this.events;for(m=0,A=B.length;m<A;m++){o=B[m];this.on(o,this.options[o])}this.on("uploadprogress",function(){return C.updateTotalUploadProgress()});this.on("removedfile",function(){return C.updateTotalUploadProgress()});this.on("canceled",function(w){return C.emit("complete",w)});this.on("complete",function(w){if(C.getUploadingFiles().length===0&&C.getQueuedFiles().length===0){return setTimeout((function(){return C.emit("queuecomplete")}),0)}});D=function(w){w.stopPropagation();if(w.preventDefault){return w.preventDefault()}else{return w.returnValue=false}};this.listeners=[{element:this.element,events:{dragstart:function(w){return C.emit("dragstart",w)},dragenter:function(w){D(w);return C.emit("dragenter",w)},dragover:function(y){var w;try{w=y.dataTransfer.effectAllowed}catch(x){}y.dataTransfer.dropEffect="move"===w||"linkMove"===w?"move":"copy";D(y);return C.emit("dragover",y)},dragleave:function(w){return C.emit("dragleave",w)},drop:function(w){D(w);return C.drop(w)},dragend:function(w){return C.emit("dragend",w)}}}];this.clickableElements.forEach(function(w){return C.listeners.push({element:w,events:{click:function(x){if((w!==C.element)||(x.target===C.element||k.elementInside(x.target,C.element.querySelector(".dz-message")))){return C.hiddenFileInput.click()}}}})});this.enable();return this.options.init.call(this)};k.prototype.destroy=function(){var l;this.disable();this.removeAllFiles(true);if((l=this.hiddenFileInput)!=null?l.parentNode:void 0){this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);this.hiddenFileInput=null}delete this.element.dropzone;return k.instances.splice(k.instances.indexOf(this),1)};k.prototype.updateTotalUploadProgress=function(){var A,n,C,B,D,l,o,m;B=0;C=0;A=this.getAcceptedFiles();if(A.length){m=this.getAcceptedFiles();for(l=0,o=m.length;l<o;l++){n=m[l];B+=n.upload.bytesSent;C+=n.upload.total}D=100*B/C}else{D=100}return this.emit("totaluploadprogress",D,C,B)};k.prototype.getFallbackForm=function(){var n,o,l,m;if(n=this.getExistingFallback()){return n}l='<div class="dz-fallback">';if(this.options.dictFallbackText){l+="<p>"+this.options.dictFallbackText+"</p>"}l+='<input type="file" name="'+this.options.paramName+(this.options.uploadMultiple?"[]":"")+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';o=k.createElement(l);if(this.element.tagName!=="FORM"){m=k.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>');m.appendChild(o)}else{this.element.setAttribute("enctype","multipart/form-data");this.element.setAttribute("method",this.options.method)}return m!=null?m:o};k.prototype.getExistingFallback=function(){var l,o,y,m,z,n;o=function(D){var x,w,C;for(w=0,C=D.length;w<C;w++){x=D[w];if(/(^| )fallback($| )/.test(x.className)){return x}}};n=["div","form"];for(m=0,z=n.length;m<z;m++){y=n[m];if(l=o(this.element.getElementsByTagName(y))){return l}}};k.prototype.setupEventListeners=function(){var n,o,B,l,z,m,A;m=this.listeners;A=[];for(l=0,z=m.length;l<z;l++){n=m[l];A.push((function(){var x,w;x=n.events;w=[];for(o in x){B=x[o];w.push(n.element.addEventListener(o,B,false))}return w})())}return A};k.prototype.removeEventListeners=function(){var n,o,B,l,z,m,A;m=this.listeners;A=[];for(l=0,z=m.length;l<z;l++){n=m[l];A.push((function(){var x,w;x=n.events;w=[];for(o in x){B=x[o];w.push(n.element.removeEventListener(o,B,false))}return w})())}return A};k.prototype.disable=function(){var n,l,o,m,x;this.clickableElements.forEach(function(w){return w.classList.remove("dz-clickable")});this.removeEventListeners();m=this.files;x=[];for(l=0,o=m.length;l<o;l++){n=m[l];x.push(this.cancelUpload(n))}return x};k.prototype.enable=function(){this.clickableElements.forEach(function(l){return l.classList.add("dz-clickable")});return this.setupEventListeners()};k.prototype.filesize=function(l){var m;if(l>=1024*1024*1024*1024/10){l=l/(1024*1024*1024*1024/10);m="TiB"}else{if(l>=1024*1024*1024/10){l=l/(1024*1024*1024/10);m="GiB"}else{if(l>=1024*1024/10){l=l/(1024*1024/10);m="MiB"}else{if(l>=1024/10){l=l/(1024/10);m="KiB"}else{l=l*10;m="b"}}}}return"<strong>"+(Math.round(l)/10)+"</strong> "+m};k.prototype._updateMaxFilesReachedClass=function(){if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){if(this.getAcceptedFiles().length===this.options.maxFiles){this.emit("maxfilesreached",this.files)}return this.element.classList.add("dz-max-files-reached")}else{return this.element.classList.remove("dz-max-files-reached")}};k.prototype.drop=function(l){var m,n;if(!l.dataTransfer){return}this.emit("drop",l);m=l.dataTransfer.files;if(m.length){n=l.dataTransfer.items;if(n&&n.length&&(n[0].webkitGetAsEntry!=null)){this._addFilesFromItems(n)}else{this.handleFiles(m)}}};k.prototype.paste=function(l){var n,m;if((l!=null?(m=l.clipboardData)!=null?m.items:void 0:void 0)==null){return}this.emit("paste",l);n=l.clipboardData.items;if(n.length){return this._addFilesFromItems(n)}};k.prototype.handleFiles=function(m){var n,l,o,x;x=[];for(l=0,o=m.length;l<o;l++){n=m[l];x.push(this.addFile(n))}return x};k.prototype._addFilesFromItems=function(o){var m,n,l,y,z;z=[];for(l=0,y=o.length;l<y;l++){n=o[l];if((n.webkitGetAsEntry!=null)&&(m=n.webkitGetAsEntry())){if(m.isFile){z.push(this.addFile(n.getAsFile()))}else{if(m.isDirectory){z.push(this._addFilesFromDirectory(m,m.name))}else{z.push(void 0)}}}else{if(n.getAsFile!=null){if((n.kind==null)||n.kind==="file"){z.push(this.addFile(n.getAsFile()))}else{z.push(void 0)}}else{z.push(void 0)}}}return z};k.prototype._addFilesFromDirectory=function(x,n){var o,l,m=this;o=x.createReader();l=function(B){var C,w,D;for(w=0,D=B.length;w<D;w++){C=B[w];if(C.isFile){C.file(function(y){if(m.options.ignoreHiddenFiles&&y.name.substring(0,1)==="."){return}y.fullPath=""+n+"/"+y.name;return m.addFile(y)})}else{if(C.isDirectory){m._addFilesFromDirectory(C,""+n+"/"+C.name)}}}};return o.readEntries(l,function(w){return typeof console!=="undefined"&&console!==null?typeof console.log==="function"?console.log(w):void 0:void 0})};k.prototype.accept=function(l,m){if(l.size>this.options.maxFilesize*1024*1024){return m(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(l.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize))}else{if(!k.isValidFile(l,this.options.acceptedFiles)){return m(this.options.dictInvalidFileType)}else{if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){m(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles));return this.emit("maxfilesexceeded",l)}else{return this.options.accept.call(this,l,m)}}}};k.prototype.addFile=function(m){var l=this;m.upload={progress:0,total:m.size,bytesSent:0};this.files.push(m);m.status=k.ADDED;this.emit("addedfile",m);this._enqueueThumbnail(m);return this.accept(m,function(n){if(n){m.accepted=false;l._errorProcessing([m],n)}else{l.enqueueFile(m)}return l._updateMaxFilesReachedClass()})};k.prototype.enqueueFiles=function(m){var n,l,o;for(l=0,o=m.length;l<o;l++){n=m[l];this.enqueueFile(n)}return null};k.prototype.enqueueFile=function(m){var l=this;m.accepted=true;if(m.status===k.ADDED){m.status=k.QUEUED;if(this.options.autoProcessQueue){return setTimeout((function(){return l.processQueue()}),0)}}else{throw new Error("This file can't be queued because it has already been processed or was rejected.")}};k.prototype._thumbnailQueue=[];k.prototype._processingThumbnail=false;k.prototype._enqueueThumbnail=function(m){var l=this;if(this.options.createImageThumbnails&&m.type.match(/image.*/)&&m.size<=this.options.maxThumbnailFilesize*1024*1024){this._thumbnailQueue.push(m);return setTimeout((function(){return l._processThumbnailQueue()}),0)}};k.prototype._processThumbnailQueue=function(){var l=this;if(this._processingThumbnail||this._thumbnailQueue.length===0){return}this._processingThumbnail=true;return this.createThumbnail(this._thumbnailQueue.shift(),function(){l._processingThumbnail=false;return l._processThumbnailQueue()})};k.prototype.removeFile=function(l){if(l.status===k.UPLOADING){this.cancelUpload(l)}this.files=b(this.files,l);this.emit("removedfile",l);if(this.files.length===0){return this.emit("reset")}};k.prototype.removeAllFiles=function(l){var o,m,x,n;if(l==null){l=false}n=this.files.slice();for(m=0,x=n.length;m<x;m++){o=n[m];if(o.status!==k.UPLOADING||l){this.removeFile(o)}}return null};k.prototype.createThumbnail=function(n,l){var o,m=this;o=new FileReader;o.onload=function(){var x;x=document.createElement("img");x.onload=function(){var J,L,I,G,F,w,H,K;n.width=x.width;n.height=x.height;I=m.options.resize.call(m,n);if(I.trgWidth==null){I.trgWidth=m.options.thumbnailWidth}if(I.trgHeight==null){I.trgHeight=m.options.thumbnailHeight}J=document.createElement("canvas");L=J.getContext("2d");J.width=I.trgWidth;J.height=I.trgHeight;q(L,x,(F=I.srcX)!=null?F:0,(w=I.srcY)!=null?w:0,I.srcWidth,I.srcHeight,(H=I.trgX)!=null?H:0,(K=I.trgY)!=null?K:0,I.trgWidth,I.trgHeight);G=J.toDataURL("image/png");m.emit("thumbnail",n,G);if(l!=null){return l()}};return x.src=o.result};return o.readAsDataURL(n)};k.prototype.processQueue=function(){var n,l,o,m;l=this.options.parallelUploads;o=this.getUploadingFiles().length;n=o;if(o>=l){return}m=this.getQueuedFiles();if(!(m.length>0)){return}if(this.options.uploadMultiple){return this.processFiles(m.slice(0,l-o))}else{while(n<l){if(!m.length){return}this.processFile(m.shift());n++}}};k.prototype.processFile=function(l){return this.processFiles([l])};k.prototype.processFiles=function(m){var n,l,o;for(l=0,o=m.length;l<o;l++){n=m[l];n.processing=true;n.status=k.UPLOADING;this.emit("processing",n)}if(this.options.uploadMultiple){this.emit("processingmultiple",m)}return this.uploadFiles(m)};k.prototype._getFilesWithXhr=function(l){var n,m;return m=(function(){var B,z,o,A;o=this.files;A=[];for(B=0,z=o.length;B<z;B++){n=o[B];if(n.xhr===l){A.push(n)}}return A}).call(this)};k.prototype.cancelUpload=function(m){var o,n,C,l,A,B,D;if(m.status===k.UPLOADING){n=this._getFilesWithXhr(m.xhr);for(C=0,A=n.length;C<A;C++){o=n[C];o.status=k.CANCELED}m.xhr.abort();for(l=0,B=n.length;l<B;l++){o=n[l];this.emit("canceled",o)}if(this.options.uploadMultiple){this.emit("canceledmultiple",n)}}else{if((D=m.status)===k.ADDED||D===k.QUEUED){m.status=k.CANCELED;this.emit("canceled",m);if(this.options.uploadMultiple){this.emit("canceledmultiple",[m])}}}if(this.options.autoProcessQueue){return this.processQueue()}};k.prototype.uploadFile=function(l){return this.uploadFiles([l])};k.prototype.uploadFiles=function(az){var ab,ac,ao,ag,au,aC,ai,aq,af,l,ah,ax,av,am,ae,at,ak,an,ar,aw,o,m,n,Z,aa,ay,aj,aA,aB,al,ap,ad=this;at=new XMLHttpRequest();for(ak=0,o=az.length;ak<o;ak++){ab=az[ak];ab.xhr=at}at.open(this.options.method,this.options.url,true);at.withCredentials=!!this.options.withCredentials;av=null;ao=function(){var w,y,x;x=[];for(w=0,y=az.length;w<y;w++){ab=az[w];x.push(ad._errorProcessing(az,av||ad.options.dictResponseError.replace("{{statusCode}}",at.status),at))}return x};am=function(y){var D,w,z,B,C,E,F,x,A;if(y!=null){w=100*y.loaded/y.total;for(z=0,E=az.length;z<E;z++){ab=az[z];ab.upload={progress:w,total:y.total,bytesSent:y.loaded}}}else{D=true;w=100;for(B=0,F=az.length;B<F;B++){ab=az[B];if(!(ab.upload.progress===100&&ab.upload.bytesSent===ab.upload.total)){D=false}ab.upload.progress=w;ab.upload.bytesSent=ab.upload.total}if(D){return}}A=[];for(C=0,x=az.length;C<x;C++){ab=az[C];A.push(ad.emit("uploadprogress",ab,w,ab.upload.bytesSent))}return A};at.onload=function(y){var x;if(az[0].status===k.CANCELED){return}if(at.readyState!==4){return}av=at.responseText;if(at.getResponseHeader("content-type")&&~at.getResponseHeader("content-type").indexOf("application/json")){try{av=JSON.parse(av)}catch(w){y=w;av="Invalid JSON response from server."}}am();if(!((200<=(x=at.status)&&x<300))){return ao()}else{return ad._finished(az,av,y)}};at.onerror=function(){if(az[0].status===k.CANCELED){return}return ao()};ax=(aj=at.upload)!=null?aj:at;ax.onprogress=am;aC={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};if(this.options.headers){i(aC,this.options.headers)}for(ag in aC){au=aC[ag];at.setRequestHeader(ag,au)}ac=new FormData();if(this.options.params){aA=this.options.params;for(l in aA){ae=aA[l];ac.append(l,ae)}}for(an=0,m=az.length;an<m;an++){ab=az[an];this.emit("sending",ab,at,ac)}if(this.options.uploadMultiple){this.emit("sendingmultiple",az,at,ac)}if(this.element.tagName==="FORM"){aB=this.element.querySelectorAll("input, textarea, select, button");for(ar=0,n=aB.length;ar<n;ar++){ai=aB[ar];aq=ai.getAttribute("name");af=ai.getAttribute("type");if(ai.tagName==="SELECT"&&ai.hasAttribute("multiple")){al=ai.options;for(aw=0,Z=al.length;aw<Z;aw++){ah=al[aw];if(ah.selected){ac.append(aq,ah.value)}}}else{if(!af||((ap=af.toLowerCase())!=="checkbox"&&ap!=="radio")||ai.checked){ac.append(aq,ai.value)}}}}for(ay=0,aa=az.length;ay<aa;ay++){ab=az[ay];ac.append(""+this.options.paramName+(this.options.uploadMultiple?"[]":""),ab,ab.name)}return at.send(ac)};k.prototype._finished=function(o,m,l){var y,n,z;for(n=0,z=o.length;n<z;n++){y=o[n];y.status=k.SUCCESS;this.emit("success",y,m,l);this.emit("complete",y)}if(this.options.uploadMultiple){this.emit("successmultiple",o,m,l);this.emit("completemultiple",o)}if(this.options.autoProcessQueue){return this.processQueue()}};k.prototype._errorProcessing=function(n,o,l){var y,m,z;for(m=0,z=n.length;m<z;m++){y=n[m];y.status=k.ERROR;this.emit("error",y,o,l);this.emit("complete",y)}if(this.options.uploadMultiple){this.emit("errormultiple",n,o,l);this.emit("completemultiple",n)}if(this.options.autoProcessQueue){return this.processQueue()}};return k})(t);d.version="4.0.0-dev";d.options={};d.optionsForElement=function(i){if(i.getAttribute("id")){return d.options[u(i.getAttribute("id"))]}else{return void 0}};d.instances=[];d.forElement=function(i){if(typeof i==="string"){i=document.querySelector(i)}if((i!=null?i.dropzone:void 0)==null){throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.")}return i.dropzone};d.autoDiscover=true;d.discover=function(){var i,l,k,j,m,n;if(document.querySelectorAll){k=document.querySelectorAll(".dropzone")}else{k=[];i=function(C){var o,D,A,B;B=[];for(D=0,A=C.length;D<A;D++){o=C[D];if(/(^| )dropzone($| )/.test(o.className)){B.push(k.push(o))}else{B.push(void 0)}}return B};i(document.getElementsByTagName("div"));i(document.getElementsByTagName("form"))}n=[];for(j=0,m=k.length;j<m;j++){l=k[j];if(d.optionsForElement(l)!==false){n.push(new d(l))}else{n.push(void 0)}}return n};d.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];d.isBrowserSupported=function(){var l,k,i,m,j;l=true;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if(!("classList" in document.createElement("a"))){l=false}else{j=d.blacklistedBrowsers;for(i=0,m=j.length;i<m;i++){k=j[i];if(k.test(navigator.userAgent)){l=false;continue}}}}else{l=false}return l};b=function(i,l){var k,j,m,n;n=[];for(j=0,m=i.length;j<m;j++){k=i[j];if(k!==l){n.push(k)}}return n};u=function(i){return i.replace(/[\-_](\w)/g,function(j){return j[1].toUpperCase()})};d.createElement=function(j){var i;i=document.createElement("div");i.innerHTML=j;return i.childNodes[0]};d.elementInside=function(i,j){if(i===j){return true}while(i=i.parentNode){if(i===j){return true}}return false};d.getElement=function(i,k){var j;if(typeof i==="string"){j=document.querySelector(i)}else{if(i.nodeType!=null){j=i}}if(j==null){throw new Error("Invalid `"+k+"` option provided. Please provide a CSS selector or a plain HTML element.")}return j};d.getElements=function(A,j){var n,D,k,B,C,m,i,o;if(A instanceof Array){k=[];try{for(B=0,m=A.length;B<m;B++){D=A[B];k.push(this.getElement(D,j))}}catch(l){n=l;k=null}}else{if(typeof A==="string"){k=[];o=document.querySelectorAll(A);for(C=0,i=o.length;C<i;C++){D=o[C];k.push(D)}}else{if(A.nodeType!=null){k=[A]}}}if(!((k!=null)&&k.length)){throw new Error("Invalid `"+j+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.")}return k};d.confirm=function(k,i,j){if(window.confirm(k)){return i()}else{if(j!=null){return j()}}};d.isValidFile=function(l,o){var m,i,k,j,n;if(!o){return true}o=o.split(",");i=l.type;m=i.replace(/\/.*$/,"");for(j=0,n=o.length;j<n;j++){k=o[j];k=k.trim();if(k.charAt(0)==="."){if(l.name.toLowerCase().indexOf(k.toLowerCase(),l.name.length-k.length)!==-1){return true}}else{if(/\/\*$/.test(k)){if(m===k.replace(/\/.*$/,"")){return true}}else{if(i===k){return true}}}}return false};if(typeof g!=="undefined"&&g!==null){g.fn.dropzone=function(i){return this.each(function(){return new d(this,i)})}}if(typeof e!=="undefined"&&e!==null){e.exports=d}else{window.Dropzone=d}d.ADDED="added";d.QUEUED="queued";d.ACCEPTED=d.QUEUED;d.UPLOADING="uploading";d.PROCESSING=d.UPLOADING;d.CANCELED="canceled";d.ERROR="error";d.SUCCESS="success";v=function(C){var i,k,l,D,B,m,j,n,A,o;j=C.naturalWidth;m=C.naturalHeight;k=document.createElement("canvas");k.width=1;k.height=m;l=k.getContext("2d");l.drawImage(C,0,0);D=l.getImageData(0,0,1,m).data;o=0;B=m;n=m;while(n>o){i=D[(n-1)*4+3];if(i===0){B=n}else{o=n}n=(B+o)>>1}A=n/m;if(A===0){return 1}else{return A}};q=function(n,j,A,B,o,i,l,m,k,C){var D;D=v(j);return n.drawImage(j,A,B,o,i,l,m,k,C/D)};r=function(i,C){var l,B,j,m,F,k,n,D,E;j=false;E=true;B=i.document;D=B.documentElement;l=(B.addEventListener?"addEventListener":"attachEvent");n=(B.addEventListener?"removeEventListener":"detachEvent");k=(B.addEventListener?"":"on");m=function(w){if(w.type==="readystatechange"&&B.readyState!=="complete"){return}(w.type==="load"?i:B)[n](k+w.type,m,false);if(!j&&(j=true)){return C.call(i,w.type||w)}};F=function(){var x;try{D.doScroll("left")}catch(w){x=w;setTimeout(F,50);return}return m("poll")};if(B.readyState!=="complete"){if(B.createEventObject&&D.doScroll){try{E=!i.frameElement}catch(o){}if(E){F()}}B[l](k+"DOMContentLoaded",m,false);B[l](k+"readystatechange",m,false);return i[l](k+"load",m,false)}};d._autoDiscoverFunction=function(){if(d.autoDiscover){return d.discover()}};r(window,d._autoDiscoverFunction)}).call(this);return e.exports}));