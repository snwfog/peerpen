(function(){function b(j,l,i){var a=b.resolve(j);if(null==a){i=i||j;l=l||"root";var k=new Error('Failed to require "'+i+'" from "'+l+'"');k.path=i;k.parent=l;k.require=true;throw k}var m=b.modules[a];if(!m._resolving&&!m.exports){var n={};n.exports={};n.client=n.component=true;m._resolving=true;m.call(this,n.exports,b.relative(a),n);delete m._resolving;m.exports=n.exports}return m.exports}b.modules={};b.aliases={};b.resolve=function(f){if(f.charAt(0)==="/"){f=f.slice(1)}var e=[f,f+".js",f+".json",f+"/index.js",f+"/index.json"];for(var a=0;a<e.length;a++){var f=e[a];if(b.modules.hasOwnProperty(f)){return f}if(b.aliases.hasOwnProperty(f)){return b.aliases[f]}}};b.normalize=function(f,g){var a=[];if("."!=g.charAt(0)){return g}f=f.split("/");g=g.split("/");for(var h=0;h<g.length;++h){if(".."==g[h]){f.pop()}else{if("."!=g[h]&&""!=g[h]){a.push(g[h])}}}return f.concat(a).join("/")};b.register=function(d,a){b.modules[d]=a};b.alias=function(d,a){if(!b.modules.hasOwnProperty(d)){throw new Error('Failed to alias "'+d+'", it does not exist')}b.aliases[a]=d};b.relative=function(h){var f=b.normalize(h,"..");function a(e,c){var d=e.length;while(d--){if(e[d]===c){return d}}return -1}function g(c){var d=g.resolve(c);return b(d,h,c)}g.resolve=function(d){var c=d.charAt(0);if("/"==c){return d.slice(1)}if("."==c){return b.normalize(f,d)}var i=h.split("/");var e=a(i,"deps")+1;if(!e){e=0}d=i.slice(0,e+1).join("/")+"/deps/"+d;return d};g.exists=function(c){return b.modules.hasOwnProperty(g.resolve(c))};return g};b.register("component-emitter/index.js",function(j,i,h){h.exports=g;function g(c){if(c){return a(c)}}function a(c){for(var d in g.prototype){c[d]=g.prototype[d]}return c}g.prototype.on=function(c,d){this._callbacks=this._callbacks||{};(this._callbacks[c]=this._callbacks[c]||[]).push(d);return this};g.prototype.once=function(c,d){var e=this;this._callbacks=this._callbacks||{};function f(){e.off(c,f);d.apply(this,arguments)}d._off=f;this.on(c,f);return this};g.prototype.off=g.prototype.removeListener=g.prototype.removeAllListeners=function(c,e){this._callbacks=this._callbacks||{};var d=this._callbacks[c];if(!d){return this}if(1==arguments.length){delete this._callbacks[c];return this}var f=d.indexOf(e._off||e);if(~f){d.splice(f,1)}return this};g.prototype.emit=function(c){this._callbacks=this._callbacks||{};var f=[].slice.call(arguments,1),d=this._callbacks[c];if(d){d=d.slice(0);for(var e=0,m=d.length;e<m;++e){d[e].apply(this,f)}}return this};g.prototype.listeners=function(c){this._callbacks=this._callbacks||{};return this._callbacks[c]||[]};g.prototype.hasListeners=function(c){return !!this.listeners(c).length}});b.register("dropzone/index.js",function(a,f,e){e.exports=f("./lib/dropzone.js")});b.register("dropzone/lib/dropzone.js",function(a,f,e){(function(){var q,v,w,t,x,s,c,d,p={}.hasOwnProperty,u=function(g,i){for(var j in i){if(p.call(i,j)){g[j]=i[j]}}function h(){this.constructor=g}h.prototype=i.prototype;g.prototype=new h();g.__super__=i.prototype;return g},r=[].slice;v=typeof Emitter!=="undefined"&&Emitter!==null?Emitter:f("emitter");c=function(){};q=(function(h){var g;u(i,h);i.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached"];i.prototype.defaultOptions={url:null,method:"post",withCredentials:false,parallelUploads:2,uploadMultiple:false,maxFilesize:256,paramName:"file",createImageThumbnails:true,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:true,ignoreHiddenFiles:true,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:true,addRemoveLinks:false,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(j,k){return k()},init:function(){return c},forceFallback:false,fallback:function(){var j,n,m,k,o,l;this.element.className=""+this.element.className+" dz-browser-not-supported";l=this.element.getElementsByTagName("div");for(k=0,o=l.length;k<o;k++){j=l[k];if(/(^| )dz-message($| )/.test(j.className)){n=j;j.className="dz-message";continue}}if(!n){n=i.createElement('<div class="dz-message"><span></span></div>');this.element.appendChild(n)}m=n.getElementsByTagName("span")[0];if(m){m.textContent=this.options.dictFallbackMessage}return this.element.appendChild(this.getFallbackForm())},resize:function(l){var j,k,m;j={srcX:0,srcY:0,srcWidth:l.width,srcHeight:l.height};k=l.width/l.height;m=this.options.thumbnailWidth/this.options.thumbnailHeight;if(l.height<this.options.thumbnailHeight||l.width<this.options.thumbnailWidth){j.trgHeight=j.srcHeight;j.trgWidth=j.srcWidth}else{if(k>m){j.srcHeight=l.height;j.srcWidth=j.srcHeight*m}else{j.srcWidth=l.width;j.srcHeight=j.srcWidth/m}}j.srcX=(l.width-j.srcWidth)/2;j.srcY=(l.height-j.srcHeight)/2;return j},drop:function(j){return this.element.classList.remove("dz-drag-hover")},dragstart:c,dragend:function(j){return this.element.classList.remove("dz-drag-hover")},dragenter:function(j){return this.element.classList.add("dz-drag-hover")},dragover:function(j){return this.element.classList.add("dz-drag-hover")},dragleave:function(j){return this.element.classList.remove("dz-drag-hover")},paste:c,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(J){var L,P,N,l,m,H,K,M,O,k,n,I,o,j=this;if(this.element===this.previewsContainer){this.element.classList.add("dz-started")}J.previewElement=i.createElement(this.options.previewTemplate.trim());J.previewTemplate=J.previewElement;this.previewsContainer.appendChild(J.previewElement);k=J.previewElement.querySelectorAll("[data-dz-name]");for(l=0,K=k.length;l<K;l++){L=k[l];L.textContent=J.name}n=J.previewElement.querySelectorAll("[data-dz-size]");for(m=0,M=n.length;m<M;m++){L=n[m];L.innerHTML=this.filesize(J.size)}if(this.options.addRemoveLinks){J._removeLink=i.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>");J.previewElement.appendChild(J._removeLink)}P=function(y){y.preventDefault();y.stopPropagation();if(J.status===i.UPLOADING){return i.confirm(j.options.dictCancelUploadConfirmation,function(){return j.removeFile(J)})}else{if(j.options.dictRemoveFileConfirmation){return i.confirm(j.options.dictRemoveFileConfirmation,function(){return j.removeFile(J)})}else{return j.removeFile(J)}}};I=J.previewElement.querySelectorAll("[data-dz-remove]");o=[];for(H=0,O=I.length;H<O;H++){N=I[H];o.push(N.addEventListener("click",P))}return o},removedfile:function(k){var j;if((j=k.previewElement)!=null){j.parentNode.removeChild(k.previewElement)}return this._updateMaxFilesReachedClass()},thumbnail:function(l,z){var m,j,n,k,o;l.previewElement.classList.remove("dz-file-preview");l.previewElement.classList.add("dz-image-preview");k=l.previewElement.querySelectorAll("[data-dz-thumbnail]");o=[];for(j=0,n=k.length;j<n;j++){m=k[j];m.alt=l.name;o.push(m.src=z)}return o},error:function(m,k){var l,z,n,j,o;m.previewElement.classList.add("dz-error");if(typeof k!=="String"&&k.error){k=k.error}j=m.previewElement.querySelectorAll("[data-dz-errormessage]");o=[];for(z=0,n=j.length;z<n;z++){l=j[z];o.push(l.textContent=k)}return o},errormultiple:c,processing:function(j){j.previewElement.classList.add("dz-processing");if(j._removeLink){return j._removeLink.textContent=this.options.dictCancelUpload}},processingmultiple:c,uploadprogress:function(k,m,l){var j,A,n,B,o;B=k.previewElement.querySelectorAll("[data-dz-uploadprogress]");o=[];for(A=0,n=B.length;A<n;A++){j=B[A];o.push(j.style.width=""+m+"%")}return o},totaluploadprogress:c,sending:c,sendingmultiple:c,success:function(j){return j.previewElement.classList.add("dz-success")},successmultiple:c,canceled:function(j){return this.emit("error",j,"Upload canceled.")},canceledmultiple:c,complete:function(j){if(j._removeLink){return j._removeLink.textContent=this.options.dictRemoveFile}},completemultiple:c,maxfilesexceeded:c,maxfilesreached:c,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>✔</span></div>\n  <div class="dz-error-mark"><span>✘</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'};g=function(){var m,n,k,j,z,l,o;j=arguments[0],k=2<=arguments.length?r.call(arguments,1):[];for(l=0,o=k.length;l<o;l++){n=k[l];for(m in n){z=n[m];j[m]=z}}return j};function i(l,m){var n,j,k;this.element=l;this.version=i.version;this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,"");this.clickableElements=[];this.listeners=[];this.files=[];if(typeof this.element==="string"){this.element=document.querySelector(this.element)}if(!(this.element&&(this.element.nodeType!=null))){throw new Error("Invalid dropzone element.")}if(this.element.dropzone){throw new Error("Dropzone already attached.")}i.instances.push(this);this.element.dropzone=this;n=(k=i.optionsForElement(this.element))!=null?k:{};this.options=g({},this.defaultOptions,n,m!=null?m:{});if(this.options.forceFallback||!i.isBrowserSupported()){return this.options.fallback.call(this)}if(this.options.url==null){this.options.url=this.element.getAttribute("action")}if(!this.options.url){throw new Error("No URL provided.")}if(this.options.acceptedFiles&&this.options.acceptedMimeTypes){throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.")}if(this.options.acceptedMimeTypes){this.options.acceptedFiles=this.options.acceptedMimeTypes;delete this.options.acceptedMimeTypes}this.options.method=this.options.method.toUpperCase();if((j=this.getExistingFallback())&&j.parentNode){j.parentNode.removeChild(j)}if(this.options.previewsContainer){this.previewsContainer=i.getElement(this.options.previewsContainer,"previewsContainer")}else{this.previewsContainer=this.element}if(this.options.clickable){if(this.options.clickable===true){this.clickableElements=[this.element]}else{this.clickableElements=i.getElements(this.options.clickable,"clickable")}}this.init()}i.prototype.getAcceptedFiles=function(){var l,j,m,k,n;k=this.files;n=[];for(j=0,m=k.length;j<m;j++){l=k[j];if(l.accepted){n.push(l)}}return n};i.prototype.getRejectedFiles=function(){var l,j,m,k,n;k=this.files;n=[];for(j=0,m=k.length;j<m;j++){l=k[j];if(!l.accepted){n.push(l)}}return n};i.prototype.getQueuedFiles=function(){var l,j,m,k,n;k=this.files;n=[];for(j=0,m=k.length;j<m;j++){l=k[j];if(l.status===i.QUEUED){n.push(l)}}return n};i.prototype.getUploadingFiles=function(){var l,j,m,k,n;k=this.files;n=[];for(j=0,m=k.length;j<m;j++){l=k[j];if(l.status===i.UPLOADING){n.push(l)}}return n};i.prototype.init=function(){var m,B,j,k,n,l,o,A=this;if(this.element.tagName==="form"){this.element.setAttribute("enctype","multipart/form-data")}if(this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")){this.element.appendChild(i.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>"))}if(this.clickableElements.length){j=function(){if(A.hiddenFileInput){document.body.removeChild(A.hiddenFileInput)}A.hiddenFileInput=document.createElement("input");A.hiddenFileInput.setAttribute("type","file");if((A.options.maxFiles==null)||A.options.maxFiles>1){A.hiddenFileInput.setAttribute("multiple","multiple")}if(A.options.acceptedFiles!=null){A.hiddenFileInput.setAttribute("accept",A.options.acceptedFiles)}A.hiddenFileInput.style.visibility="hidden";A.hiddenFileInput.style.position="absolute";A.hiddenFileInput.style.top="0";A.hiddenFileInput.style.left="0";A.hiddenFileInput.style.height="0";A.hiddenFileInput.style.width="0";document.body.appendChild(A.hiddenFileInput);return A.hiddenFileInput.addEventListener("change",function(){var F,E,z,y;E=A.hiddenFileInput.files;if(E.length){for(z=0,y=E.length;z<y;z++){F=E[z];A.addFile(F)}}return j()})};j()}this.URL=(l=window.URL)!=null?l:window.webkitURL;o=this.events;for(k=0,n=o.length;k<n;k++){m=o[k];this.on(m,this.options[m])}this.on("uploadprogress",function(){return A.updateTotalUploadProgress()});this.on("removedfile",function(){return A.updateTotalUploadProgress()});this.on("canceled",function(y){return A.emit("complete",y)});this.on("complete",function(y){if(A.getUploadingFiles().length===0&&A.getQueuedFiles().length===0){return setTimeout((function(){return A.emit("queuecomplete")}),0)}});B=function(y){y.stopPropagation();if(y.preventDefault){return y.preventDefault()}else{return y.returnValue=false}};this.listeners=[{element:this.element,events:{dragstart:function(y){return A.emit("dragstart",y)},dragenter:function(y){B(y);return A.emit("dragenter",y)},dragover:function(D){var y;try{y=D.dataTransfer.effectAllowed}catch(z){}D.dataTransfer.dropEffect="move"===y||"linkMove"===y?"move":"copy";B(D);return A.emit("dragover",D)},dragleave:function(y){return A.emit("dragleave",y)},drop:function(y){B(y);return A.drop(y)},dragend:function(y){return A.emit("dragend",y)}}}];this.clickableElements.forEach(function(y){return A.listeners.push({element:y,events:{click:function(z){if((y!==A.element)||(z.target===A.element||i.elementInside(z.target,A.element.querySelector(".dz-message")))){return A.hiddenFileInput.click()}}}})});this.enable();return this.options.init.call(this)};i.prototype.destroy=function(){var j;this.disable();this.removeAllFiles(true);if((j=this.hiddenFileInput)!=null?j.parentNode:void 0){this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);this.hiddenFileInput=null}delete this.element.dropzone;return i.instances.splice(i.instances.indexOf(this),1)};i.prototype.updateTotalUploadProgress=function(){var n,l,A,o,B,j,m,k;o=0;A=0;n=this.getAcceptedFiles();if(n.length){k=this.getAcceptedFiles();for(j=0,m=k.length;j<m;j++){l=k[j];o+=l.upload.bytesSent;A+=l.upload.total}B=100*o/A}else{B=100}return this.emit("totaluploadprogress",B,A,o)};i.prototype.getFallbackForm=function(){var l,m,j,k;if(l=this.getExistingFallback()){return l}j='<div class="dz-fallback">';if(this.options.dictFallbackText){j+="<p>"+this.options.dictFallbackText+"</p>"}j+='<input type="file" name="'+this.options.paramName+(this.options.uploadMultiple?"[]":"")+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';m=i.createElement(j);if(this.element.tagName!=="FORM"){k=i.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>');k.appendChild(m)}else{this.element.setAttribute("enctype","multipart/form-data");this.element.setAttribute("method",this.options.method)}return k!=null?k:m};i.prototype.getExistingFallback=function(){var j,m,n,k,o,l;m=function(F){var D,C,E;for(C=0,E=F.length;C<E;C++){D=F[C];if(/(^| )fallback($| )/.test(D.className)){return D}}};l=["div","form"];for(k=0,o=l.length;k<o;k++){n=l[k];if(j=m(this.element.getElementsByTagName(n))){return j}}};i.prototype.setupEventListeners=function(){var l,m,z,j,n,k,o;k=this.listeners;o=[];for(j=0,n=k.length;j<n;j++){l=k[j];o.push((function(){var B,y;B=l.events;y=[];for(m in B){z=B[m];y.push(l.element.addEventListener(m,z,false))}return y})())}return o};i.prototype.removeEventListeners=function(){var l,m,z,j,n,k,o;k=this.listeners;o=[];for(j=0,n=k.length;j<n;j++){l=k[j];o.push((function(){var B,y;B=l.events;y=[];for(m in B){z=B[m];y.push(l.element.removeEventListener(m,z,false))}return y})())}return o};i.prototype.disable=function(){var l,j,m,k,n;this.clickableElements.forEach(function(o){return o.classList.remove("dz-clickable")});this.removeEventListeners();k=this.files;n=[];for(j=0,m=k.length;j<m;j++){l=k[j];n.push(this.cancelUpload(l))}return n};i.prototype.enable=function(){this.clickableElements.forEach(function(j){return j.classList.add("dz-clickable")});return this.setupEventListeners()};i.prototype.filesize=function(j){var k;if(j>=1024*1024*1024*1024/10){j=j/(1024*1024*1024*1024/10);k="TiB"}else{if(j>=1024*1024*1024/10){j=j/(1024*1024*1024/10);k="GiB"}else{if(j>=1024*1024/10){j=j/(1024*1024/10);k="MiB"}else{if(j>=1024/10){j=j/(1024/10);k="KiB"}else{j=j*10;k="b"}}}}return"<strong>"+(Math.round(j)/10)+"</strong> "+k};i.prototype._updateMaxFilesReachedClass=function(){if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){if(this.getAcceptedFiles().length===this.options.maxFiles){this.emit("maxfilesreached",this.files)}return this.element.classList.add("dz-max-files-reached")}else{return this.element.classList.remove("dz-max-files-reached")}};i.prototype.drop=function(j){var k,l;if(!j.dataTransfer){return}this.emit("drop",j);k=j.dataTransfer.files;if(k.length){l=j.dataTransfer.items;if(l&&l.length&&(l[0].webkitGetAsEntry!=null)){this._addFilesFromItems(l)}else{this.handleFiles(k)}}};i.prototype.paste=function(j){var l,k;if((j!=null?(k=j.clipboardData)!=null?k.items:void 0:void 0)==null){return}this.emit("paste",j);l=j.clipboardData.items;if(l.length){return this._addFilesFromItems(l)}};i.prototype.handleFiles=function(k){var l,j,m,n;n=[];for(j=0,m=k.length;j<m;j++){l=k[j];n.push(this.addFile(l))}return n};i.prototype._addFilesFromItems=function(m){var k,l,j,n,o;o=[];for(j=0,n=m.length;j<n;j++){l=m[j];if((l.webkitGetAsEntry!=null)&&(k=l.webkitGetAsEntry())){if(k.isFile){o.push(this.addFile(l.getAsFile()))}else{if(k.isDirectory){o.push(this._addFilesFromDirectory(k,k.name))}else{o.push(void 0)}}}else{if(l.getAsFile!=null){if((l.kind==null)||l.kind==="file"){o.push(this.addFile(l.getAsFile()))}else{o.push(void 0)}}else{o.push(void 0)}}}return o};i.prototype._addFilesFromDirectory=function(n,l){var m,j,k=this;m=n.createReader();j=function(B){var C,o,D;for(o=0,D=B.length;o<D;o++){C=B[o];if(C.isFile){C.file(function(y){if(k.options.ignoreHiddenFiles&&y.name.substring(0,1)==="."){return}y.fullPath=""+l+"/"+y.name;return k.addFile(y)})}else{if(C.isDirectory){k._addFilesFromDirectory(C,""+l+"/"+C.name)}}}};return m.readEntries(j,function(o){return typeof console!=="undefined"&&console!==null?typeof console.log==="function"?console.log(o):void 0:void 0})};i.prototype.accept=function(j,k){if(j.size>this.options.maxFilesize*1024*1024){return k(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(j.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize))}else{if(!i.isValidFile(j,this.options.acceptedFiles)){return k(this.options.dictInvalidFileType)}else{if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){k(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles));return this.emit("maxfilesexceeded",j)}else{return this.options.accept.call(this,j,k)}}}};i.prototype.addFile=function(k){var j=this;k.upload={progress:0,total:k.size,bytesSent:0};this.files.push(k);k.status=i.ADDED;this.emit("addedfile",k);this._enqueueThumbnail(k);return this.accept(k,function(l){if(l){k.accepted=false;j._errorProcessing([k],l)}else{j.enqueueFile(k)}return j._updateMaxFilesReachedClass()})};i.prototype.enqueueFiles=function(k){var l,j,m;for(j=0,m=k.length;j<m;j++){l=k[j];this.enqueueFile(l)}return null};i.prototype.enqueueFile=function(k){var j=this;k.accepted=true;if(k.status===i.ADDED){k.status=i.QUEUED;if(this.options.autoProcessQueue){return setTimeout((function(){return j.processQueue()}),0)}}else{throw new Error("This file can't be queued because it has already been processed or was rejected.")}};i.prototype._thumbnailQueue=[];i.prototype._processingThumbnail=false;i.prototype._enqueueThumbnail=function(k){var j=this;if(this.options.createImageThumbnails&&k.type.match(/image.*/)&&k.size<=this.options.maxThumbnailFilesize*1024*1024){this._thumbnailQueue.push(k);return setTimeout((function(){return j._processThumbnailQueue()}),0)}};i.prototype._processThumbnailQueue=function(){var j=this;if(this._processingThumbnail||this._thumbnailQueue.length===0){return}this._processingThumbnail=true;return this.createThumbnail(this._thumbnailQueue.shift(),function(){j._processingThumbnail=false;return j._processThumbnailQueue()})};i.prototype.removeFile=function(j){if(j.status===i.UPLOADING){this.cancelUpload(j)}this.files=d(this.files,j);this.emit("removedfile",j);if(this.files.length===0){return this.emit("reset")}};i.prototype.removeAllFiles=function(j){var m,k,n,l;if(j==null){j=false}l=this.files.slice();for(k=0,n=l.length;k<n;k++){m=l[k];if(m.status!==i.UPLOADING||j){this.removeFile(m)}}return null};i.prototype.createThumbnail=function(l,j){var m,k=this;m=new FileReader;m.onload=function(){var n;n=document.createElement("img");n.onload=function(){var J,L,I,G,F,o,H,K;l.width=n.width;l.height=n.height;I=k.options.resize.call(k,l);if(I.trgWidth==null){I.trgWidth=k.options.thumbnailWidth}if(I.trgHeight==null){I.trgHeight=k.options.thumbnailHeight}J=document.createElement("canvas");L=J.getContext("2d");J.width=I.trgWidth;J.height=I.trgHeight;s(L,n,(F=I.srcX)!=null?F:0,(o=I.srcY)!=null?o:0,I.srcWidth,I.srcHeight,(H=I.trgX)!=null?H:0,(K=I.trgY)!=null?K:0,I.trgWidth,I.trgHeight);G=J.toDataURL("image/png");k.emit("thumbnail",l,G);if(j!=null){return j()}};return n.src=m.result};return m.readAsDataURL(l)};i.prototype.processQueue=function(){var l,j,m,k;j=this.options.parallelUploads;m=this.getUploadingFiles().length;l=m;if(m>=j){return}k=this.getQueuedFiles();if(!(k.length>0)){return}if(this.options.uploadMultiple){return this.processFiles(k.slice(0,j-m))}else{while(l<j){if(!k.length){return}this.processFile(k.shift());l++}}};i.prototype.processFile=function(j){return this.processFiles([j])};i.prototype.processFiles=function(k){var l,j,m;for(j=0,m=k.length;j<m;j++){l=k[j];l.processing=true;l.status=i.UPLOADING;this.emit("processing",l)}if(this.options.uploadMultiple){this.emit("processingmultiple",k)}return this.uploadFiles(k)};i.prototype._getFilesWithXhr=function(j){var l,k;return k=(function(){var z,n,m,o;m=this.files;o=[];for(z=0,n=m.length;z<n;z++){l=m[z];if(l.xhr===j){o.push(l)}}return o}).call(this)};i.prototype.cancelUpload=function(k){var m,l,A,j,n,o,B;if(k.status===i.UPLOADING){l=this._getFilesWithXhr(k.xhr);for(A=0,n=l.length;A<n;A++){m=l[A];m.status=i.CANCELED}k.xhr.abort();for(j=0,o=l.length;j<o;j++){m=l[j];this.emit("canceled",m)}if(this.options.uploadMultiple){this.emit("canceledmultiple",l)}}else{if((B=k.status)===i.ADDED||B===i.QUEUED){k.status=i.CANCELED;this.emit("canceled",k);if(this.options.uploadMultiple){this.emit("canceledmultiple",[k])}}}if(this.options.autoProcessQueue){return this.processQueue()}};i.prototype.uploadFile=function(j){return this.uploadFiles([j])};i.prototype.uploadFiles=function(ax){var Z,aa,am,ae,ar,aA,ag,ao,ad,j,af,av,at,ak,ac,aq,ai,al,ap,au,m,k,l,n,o,aw,ah,ay,az,aj,an,ab=this;aq=new XMLHttpRequest();for(ai=0,m=ax.length;ai<m;ai++){Z=ax[ai];Z.xhr=aq}aq.open(this.options.method,this.options.url,true);aq.withCredentials=!!this.options.withCredentials;at=null;am=function(){var y,A,z;z=[];for(y=0,A=ax.length;y<A;y++){Z=ax[y];z.push(ab._errorProcessing(ax,at||ab.options.dictResponseError.replace("{{statusCode}}",aq.status),aq))}return z};ak=function(A){var F,y,B,D,E,G,H,z,C;if(A!=null){y=100*A.loaded/A.total;for(B=0,G=ax.length;B<G;B++){Z=ax[B];Z.upload={progress:y,total:A.total,bytesSent:A.loaded}}}else{F=true;y=100;for(D=0,H=ax.length;D<H;D++){Z=ax[D];if(!(Z.upload.progress===100&&Z.upload.bytesSent===Z.upload.total)){F=false}Z.upload.progress=y;Z.upload.bytesSent=Z.upload.total}if(F){return}}C=[];for(E=0,z=ax.length;E<z;E++){Z=ax[E];C.push(ab.emit("uploadprogress",Z,y,Z.upload.bytesSent))}return C};aq.onload=function(A){var z;if(ax[0].status===i.CANCELED){return}if(aq.readyState!==4){return}at=aq.responseText;if(aq.getResponseHeader("content-type")&&~aq.getResponseHeader("content-type").indexOf("application/json")){try{at=JSON.parse(at)}catch(y){A=y;at="Invalid JSON response from server."}}ak();if(!((200<=(z=aq.status)&&z<300))){return am()}else{return ab._finished(ax,at,A)}};aq.onerror=function(){if(ax[0].status===i.CANCELED){return}return am()};av=(ah=aq.upload)!=null?ah:aq;av.onprogress=ak;aA={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};if(this.options.headers){g(aA,this.options.headers)}for(ae in aA){ar=aA[ae];aq.setRequestHeader(ae,ar)}aa=new FormData();if(this.options.params){ay=this.options.params;for(j in ay){ac=ay[j];aa.append(j,ac)}}for(al=0,k=ax.length;al<k;al++){Z=ax[al];this.emit("sending",Z,aq,aa)}if(this.options.uploadMultiple){this.emit("sendingmultiple",ax,aq,aa)}if(this.element.tagName==="FORM"){az=this.element.querySelectorAll("input, textarea, select, button");for(ap=0,l=az.length;ap<l;ap++){ag=az[ap];ao=ag.getAttribute("name");ad=ag.getAttribute("type");if(ag.tagName==="SELECT"&&ag.hasAttribute("multiple")){aj=ag.options;for(au=0,n=aj.length;au<n;au++){af=aj[au];if(af.selected){aa.append(ao,af.value)}}}else{if(!ad||((an=ad.toLowerCase())!=="checkbox"&&an!=="radio")||ag.checked){aa.append(ao,ag.value)}}}}for(aw=0,o=ax.length;aw<o;aw++){Z=ax[aw];aa.append(""+this.options.paramName+(this.options.uploadMultiple?"[]":""),Z,Z.name)}return aq.send(aa)};i.prototype._finished=function(m,k,j){var n,l,o;for(l=0,o=m.length;l<o;l++){n=m[l];n.status=i.SUCCESS;this.emit("success",n,k,j);this.emit("complete",n)}if(this.options.uploadMultiple){this.emit("successmultiple",m,k,j);this.emit("completemultiple",m)}if(this.options.autoProcessQueue){return this.processQueue()}};i.prototype._errorProcessing=function(l,m,j){var n,k,o;for(k=0,o=l.length;k<o;k++){n=l[k];n.status=i.ERROR;this.emit("error",n,m,j);this.emit("complete",n)}if(this.options.uploadMultiple){this.emit("errormultiple",l,m,j);this.emit("completemultiple",l)}if(this.options.autoProcessQueue){return this.processQueue()}};return i})(v);q.version="4.0.0-dev";q.options={};q.optionsForElement=function(g){if(g.getAttribute("id")){return q.options[w(g.getAttribute("id"))]}else{return void 0}};q.instances=[];q.forElement=function(g){if(typeof g==="string"){g=document.querySelector(g)}if((g!=null?g.dropzone:void 0)==null){throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.")}return g.dropzone};q.autoDiscover=true;q.discover=function(){var g,j,i,h,k,l;if(document.querySelectorAll){i=document.querySelectorAll(".dropzone")}else{i=[];g=function(A){var m,B,n,o;o=[];for(B=0,n=A.length;B<n;B++){m=A[B];if(/(^| )dropzone($| )/.test(m.className)){o.push(i.push(m))}else{o.push(void 0)}}return o};g(document.getElementsByTagName("div"));g(document.getElementsByTagName("form"))}l=[];for(h=0,k=i.length;h<k;h++){j=i[h];if(q.optionsForElement(j)!==false){l.push(new q(j))}else{l.push(void 0)}}return l};q.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];q.isBrowserSupported=function(){var j,i,g,k,h;j=true;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if(!("classList" in document.createElement("a"))){j=false}else{h=q.blacklistedBrowsers;for(g=0,k=h.length;g<k;g++){i=h[g];if(i.test(navigator.userAgent)){j=false;continue}}}}else{j=false}return j};d=function(g,j){var i,h,k,l;l=[];for(h=0,k=g.length;h<k;h++){i=g[h];if(i!==j){l.push(i)}}return l};w=function(g){return g.replace(/[\-_](\w)/g,function(h){return h[1].toUpperCase()})};q.createElement=function(h){var g;g=document.createElement("div");g.innerHTML=h;return g.childNodes[0]};q.elementInside=function(g,h){if(g===h){return true}while(g=g.parentNode){if(g===h){return true}}return false};q.getElement=function(g,i){var h;if(typeof g==="string"){h=document.querySelector(g)}else{if(g.nodeType!=null){h=g}}if(h==null){throw new Error("Invalid `"+i+"` option provided. Please provide a CSS selector or a plain HTML element.")}return h};q.getElements=function(n,h){var l,B,i,o,A,k,g,m;if(n instanceof Array){i=[];try{for(o=0,k=n.length;o<k;o++){B=n[o];i.push(this.getElement(B,h))}}catch(j){l=j;i=null}}else{if(typeof n==="string"){i=[];m=document.querySelectorAll(n);for(A=0,g=m.length;A<g;A++){B=m[A];i.push(B)}}else{if(n.nodeType!=null){i=[n]}}}if(!((i!=null)&&i.length)){throw new Error("Invalid `"+h+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.")}return i};q.confirm=function(i,g,h){if(window.confirm(i)){return g()}else{if(h!=null){return h()}}};q.isValidFile=function(j,m){var k,g,i,h,l;if(!m){return true}m=m.split(",");g=j.type;k=g.replace(/\/.*$/,"");for(h=0,l=m.length;h<l;h++){i=m[h];i=i.trim();if(i.charAt(0)==="."){if(j.name.toLowerCase().indexOf(i.toLowerCase(),j.name.length-i.length)!==-1){return true}}else{if(/\/\*$/.test(i)){if(k===i.replace(/\/.*$/,"")){return true}}else{if(g===i){return true}}}}return false};if(typeof jQuery!=="undefined"&&jQuery!==null){jQuery.fn.dropzone=function(g){return this.each(function(){return new q(this,g)})}}if(typeof e!=="undefined"&&e!==null){e.exports=q}else{window.Dropzone=q}q.ADDED="added";q.QUEUED="queued";q.ACCEPTED=q.QUEUED;q.UPLOADING="uploading";q.PROCESSING=q.UPLOADING;q.CANCELED="canceled";q.ERROR="error";q.SUCCESS="success";x=function(A){var g,i,j,B,o,k,h,l,n,m;h=A.naturalWidth;k=A.naturalHeight;i=document.createElement("canvas");i.width=1;i.height=k;j=i.getContext("2d");j.drawImage(A,0,0);B=j.getImageData(0,0,1,k).data;m=0;o=k;l=k;while(l>m){g=B[(l-1)*4+3];if(g===0){o=l}else{m=l}l=(o+m)>>1}n=l/k;if(n===0){return 1}else{return n}};s=function(l,h,n,o,m,g,j,k,i,A){var B;B=x(h);return l.drawImage(h,n,o,m,g,j,k,i,A/B)};t=function(g,o){var j,n,h,k,D,i,l,B,C;h=false;C=true;n=g.document;B=n.documentElement;j=(n.addEventListener?"addEventListener":"attachEvent");l=(n.addEventListener?"removeEventListener":"detachEvent");i=(n.addEventListener?"":"on");k=function(y){if(y.type==="readystatechange"&&n.readyState!=="complete"){return}(y.type==="load"?g:n)[l](i+y.type,k,false);if(!h&&(h=true)){return o.call(g,y.type||y)}};D=function(){var z;try{B.doScroll("left")}catch(y){z=y;setTimeout(D,50);return}return k("poll")};if(n.readyState!=="complete"){if(n.createEventObject&&B.doScroll){try{C=!g.frameElement}catch(m){}if(C){D()}}n[j](i+"DOMContentLoaded",k,false);n[j](i+"readystatechange",k,false);return g[j](i+"load",k,false)}};q._autoDiscoverFunction=function(){if(q.autoDiscover){return q.discover()}};t(window,q._autoDiscoverFunction)}).call(this)});b.alias("component-emitter/index.js","dropzone/deps/emitter/index.js");b.alias("component-emitter/index.js","emitter/index.js");if(typeof exports=="object"){module.exports=b("dropzone")}else{if(typeof define=="function"&&define.amd){define(function(){return b("dropzone")})}else{this["Dropzone"]=b("dropzone")}}})();