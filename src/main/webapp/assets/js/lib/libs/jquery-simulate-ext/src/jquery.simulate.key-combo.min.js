(function(b,c){var a={SHIFT:16,CONTROL:17,ALT:18,COMMAND:91};b.extend(b.simulate.prototype,{simulateKeyCombo:function(){var h=b(this.target),o=b.extend({combo:"",eventsOnly:false},this.options),f={},d=o.combo,j=d.split(/(\+)/),k=false,e=[],g;if(d.length===0){return}j=b.grep(j,function(i){return(i!=="")});for(g=0;g<j.length;g+=1){var m=j[g],l=m.toLowerCase();if(k){if(m!=="+"){throw'Syntax error: expected "+"'}}else{var n;switch(l){case"ctrl":case"alt":case"shift":case"meta":switch(l){case"ctrl":n=a.CONTROL;break;case"alt":n=a.ALT;break;case"shift":n=a.SHIFT;break;case"meta":n=a.COMMAND;break}f[l+"Key"]=true;e.unshift(n);f.keyCode=n;h.simulate("keydown",f);break;default:if(m.length>1&&!m.match(/^\d+$/)){throw'Syntax error: expecting "+" between each key'}else{n=m.match(/^\d+$/)?parseInt(m):b.simulate.prototype.simulateKeySequence.prototype.charToKeyCode(m);e.unshift(n);f.keyCode=n;f.which=n;f.charCode=c;h.simulate("keydown",f);if(f.shiftKey){m=m.toUpperCase()}f.keyCode=m.charCodeAt(0);f.charCode=f.keyCode;f.which=f.keyCode;h.simulate("keypress",f);if(o.eventsOnly!==true&&!f.ctrlKey&&!f.altKey&&!f.metaKey){h.simulate("key-sequence",{sequence:m,triggerKeyEvents:false})}}break}}k=!k}if(!k){throw'Syntax error: expected key (trailing "+"?)'}f.charCode=c;for(g=0;g<e.length;g+=1){f.keyCode=e[g];f.which=e[g];switch(f.keyCode){case a.ALT:f.altKey=false;break;case a.SHIFT:f.shiftKey=false;break;case a.CONTROL:f.ctrlKey=false;break;case a.COMMAND:f.metaKey=false;break;default:break}h.simulate("keyup",f)}}})}(jQuery));