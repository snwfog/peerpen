/*!
 * jQuery Simulate v0.0.1 - simulate browser mouse and keyboard events
 * https://github.com/jquery/jquery-simulate
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Sun Dec 9 12:15:33 2012 -0500
 */
;(function(e,a){var h=/^key/,b=/^(?:mouse|contextmenu)|click/,i=/\[object (?:HTML)?Document\]/;function d(j){return i.test(Object.prototype.toString.call(j))}function c(k){for(var j=0;j<window.frames.length;j+=1){if(window.frames[j].document===k){return window.frames[j]}}return window}e.fn.simulate=function(k,j){return this.each(function(){new e.simulate(this,k,j)})};e.simulate=function(l,k,j){var m=e.camelCase("simulate-"+k);this.target=l;this.options=j||{};if(this[m]){this[m]()}else{this.simulateEvent(l,k,this.options)}};e.extend(e.simulate,{keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},buttonCode:{LEFT:0,MIDDLE:1,RIGHT:2}});e.extend(e.simulate.prototype,{simulateEvent:function(m,k,j){var l=this.createEvent(k,j);this.dispatchEvent(m,k,l,j)},createEvent:function(k,j){if(h.test(k)){return this.keyEvent(k,j)}if(b.test(k)){return this.mouseEvent(k,j)}},mouseEvent:function(l,k){var m,n,o=d(this.target)?this.target:(this.target.ownerDocument||document),p,j;k=e.extend({bubbles:true,cancelable:(l!=="mousemove"),view:c(o),detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,button:0,relatedTarget:a},k);if(o.createEvent){m=o.createEvent("MouseEvents");m.initMouseEvent(l,k.bubbles,k.cancelable,k.view,k.detail,k.screenX,k.screenY,k.clientX,k.clientY,k.ctrlKey,k.altKey,k.shiftKey,k.metaKey,k.button,k.relatedTarget||o.body.parentNode);if(m.pageX===0&&m.pageY===0&&Object.defineProperty){n=d(m.relatedTarget)?m.relatedTarget:(m.relatedTarget.ownerDocument||document);p=n.documentElement;j=n.body;Object.defineProperty(m,"pageX",{get:function(){return k.clientX+(p&&p.scrollLeft||j&&j.scrollLeft||0)-(p&&p.clientLeft||j&&j.clientLeft||0)}});Object.defineProperty(m,"pageY",{get:function(){return k.clientY+(p&&p.scrollTop||j&&j.scrollTop||0)-(p&&p.clientTop||j&&j.clientTop||0)}})}}else{if(o.createEventObject){m=o.createEventObject();e.extend(m,k);m.button={0:1,1:4,2:2}[m.button]||m.button}}return m},keyEvent:function(k,j){var m,n;j=e.extend({bubbles:true,cancelable:true,view:c(n),ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,keyCode:0,charCode:a},j);n=d(this.target)?this.target:(this.target.ownerDocument||document);if(n.createEvent){try{m=n.createEvent("KeyEvents");m.initKeyEvent(k,j.bubbles,j.cancelable,j.view,j.ctrlKey,j.altKey,j.shiftKey,j.metaKey,j.keyCode,j.charCode)}catch(l){m=n.createEvent("Events");m.initEvent(k,j.bubbles,j.cancelable);e.extend(m,{view:j.view,ctrlKey:j.ctrlKey,altKey:j.altKey,shiftKey:j.shiftKey,metaKey:j.metaKey,keyCode:j.keyCode,charCode:j.charCode})}}else{if(n.createEventObject){m=n.createEventObject();e.extend(m,j)}}if(!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())||(({}).toString.call(window.opera)==="[object Opera]")){m.keyCode=(j.charCode>0)?j.charCode:j.keyCode;m.charCode=a}return m},dispatchEvent:function(l,j,k){if(l.dispatchEvent){l.dispatchEvent(k)}else{if(l.fireEvent){l.fireEvent("on"+j,k)}}},simulateFocus:function(){var k,j=false,m=e(this.target);function l(){j=true}m.bind("focus",l);m[0].focus();if(!j){k=e.Event("focusin");k.preventDefault();m.trigger(k);m.triggerHandler("focus")}m.unbind("focus",l)},simulateBlur:function(){var m,j=false,l=e(this.target);function k(){j=true}l.bind("blur",k);l[0].blur();setTimeout(function(){if(l[0].ownerDocument.activeElement===l[0]){l[0].ownerDocument.body.focus()}if(!j){m=e.Event("focusout");m.preventDefault();l.trigger(m);l.triggerHandler("blur")}l.unbind("blur",k)},1)}});function g(j){var l,k;j=e(j);if(d(j[0])){k=j;l={left:0,top:0}}else{k=e(j[0].ownerDocument||document);l=j.offset()}return{x:l.left+j.outerWidth()/2-k.scrollLeft(),y:l.top+j.outerHeight()/2-k.scrollTop()}}function f(j){var l,k;j=e(j);if(d(j[0])){k=j;l={left:0,top:0}}else{k=e(j[0].ownerDocument||document);l=j.offset()}return{x:l.left-document.scrollLeft(),y:l.top-document.scrollTop()}}e.extend(e.simulate.prototype,{simulateDrag:function(){var l=0,n=this.target,r=this.options,j=r.handle==="corner"?f(n):g(n),p=Math.floor(j.x),o=Math.floor(j.y),m={clientX:p,clientY:o},s=r.dx||(r.x!==a?r.x-p:0),q=r.dy||(r.y!==a?r.y-o:0),k=r.moves||3;this.simulateEvent(n,"mousedown",m);for(;l<k;l++){p+=s/k;o+=q/k;m={clientX:Math.round(p),clientY:Math.round(o)};this.simulateEvent(n.ownerDocument,"mousemove",m)}if(e.contains(document,n)){this.simulateEvent(n,"mouseup",m);this.simulateEvent(n,"click",m)}else{this.simulateEvent(document,"mouseup",m)}}})})(jQuery);