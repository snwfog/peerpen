/*! jQuery UI - v1.10.3 - 2013-09-20
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(c){function b(g,f,d){return g>f&&f+d>g}function a(d){return/left|right/.test(d.css("float"))||/inline|table-cell/.test(d.css("display"))}c.widget("ui.sortable",c.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var d=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===d.axis||a(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var d=this.items.length-1;d>=0;d--){this.items[d].item.removeData(this.widgetName+"-item")}return this},_setOption:function(e,d){"disabled"===e?(this.options[e]=d,this.widget().toggleClass("ui-sortable-disabled",!!d)):c.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(f,e){var g=null,d=!1,h=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(f),c(f.target).parents().each(function(){return c.data(this,h.widgetName+"-item")===h?(g=c(this),!1):undefined}),c.data(f.target,h.widgetName+"-item")===h&&(g=c(f.target)),g?!this.options.handle||e||(c(this.options.handle,g).find("*").addBack().each(function(){this===f.target&&(d=!0)}),d)?(this.currentItem=g,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(f,e,g){var d,j,h=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(f),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},c.extend(this.offset,{click:{left:f.pageX-this.offset.left,top:f.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(f),this.originalPageX=f.pageX,this.originalPageY=f.pageY,h.cursorAt&&this._adjustOffsetFromHelper(h.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),h.containment&&this._setContainment(),h.cursor&&"auto"!==h.cursor&&(j=this.document.find("body"),this.storedCursor=j.css("cursor"),j.css("cursor",h.cursor),this.storedStylesheet=c("<style>*{ cursor: "+h.cursor+" !important; }</style>").appendTo(j)),h.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",h.opacity)),h.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",h.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",f,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!g){for(d=this.containers.length-1;d>=0;d--){this.containers[d]._trigger("activate",f,this._uiHash(this))}}return c.ui.ddmanager&&(c.ui.ddmanager.current=this),c.ui.ddmanager&&!h.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,f),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(f),!0},_mouseDrag:function(f){var e,g,d,k,h=this.options,j=!1;for(this.position=this._generatePosition(f),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-f.pageY<h.scrollSensitivity?this.scrollParent[0].scrollTop=j=this.scrollParent[0].scrollTop+h.scrollSpeed:f.pageY-this.overflowOffset.top<h.scrollSensitivity&&(this.scrollParent[0].scrollTop=j=this.scrollParent[0].scrollTop-h.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-f.pageX<h.scrollSensitivity?this.scrollParent[0].scrollLeft=j=this.scrollParent[0].scrollLeft+h.scrollSpeed:f.pageX-this.overflowOffset.left<h.scrollSensitivity&&(this.scrollParent[0].scrollLeft=j=this.scrollParent[0].scrollLeft-h.scrollSpeed)):(f.pageY-c(document).scrollTop()<h.scrollSensitivity?j=c(document).scrollTop(c(document).scrollTop()-h.scrollSpeed):c(window).height()-(f.pageY-c(document).scrollTop())<h.scrollSensitivity&&(j=c(document).scrollTop(c(document).scrollTop()+h.scrollSpeed)),f.pageX-c(document).scrollLeft()<h.scrollSensitivity?j=c(document).scrollLeft(c(document).scrollLeft()-h.scrollSpeed):c(window).width()-(f.pageX-c(document).scrollLeft())<h.scrollSensitivity&&(j=c(document).scrollLeft(c(document).scrollLeft()+h.scrollSpeed))),j!==!1&&c.ui.ddmanager&&!h.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,f)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;e>=0;e--){if(g=this.items[e],d=g.item[0],k=this._intersectsWithPointer(g),k&&g.instance===this.currentContainer&&d!==this.currentItem[0]&&this.placeholder[1===k?"next":"prev"]()[0]!==d&&!c.contains(this.placeholder[0],d)&&("semi-dynamic"===this.options.type?!c.contains(this.element[0],d):!0)){if(this.direction=1===k?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(g)){break}this._rearrange(f,g),this._trigger("change",f,this._uiHash());break}}return this._contactContainers(f),c.ui.ddmanager&&c.ui.ddmanager.drag(this,f),this._trigger("sort",f,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(f,e){if(f){if(c.ui.ddmanager&&!this.options.dropBehaviour&&c.ui.ddmanager.drop(this,f),this.options.revert){var g=this,d=this.placeholder.offset(),j=this.options.axis,h={};j&&"x"!==j||(h.left=d.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),j&&"y"!==j||(h.top=d.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,c(this.helper).animate(h,parseInt(this.options.revert,10)||500,function(){g._clear(f)})}else{this._clear(f,e)}return !1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var d=this.containers.length-1;d>=0;d--){this.containers[d]._trigger("deactivate",null,this._uiHash(this)),this.containers[d].containerCache.over&&(this.containers[d]._trigger("out",null,this._uiHash(this)),this.containers[d].containerCache.over=0)}}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),c.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?c(this.domPosition.prev).after(this.currentItem):c(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var d=this._getItemsAsjQuery(e&&e.connected),f=[];return e=e||{},c(d).each(function(){var g=(c(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);g&&f.push((e.key||g[1]+"[]")+"="+(e.key&&e.expression?g[1]:g[2]))}),!f.length&&e.key&&f.push(e.key+"="),f.join("&")},toArray:function(e){var d=this._getItemsAsjQuery(e&&e.connected),f=[];return e=e||{},d.each(function(){f.push(c(e.item||this).attr(e.attribute||"id")||"")}),f},_intersectsWith:function(w){var B=this.positionAbs.left,q=B+this.helperProportions.width,C=this.positionAbs.top,z=C+this.helperProportions.height,k=w.left,f=k+w.width,j=w.top,v=j+w.height,m=this.offset.click.top,A=this.offset.click.left,y="x"===this.options.axis||C+m>j&&v>C+m,x="y"===this.options.axis||B+A>k&&f>B+A,g=y&&x;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>w[this.floating?"width":"height"]?g:B+this.helperProportions.width/2>k&&f>q-this.helperProportions.width/2&&C+this.helperProportions.height/2>j&&v>z-this.helperProportions.height/2},_intersectsWithPointer:function(j){var f="x"===this.options.axis||b(this.positionAbs.top+this.offset.click.top,j.top,j.height),g="y"===this.options.axis||b(this.positionAbs.left+this.offset.click.left,j.left,j.width),d=f&&g,k=this._getDragVerticalDirection(),h=this._getDragHorizontalDirection();return d?this.floating?h&&"right"===h||"down"===k?2:1:k&&("down"===k?2:1):!1},_intersectsWithSides:function(h){var f=b(this.positionAbs.top+this.offset.click.top,h.top+h.height/2,h.height),g=b(this.positionAbs.left+this.offset.click.left,h.left+h.width/2,h.width),d=this._getDragVerticalDirection(),j=this._getDragHorizontalDirection();return this.floating&&j?"right"===j&&g||"left"===j&&!g:d&&("down"===d&&f||"up"===d&&!f)},_getDragVerticalDirection:function(){var d=this.positionAbs.top-this.lastPositionAbs.top;return 0!==d&&(d>0?"down":"up")},_getDragHorizontalDirection:function(){var d=this.positionAbs.left-this.lastPositionAbs.left;return 0!==d&&(d>0?"right":"left")},refresh:function(d){return this._refreshItems(d),this.refreshPositions(),this},_connectWith:function(){var d=this.options;return d.connectWith.constructor===String?[d.connectWith]:d.connectWith},_getItemsAsjQuery:function(f){var e,j,d,m,k=[],l=[],g=this._connectWith();if(g&&f){for(e=g.length-1;e>=0;e--){for(d=c(g[e]),j=d.length-1;j>=0;j--){m=c.data(d[j],this.widgetFullName),m&&m!==this&&!m.options.disabled&&l.push([c.isFunction(m.options.items)?m.options.items.call(m.element):c(m.options.items,m.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),m])}}}for(l.push([c.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):c(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),e=l.length-1;e>=0;e--){l[e][0].each(function(){k.push(this)})}return c(k)},_removeCurrentsFromItems:function(){var d=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=c.grep(this.items,function(g){for(var f=0;d.length>f;f++){if(d[f]===g.item[0]){return !1}}return !0})},_refreshItems:function(x){this.items=[],this.containers=[this];var k,y,v,g,e,f,m,j,w=this.items,q=[[c.isFunction(this.options.items)?this.options.items.call(this.element[0],x,{item:this.currentItem}):c(this.options.items,this.element),this]],p=this._connectWith();if(p&&this.ready){for(k=p.length-1;k>=0;k--){for(v=c(p[k]),y=v.length-1;y>=0;y--){g=c.data(v[y],this.widgetFullName),g&&g!==this&&!g.options.disabled&&(q.push([c.isFunction(g.options.items)?g.options.items.call(g.element[0],x,{item:this.currentItem}):c(g.options.items,g.element),g]),this.containers.push(g))}}}for(k=q.length-1;k>=0;k--){for(e=q[k][1],f=q[k][0],y=0,j=f.length;j>y;y++){m=c(f[y]),m.data(this.widgetName+"-item",e),w.push({item:m,instance:e,width:0,height:0,left:0,top:0})}}},refreshPositions:function(f){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var e,g,d,h;for(e=this.items.length-1;e>=0;e--){g=this.items[e],g.instance!==this.currentContainer&&this.currentContainer&&g.item[0]!==this.currentItem[0]||(d=this.options.toleranceElement?c(this.options.toleranceElement,g.item):g.item,f||(g.width=d.outerWidth(),g.height=d.outerHeight()),h=d.offset(),g.left=h.left,g.top=h.top)}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(e=this.containers.length-1;e>=0;e--){h=this.containers[e].element.offset(),this.containers[e].containerCache.left=h.left,this.containers[e].containerCache.top=h.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight()}}return this},_createPlaceholder:function(e){e=e||this;var d,f=e.options;f.placeholder&&f.placeholder.constructor!==String||(d=f.placeholder,f.placeholder={element:function(){var h=e.currentItem[0].nodeName.toLowerCase(),g=c("<"+h+">",e.document[0]).addClass(d||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===h?e.currentItem.children().each(function(){c("<td>&#160;</td>",e.document[0]).attr("colspan",c(this).attr("colspan")||1).appendTo(g)}):"img"===h&&g.attr("src",e.currentItem.attr("src")),d||g.css("visibility","hidden"),g},update:function(h,g){(!d||f.forcePlaceholderSize)&&(g.height()||g.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),g.width()||g.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=c(f.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),f.placeholder.update(e,e.placeholder)},_contactContainers:function(A){var y,j,e,i,t,q,z,x,w,g,v=null,k=null;for(y=this.containers.length-1;y>=0;y--){if(!c.contains(this.currentItem[0],this.containers[y].element[0])){if(this._intersectsWith(this.containers[y].containerCache)){if(v&&c.contains(this.containers[y].element[0],v.element[0])){continue}v=this.containers[y],k=y}else{this.containers[y].containerCache.over&&(this.containers[y]._trigger("out",A,this._uiHash(this)),this.containers[y].containerCache.over=0)}}}if(v){if(1===this.containers.length){this.containers[k].containerCache.over||(this.containers[k]._trigger("over",A,this._uiHash(this)),this.containers[k].containerCache.over=1)}else{for(e=10000,i=null,g=v.floating||a(this.currentItem),t=g?"left":"top",q=g?"width":"height",z=this.positionAbs[t]+this.offset.click[t],j=this.items.length-1;j>=0;j--){c.contains(this.containers[k].element[0],this.items[j].item[0])&&this.items[j].item[0]!==this.currentItem[0]&&(!g||b(this.positionAbs.top+this.offset.click.top,this.items[j].top,this.items[j].height))&&(x=this.items[j].item.offset()[t],w=!1,Math.abs(x-z)>Math.abs(x+this.items[j][q]-z)&&(w=!0,x+=this.items[j][q]),e>Math.abs(x-z)&&(e=Math.abs(x-z),i=this.items[j],this.direction=w?"up":"down"))}if(!i&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[k]){return}i?this._rearrange(A,i,null,!0):this._rearrange(A,null,this.containers[k].element,!0),this._trigger("change",A,this._uiHash()),this.containers[k]._trigger("change",A,this._uiHash(this)),this.currentContainer=this.containers[k],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[k]._trigger("over",A,this._uiHash(this)),this.containers[k].containerCache.over=1}}},_createHelper:function(e){var d=this.options,f=c.isFunction(d.helper)?c(d.helper.apply(this.element[0],[e,this.currentItem])):"clone"===d.helper?this.currentItem.clone():this.currentItem;return f.parents("body").length||c("parent"!==d.appendTo?d.appendTo:this.currentItem[0].parentNode)[0].appendChild(f[0]),f[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!f[0].style.width||d.forceHelperSize)&&f.width(this.currentItem.width()),(!f[0].style.height||d.forceHelperSize)&&f.height(this.currentItem.height()),f},_adjustOffsetFromHelper:function(d){"string"==typeof d&&(d=d.split(" ")),c.isArray(d)&&(d={left:+d[0],top:+d[1]||0}),"left" in d&&(this.offset.click.left=d.left+this.margins.left),"right" in d&&(this.offset.click.left=this.helperProportions.width-d.right+this.margins.left),"top" in d&&(this.offset.click.top=d.top+this.margins.top),"bottom" in d&&(this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&c.contains(this.scrollParent[0],this.offsetParent[0])&&(d.left+=this.scrollParent.scrollLeft(),d.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&c.ui.ie)&&(d={top:0,left:0}),{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var d=this.currentItem.position();return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var f,e,g,d=this.options;"parent"===d.containment&&(d.containment=this.helper[0].parentNode),("document"===d.containment||"window"===d.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,c("document"===d.containment?document:window).width()-this.helperProportions.width-this.margins.left,(c("document"===d.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(d.containment)||(f=c(d.containment)[0],e=c(d.containment).offset(),g="hidden"!==c(f).css("overflow"),this.containment=[e.left+(parseInt(c(f).css("borderLeftWidth"),10)||0)+(parseInt(c(f).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(c(f).css("borderTopWidth"),10)||0)+(parseInt(c(f).css("paddingTop"),10)||0)-this.margins.top,e.left+(g?Math.max(f.scrollWidth,f.offsetWidth):f.offsetWidth)-(parseInt(c(f).css("borderLeftWidth"),10)||0)-(parseInt(c(f).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(g?Math.max(f.scrollHeight,f.offsetHeight):f.offsetHeight)-(parseInt(c(f).css("borderTopWidth"),10)||0)-(parseInt(c(f).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(f,e){e||(e=this.position);var g="absolute"===f?1:-1,d="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&c.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(d[0].tagName);return{top:e.top+this.offset.relative.top*g+this.offset.parent.top*g-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:d.scrollTop())*g,left:e.left+this.offset.relative.left*g+this.offset.parent.left*g-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:d.scrollLeft())*g}},_generatePosition:function(f){var e,j,d=this.options,m=f.pageX,k=f.pageY,l="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&c.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(l[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(f.pageX-this.offset.click.left<this.containment[0]&&(m=this.containment[0]+this.offset.click.left),f.pageY-this.offset.click.top<this.containment[1]&&(k=this.containment[1]+this.offset.click.top),f.pageX-this.offset.click.left>this.containment[2]&&(m=this.containment[2]+this.offset.click.left),f.pageY-this.offset.click.top>this.containment[3]&&(k=this.containment[3]+this.offset.click.top)),d.grid&&(e=this.originalPageY+Math.round((k-this.originalPageY)/d.grid[1])*d.grid[1],k=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-d.grid[1]:e+d.grid[1]:e,j=this.originalPageX+Math.round((m-this.originalPageX)/d.grid[0])*d.grid[0],m=this.containment?j-this.offset.click.left>=this.containment[0]&&j-this.offset.click.left<=this.containment[2]?j:j-this.offset.click.left>=this.containment[0]?j-d.grid[0]:j+d.grid[0]:j)),{top:k-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():g?0:l.scrollTop()),left:m-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():g?0:l.scrollLeft())}},_rearrange:function(j,g,f,h){f?f[0].appendChild(this.placeholder[0]):g.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?g.item[0]:g.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var d=this.counter;this._delay(function(){d===this.counter&&this.refreshPositions(!h)})},_clear:function(h,f){this.reverting=!1;var d,g=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(d in this._storedCSS){("auto"===this._storedCSS[d]||"static"===this._storedCSS[d])&&(this._storedCSS[d]="")}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}for(this.fromOutside&&!f&&g.push(function(i){this._trigger("receive",i,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||f||g.push(function(i){this._trigger("update",i,this._uiHash())}),this!==this.currentContainer&&(f||(g.push(function(i){this._trigger("remove",i,this._uiHash())}),g.push(function(i){return function(e){i._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),g.push(function(i){return function(e){i._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),d=this.containers.length-1;d>=0;d--){f||g.push(function(i){return function(e){i._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[d])),this.containers[d].containerCache.over&&(g.push(function(i){return function(e){i._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[d])),this.containers[d].containerCache.over=0)}if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!f){for(this._trigger("beforeStop",h,this._uiHash()),d=0;g.length>d;d++){g[d].call(this,h)}this._trigger("stop",h,this._uiHash())}return this.fromOutside=!1,!1}if(f||this._trigger("beforeStop",h,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!f){for(d=0;g.length>d;d++){g[d].call(this,h)}this._trigger("stop",h,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){c.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var d=e||this;return{helper:d.helper,placeholder:d.placeholder||c([]),position:d.position,originalPosition:d.originalPosition,offset:d.positionAbs,item:d.currentItem,sender:e?e.element:null}}})})(jQuery);