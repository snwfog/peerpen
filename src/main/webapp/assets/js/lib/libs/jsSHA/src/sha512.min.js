(function(){function y(n){throw n}var w=null;function t(q,n){this.a=q;this.b=n}function p(q,n){var A=[],s=(1<<n)-1,x=q.length*n,u;for(u=0;u<x;u+=n){A[u>>>5]|=(q.charCodeAt(u/n)&s)<<32-n-u%32}return{value:A,binLen:x}}function k(q){var n=[],x=q.length,s,u;0!==x%2&&y("String of HEX type must be in byte increments");for(s=0;s<x;s+=2){u=parseInt(q.substr(s,2),16),isNaN(u)&&y("String of HEX type contains invalid characters"),n[s>>>3]|=u<<24-4*(s%8)}return{value:n,binLen:4*x}}function v(s){var q=[],C=0,x,B,A,u,n;-1===s.search(/^[a-zA-Z0-9=+\/]+$/)&&y("Invalid character in base-64 string");x=s.indexOf("=");s=s.replace(/\=/g,"");-1!==x&&x<s.length&&y("Invalid '=' found in base-64 string");for(B=0;B<s.length;B+=4){n=s.substr(B,4);for(A=u=0;A<n.length;A+=1){x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(n[A]),u|=x<<18-6*A}for(A=0;A<n.length-1;A+=1){q[C>>2]|=(u>>>16-8*A&255)<<24-8*(C%4),C+=1}}return{value:q,binLen:8*C}}function r(q,n){var A="",s=4*q.length,x,u;for(x=0;x<s;x+=1){u=q[x>>>2]>>>8*(3-x%4),A+="0123456789abcdef".charAt(u>>>4&15)+"0123456789abcdef".charAt(u&15)}return n.outputUpper?A.toUpperCase():A}function o(q,n){var B="",u=4*q.length,A,x,s;for(A=0;A<u;A+=3){s=(q[A>>>2]>>>8*(3-A%4)&255)<<16|(q[A+1>>>2]>>>8*(3-(A+1)%4)&255)<<8|q[A+2>>>2]>>>8*(3-(A+2)%4)&255;for(x=0;4>x;x+=1){B=8*A+6*x<=32*q.length?B+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s>>>6*(3-x)&63):B+n.b64Pad}}return B}function m(q){var n={outputUpper:!1,b64Pad:"="};try{q.hasOwnProperty("outputUpper")&&(n.outputUpper=q.outputUpper),q.hasOwnProperty("b64Pad")&&(n.b64Pad=q.b64Pad)}catch(s){}"boolean"!==typeof n.outputUpper&&y("Invalid outputUpper formatting option");"string"!==typeof n.b64Pad&&y("Invalid b64Pad formatting option");return n}function l(q,n){var s=w,s=new t(q.a,q.b);return s=32>=n?new t(s.a>>>n|s.b<<32-n&4294967295,s.b>>>n|s.a<<32-n&4294967295):new t(s.b>>>n-32|s.a<<64-n&4294967295,s.a>>>n-32|s.b<<64-n&4294967295)}function j(q,n){var s=w;return s=32>=n?new t(q.a>>>n,q.b>>>n|q.a<<32-n&4294967295):new t(0,q.a>>>n-32)}function i(q,n,s){return new t(q.a&n.a^~q.a&s.a,q.b&n.b^~q.b&s.b)}function f(q,n,s){return new t(q.a&n.a^q.a&s.a^n.a&s.a,q.b&n.b^q.b&s.b^n.b&s.b)}function e(q){var n=l(q,28),s=l(q,34);q=l(q,39);return new t(n.a^s.a^q.a,n.b^s.b^q.b)}function d(q){var n=l(q,14),s=l(q,18);q=l(q,41);return new t(n.a^s.a^q.a,n.b^s.b^q.b)}function c(q){var n=l(q,1),s=l(q,8);q=j(q,7);return new t(n.a^s.a^q.a,n.b^s.b^q.b)}function b(q){var n=l(q,19),s=l(q,61);q=j(q,6);return new t(n.a^s.a^q.a,n.b^s.b^q.b)}function a(q,n){var x,s,u;x=(q.b&65535)+(n.b&65535);s=(q.b>>>16)+(n.b>>>16)+(x>>>16);u=(s&65535)<<16|x&65535;x=(q.a&65535)+(n.a&65535)+(s>>>16);s=(q.a>>>16)+(n.a>>>16)+(x>>>16);return new t((s&65535)<<16|x&65535,u)}function z(q,n,B,u){var A,x,s;A=(q.b&65535)+(n.b&65535)+(B.b&65535)+(u.b&65535);x=(q.b>>>16)+(n.b>>>16)+(B.b>>>16)+(u.b>>>16)+(A>>>16);s=(x&65535)<<16|A&65535;A=(q.a&65535)+(n.a&65535)+(B.a&65535)+(u.a&65535)+(x>>>16);x=(q.a>>>16)+(n.a>>>16)+(B.a>>>16)+(u.a>>>16)+(A>>>16);return new t((x&65535)<<16|A&65535,s)}function h(s,q,C,x,B){var A,u,n;A=(s.b&65535)+(q.b&65535)+(C.b&65535)+(x.b&65535)+(B.b&65535);u=(s.b>>>16)+(q.b>>>16)+(C.b>>>16)+(x.b>>>16)+(B.b>>>16)+(A>>>16);n=(u&65535)<<16|A&65535;A=(s.a&65535)+(q.a&65535)+(C.a&65535)+(x.a&65535)+(B.a&65535)+(u>>>16);u=(s.a>>>16)+(q.a>>>16)+(C.a>>>16)+(x.a>>>16)+(B.a>>>16)+(A>>>16);return new t((u&65535)<<16|A&65535,n)}function g(an,am,ak){var ag,ai,ah,ae,ac,af,ab,Z,I,aj,G,V,ad,F,W,aa,J,H,Y,E,B,x,u,s,al,q,U=[],n,X;"SHA-384"===ak||"SHA-512"===ak?(G=80,ag=(am+128>>>10<<5)+31,F=32,W=2,al=t,aa=a,J=z,H=h,Y=c,E=b,B=e,x=d,s=f,u=i,q=[new al(1116352408,3609767458),new al(1899447441,602891725),new al(3049323471,3964484399),new al(3921009573,2173295548),new al(961987163,4081628472),new al(1508970993,3053834265),new al(2453635748,2937671579),new al(2870763221,3664609560),new al(3624381080,2734883394),new al(310598401,1164996542),new al(607225278,1323610764),new al(1426881987,3590304994),new al(1925078388,4068182383),new al(2162078206,991336113),new al(2614888103,633803317),new al(3248222580,3479774868),new al(3835390401,2666613458),new al(4022224774,944711139),new al(264347078,2341262773),new al(604807628,2007800933),new al(770255983,1495990901),new al(1249150122,1856431235),new al(1555081692,3175218132),new al(1996064986,2198950837),new al(2554220882,3999719339),new al(2821834349,766784016),new al(2952996808,2566594879),new al(3210313671,3203337956),new al(3336571891,1034457026),new al(3584528711,2466948901),new al(113926993,3758326383),new al(338241895,168717936),new al(666307205,1188179964),new al(773529912,1546045734),new al(1294757372,1522805485),new al(1396182291,2643833823),new al(1695183700,2343527390),new al(1986661051,1014477480),new al(2177026350,1206759142),new al(2456956037,344077627),new al(2730485921,1290863460),new al(2820302411,3158454273),new al(3259730800,3505952657),new al(3345764771,106217008),new al(3516065817,3606008344),new al(3600352804,1432725776),new al(4094571909,1467031594),new al(275423344,851169720),new al(430227734,3100823752),new al(506948616,1363258195),new al(659060556,3750685593),new al(883997877,3785050280),new al(958139571,3318307427),new al(1322822218,3812723403),new al(1537002063,2003034995),new al(1747873779,3602036899),new al(1955562222,1575990012),new al(2024104815,1125592928),new al(2227730452,2716904306),new al(2361852424,442776044),new al(2428436474,593698344),new al(2756734187,3733110249),new al(3204031479,2999351573),new al(3329325298,3815920427),new al(3391569614,3928383900),new al(3515267271,566280711),new al(3940187606,3454069534),new al(4118630271,4000239992),new al(116418474,1914138554),new al(174292421,2731055270),new al(289380356,3203993006),new al(460393269,320620315),new al(685471733,587496836),new al(852142971,1086792851),new al(1017036298,365543100),new al(1126000580,2618297676),new al(1288033470,3409855158),new al(1501505948,4234509866),new al(1607167915,987167468),new al(1816402316,1246189591)],aj="SHA-384"===ak?[new al(3418070365,3238371032),new al(1654270250,914150663),new al(2438529370,812702999),new al(355462360,4144912697),new al(1731405415,4290775857),new al(41048885895,1750603025),new al(3675008525,1694076839),new al(1203062813,3204075428)]:[new al(1779033703,4089235720),new al(3144134277,2227873595),new al(1013904242,4271175723),new al(2773480762,1595750129),new al(1359893119,2917565137),new al(2600822924,725511199),new al(528734635,4215389547),new al(1541459225,327033209)]):y("Unexpected error in SHA-2 implementation");an[am>>>5]|=128<<24-am%32;an[ag]=am;n=an.length;for(V=0;V<n;V+=F){am=aj[0];ag=aj[1];ai=aj[2];ah=aj[3];ae=aj[4];ac=aj[5];af=aj[6];ab=aj[7];for(ad=0;ad<G;ad+=1){U[ad]=16>ad?new al(an[ad*W+V],an[ad*W+V+1]):J(E(U[ad-2]),U[ad-7],Y(U[ad-15]),U[ad-16]),Z=H(ab,x(ae),u(ae,ac,af),q[ad],U[ad]),I=aa(B(am),s(am,ag,ai)),ab=af,af=ac,ac=ae,ae=aa(ah,Z),ah=ai,ai=ag,ag=am,am=aa(Z,I)}aj[0]=aa(am,aj[0]);aj[1]=aa(ag,aj[1]);aj[2]=aa(ai,aj[2]);aj[3]=aa(ah,aj[3]);aj[4]=aa(ae,aj[4]);aj[5]=aa(ac,aj[5]);aj[6]=aa(af,aj[6]);aj[7]=aa(ab,aj[7])}"SHA-384"===ak?X=[aj[0].a,aj[0].b,aj[1].a,aj[1].b,aj[2].a,aj[2].b,aj[3].a,aj[3].b,aj[4].a,aj[4].b,aj[5].a,aj[5].b]:"SHA-512"===ak?X=[aj[0].a,aj[0].b,aj[1].a,aj[1].b,aj[2].a,aj[2].b,aj[3].a,aj[3].b,aj[4].a,aj[4].b,aj[5].a,aj[5].b,aj[6].a,aj[6].b,aj[7].a,aj[7].b]:y("Unexpected error in SHA-2 implementation");return X}window.jsSHA=function(D,C,B){var u=w,A=w,x=0,q=[0],n=0,s=w,n="undefined"!==typeof B?B:8;8===n||16===n||y("charSize must be 8 or 16");"HEX"===C?(0!==D.length%2&&y("srcString of HEX type must be in byte increments"),s=k(D),x=s.binLen,q=s.value):"ASCII"===C||"TEXT"===C?(s=p(D,n),x=s.binLen,q=s.value):"B64"===C?(s=v(D),x=s.binLen,q=s.value):y("inputFormat must be HEX, TEXT, ASCII, or B64");this.getHash=function(G,F,J){var I=w,E=q.slice(),H="";switch(F){case"HEX":I=r;break;case"B64":I=o;break;default:y("format must be HEX or B64")}"SHA-384"===G?(w===u&&(u=g(E,x,G)),H=I(u,m(J))):"SHA-512"===G?(w===A&&(A=g(E,x,G)),H=I(A,m(J))):y("Chosen SHA variant is not supported");return H};this.getHMAC=function(P,O,L,K,J){var I,G,H,Q,F,N=[],M=[],E=w;switch(K){case"HEX":I=r;break;case"B64":I=o;break;default:y("outputFormat must be HEX or B64")}"SHA-384"===L?(H=128,F=384):"SHA-512"===L?(H=128,F=512):y("Chosen SHA variant is not supported");"HEX"===O?(E=k(P),Q=E.binLen,G=E.value):"ASCII"===O||"TEXT"===O?(E=p(P,n),Q=E.binLen,G=E.value):"B64"===O?(E=v(P),Q=E.binLen,G=E.value):y("inputFormat must be HEX, TEXT, ASCII, or B64");P=8*H;O=H/4-1;H<Q/8?(G=g(G,Q,L),G[O]&=4294967040):H>Q/8&&(G[O]&=4294967040);for(H=0;H<=O;H+=1){N[H]=G[H]^909522486,M[H]=G[H]^1549556828}L=g(M.concat(g(N.concat(q),P+x,L)),P+F,L);return I(L,m(J))}}})();