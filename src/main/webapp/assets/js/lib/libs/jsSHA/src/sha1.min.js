(function(){function c(k){throw k}function j(l,n){var k=[],m=(1<<n)-1,p=l.length*n,o;for(o=0;o<p;o+=n){k[o>>>5]|=(l.charCodeAt(o/n)&m)<<32-n-o%32}return{value:k,binLen:p}}function i(l){var n=[],k=l.length,m,o;0!==k%2&&c("String of HEX type must be in byte increments");for(m=0;m<k;m+=2){o=parseInt(l.substr(m,2),16),isNaN(o)&&c("String of HEX type contains invalid characters"),n[m>>>3]|=o<<24-4*(m%8)}return{value:n,binLen:4*k}}function h(l){var p=[],k=0,o,r,q,n,m;-1===l.search(/^[a-zA-Z0-9=+\/]+$/)&&c("Invalid character in base-64 string");o=l.indexOf("=");l=l.replace(/\=/g,"");-1!==o&&o<l.length&&c("Invalid '=' found in base-64 string");for(r=0;r<l.length;r+=4){m=l.substr(r,4);for(q=n=0;q<m.length;q+=1){o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(m[q]),n|=o<<18-6*q}for(q=0;q<m.length-1;q+=1){p[k>>2]|=(n>>>16-8*q&255)<<24-8*(k%4),k+=1}}return{value:p,binLen:8*k}}function g(l,n){var k="",m=4*l.length,p,o;for(p=0;p<m;p+=1){o=l[p>>>2]>>>8*(3-p%4),k+="0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(o&15)}return n.outputUpper?k.toUpperCase():k}function f(l,o){var k="",n=4*l.length,q,p,m;for(q=0;q<n;q+=3){m=(l[q>>>2]>>>8*(3-q%4)&255)<<16|(l[q+1>>>2]>>>8*(3-(q+1)%4)&255)<<8|l[q+2>>>2]>>>8*(3-(q+2)%4)&255;for(p=0;4>p;p+=1){k=8*q+6*p<=32*l.length?k+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(m>>>6*(3-p)&63):k+o.b64Pad}}return k}function e(l){var m={outputUpper:!1,b64Pad:"="};try{l.hasOwnProperty("outputUpper")&&(m.outputUpper=l.outputUpper),l.hasOwnProperty("b64Pad")&&(m.b64Pad=l.b64Pad)}catch(k){}"boolean"!==typeof m.outputUpper&&c("Invalid outputUpper formatting option");"string"!==typeof m.b64Pad&&c("Invalid b64Pad formatting option");return m}function d(l,m){var k=(l&65535)+(m&65535);return((l>>>16)+(m>>>16)+(k>>>16)&65535)<<16|k&65535}function b(l,n,k,m,p){var o=(l&65535)+(n&65535)+(k&65535)+(m&65535)+(p&65535);return((l>>>16)+(n>>>16)+(k>>>16)+(m>>>16)+(p>>>16)+(o>>>16)&65535)<<16|o&65535}function a(z,v){var y=[],u,x,w,s,r,m,A,q,k,p=[1732584193,4023233417,2562383102,271733878,3285377520],o=[1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782];z[v>>>5]|=128<<24-v%32;z[(v+65>>>9<<4)+15]=v;k=z.length;for(A=0;A<k;A+=16){u=p[0];x=p[1];w=p[2];s=p[3];r=p[4];for(q=0;80>q;q+=1){y[q]=16>q?z[q+A]:(y[q-3]^y[q-8]^y[q-14]^y[q-16])<<1|(y[q-3]^y[q-8]^y[q-14]^y[q-16])>>>31,m=20>q?b(u<<5|u>>>27,x&w^~x&s,r,o[q],y[q]):40>q?b(u<<5|u>>>27,x^w^s,r,o[q],y[q]):60>q?b(u<<5|u>>>27,x&w^x&s^w&s,r,o[q],y[q]):b(u<<5|u>>>27,x^w^s,r,o[q],y[q]),r=s,s=w,w=x<<30|x>>>2,x=u,u=m}p[0]=d(u,p[0]);p[1]=d(x,p[1]);p[2]=d(w,p[2]);p[3]=d(s,p[3]);p[4]=d(r,p[4])}return p}window.jsSHA=function(l,p,k){var o=null,r=0,q=[0],n=0,m=null,n="undefined"!==typeof k?k:8;8===n||16===n||c("charSize must be 8 or 16");"HEX"===p?(0!==l.length%2&&c("srcString of HEX type must be in byte increments"),m=i(l),r=m.binLen,q=m.value):"ASCII"===p||"TEXT"===p?(m=j(l,n),r=m.binLen,q=m.value):"B64"===p?(m=h(l),r=m.binLen,q=m.value):c("inputFormat must be HEX, TEXT, ASCII, or B64");this.getHash=function(s,t,w){var v=null,u=q.slice(),x="";switch(t){case"HEX":v=g;break;case"B64":v=f;break;default:c("format must be HEX or B64")}"SHA-1"===s?(null===o&&(o=a(u,r)),x=v(o,e(w))):c("Chosen SHA variant is not supported");return x};this.getHMAC=function(A,B,z,y,x){var v,u,w,J,s,I,D=[],C=[],t=null;switch(y){case"HEX":v=g;break;case"B64":v=f;break;default:c("outputFormat must be HEX or B64")}"SHA-1"===z?(w=64,I=160):c("Chosen SHA variant is not supported");"HEX"===B?(t=i(A),s=t.binLen,u=t.value):"ASCII"===B||"TEXT"===B?(t=j(A,n),s=t.binLen,u=t.value):"B64"===B?(t=h(A),s=t.binLen,u=t.value):c("inputFormat must be HEX, TEXT, ASCII, or B64");A=8*w;B=w/4-1;w<s/8?("SHA-1"===z?u=a(u,s):c("Unexpected error in HMAC implementation"),u[B]&=4294967040):w>s/8&&(u[B]&=4294967040);for(w=0;w<=B;w+=1){D[w]=u[w]^909522486,C[w]=u[w]^1549556828}"SHA-1"===z?J=a(C.concat(a(D.concat(q),A+r)),A+I):c("Unexpected error in HMAC implementation");return v(J,e(x))}}})();