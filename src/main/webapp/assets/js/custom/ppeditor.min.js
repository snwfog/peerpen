!function(b){var a=function(d,c){this.element=b(d);this.picker=b('<div class="slider"><div class="slider-track"><div class="slider-selection"></div><div class="slider-handle"></div><div class="slider-handle"></div></div><div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div></div>').insertBefore(this.element).append(this.element);this.id=this.element.data("slider-id")||c.id;if(this.id){this.picker[0].id=this.id}if(typeof Modernizr!=="undefined"&&Modernizr.touch){this.touchCapable=true}var f=this.element.data("slider-tooltip")||c.tooltip;this.tooltip=this.picker.find(".tooltip");this.tooltipInner=this.tooltip.find("div.tooltip-inner");this.orientation=this.element.data("slider-orientation")||c.orientation;switch(this.orientation){case"vertical":this.picker.addClass("slider-vertical");this.stylePos="top";this.mousePos="pageY";this.sizePos="offsetHeight";this.tooltip.addClass("right")[0].style.left="100%";break;default:this.picker.addClass("slider-horizontal").css("width",this.element.outerWidth());this.orientation="horizontal";this.stylePos="left";this.mousePos="pageX";this.sizePos="offsetWidth";this.tooltip.addClass("top")[0].style.top=-this.tooltip.outerHeight()-14+"px";break}this.min=this.element.data("slider-min")||c.min;this.max=this.element.data("slider-max")||c.max;this.step=this.element.data("slider-step")||c.step;this.value=this.element.data("slider-value")||c.value;if(this.value[1]){this.range=true}this.selection=this.element.data("slider-selection")||c.selection;this.selectionEl=this.picker.find(".slider-selection");if(this.selection==="none"){this.selectionEl.addClass("hide")}this.selectionElStyle=this.selectionEl[0].style;this.handle1=this.picker.find(".slider-handle:first");this.handle1Stype=this.handle1[0].style;this.handle2=this.picker.find(".slider-handle:last");this.handle2Stype=this.handle2[0].style;var e=this.element.data("slider-handle")||c.handle;switch(e){case"round":this.handle1.addClass("round");this.handle2.addClass("round");break;case"triangle":this.handle1.addClass("triangle");this.handle2.addClass("triangle");break}if(this.range){this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0]));this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))}else{this.value=[Math.max(this.min,Math.min(this.max,this.value))];this.handle2.addClass("hide");if(this.selection=="after"){this.value[1]=this.max}else{this.value[1]=this.min}}this.diff=this.max-this.min;this.percentage=[(this.value[0]-this.min)*100/this.diff,(this.value[1]-this.min)*100/this.diff,this.step*100/this.diff];this.offset=this.picker.offset();this.size=this.picker[0][this.sizePos];this.formater=c.formater;this.layout();if(this.touchCapable){this.picker.on({touchstart:b.proxy(this.mousedown,this)})}else{this.picker.on({mousedown:b.proxy(this.mousedown,this)})}if(f==="show"){this.picker.on({mouseenter:b.proxy(this.showTooltip,this),mouseleave:b.proxy(this.hideTooltip,this)})}else{this.tooltip.addClass("hide")}};a.prototype={constructor:a,over:false,inDrag:false,showTooltip:function(){this.tooltip.addClass("in");this.over=true},hideTooltip:function(){if(this.inDrag===false){this.tooltip.removeClass("in")}this.over=false},layout:function(){this.handle1Stype[this.stylePos]=this.percentage[0]+"%";this.handle2Stype[this.stylePos]=this.percentage[1]+"%";if(this.orientation=="vertical"){this.selectionElStyle.top=Math.min(this.percentage[0],this.percentage[1])+"%";this.selectionElStyle.height=Math.abs(this.percentage[0]-this.percentage[1])+"%"}else{this.selectionElStyle.left=Math.min(this.percentage[0],this.percentage[1])+"%";this.selectionElStyle.width=Math.abs(this.percentage[0]-this.percentage[1])+"%"}if(this.range){this.tooltipInner.text(this.formater(this.value[0])+" : "+this.formater(this.value[1]));this.tooltip[0].style[this.stylePos]=this.size*(this.percentage[0]+(this.percentage[1]-this.percentage[0])/2)/100-(this.orientation==="vertical"?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+"px"}else{this.tooltipInner.text(this.formater(this.value[0]));this.tooltip[0].style[this.stylePos]=this.size*this.percentage[0]/100-(this.orientation==="vertical"?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+"px"}},mousedown:function(d){if(this.touchCapable&&d.type==="touchstart"){d=d.originalEvent}this.offset=this.picker.offset();this.size=this.picker[0][this.sizePos];var c=this.getPercentage(d);if(this.range){var g=Math.abs(this.percentage[0]-c);var e=Math.abs(this.percentage[1]-c);this.dragged=(g<e)?0:1}else{this.dragged=0}this.percentage[this.dragged]=c;this.layout();if(this.touchCapable){b(document).on({touchmove:b.proxy(this.mousemove,this),touchend:b.proxy(this.mouseup,this)})}else{b(document).on({mousemove:b.proxy(this.mousemove,this),mouseup:b.proxy(this.mouseup,this)})}this.inDrag=true;var f=this.calculateValue();this.element.trigger({type:"slideStart",value:f}).trigger({type:"slide",value:f});return false},mousemove:function(d){if(this.touchCapable&&d.type==="touchmove"){d=d.originalEvent}var c=this.getPercentage(d);if(this.range){if(this.dragged===0&&this.percentage[1]<c){this.percentage[0]=this.percentage[1];this.dragged=1}else{if(this.dragged===1&&this.percentage[0]>c){this.percentage[1]=this.percentage[0];this.dragged=0}}}this.percentage[this.dragged]=c;this.layout();var e=this.calculateValue();this.element.trigger({type:"slide",value:e}).data("value",e).prop("value",e);return false},mouseup:function(c){if(this.touchCapable){b(document).off({touchmove:this.mousemove,touchend:this.mouseup})}else{b(document).off({mousemove:this.mousemove,mouseup:this.mouseup})}this.inDrag=false;if(this.over==false){this.hideTooltip()}this.element;var d=this.calculateValue();this.element.trigger({type:"slideStop",value:d}).data("value",d).prop("value",d);return false},calculateValue:function(){var c;if(this.range){c=[(this.min+Math.round((this.diff*this.percentage[0]/100)/this.step)*this.step),(this.min+Math.round((this.diff*this.percentage[1]/100)/this.step)*this.step)];this.value=c}else{c=(this.min+Math.round((this.diff*this.percentage[0]/100)/this.step)*this.step);this.value=[c,this.value[1]]}return c},getPercentage:function(d){if(this.touchCapable){d=d.touches[0]}var c=(d[this.mousePos]-this.offset[this.stylePos])*100/this.size;c=Math.round(c/this.percentage[2])*this.percentage[2];return Math.max(0,Math.min(100,c))},getValue:function(){if(this.range){return this.value}return this.value[0]},setValue:function(c){this.value=c;if(this.range){this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0]));this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))}else{this.value=[Math.max(this.min,Math.min(this.max,this.value))];this.handle2.addClass("hide");if(this.selection=="after"){this.value[1]=this.max}else{this.value[1]=this.min}}this.diff=this.max-this.min;this.percentage=[(this.value[0]-this.min)*100/this.diff,(this.value[1]-this.min)*100/this.diff,this.step*100/this.diff];this.layout()}};b.fn.slider=function(c,d){return this.each(function(){var g=b(this),f=g.data("slider"),e=typeof c==="object"&&c;if(!f){g.data("slider",(f=new a(this,b.extend({},b.fn.slider.defaults,e))))}if(typeof c=="string"){f[c](d)}})};b.fn.slider.defaults={min:0,max:10,step:1,orientation:"horizontal",value:5,selection:"before",tooltip:"show",handle:"round",formater:function(c){return c}};b.fn.slider.Constructor=a}(window.jQuery);(function(e){var h=function(){var L='<div class="colpick"><div class="colpick_color"><div class="colpick_color_overlay1"><div class="colpick_color_overlay2"><div class="colpick_selector_outer"><div class="colpick_selector_inner"></div></div></div></div></div><div class="colpick_hue"><div class="colpick_hue_arrs"><div class="colpick_hue_larr"></div><div class="colpick_hue_rarr"></div></div></div><div class="colpick_new_color"></div><div class="colpick_current_color"></div><div class="colpick_hex_field"><div class="colpick_field_letter">#</div><input type="text" maxlength="6" size="6" /></div><div class="colpick_rgb_r colpick_field"><div class="colpick_field_letter">R</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_g colpick_field"><div class="colpick_field_letter">G</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_h colpick_field"><div class="colpick_field_letter">H</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_s colpick_field"><div class="colpick_field_letter">S</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_submit"></div></div>',q={showEvent:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},colorScheme:"light",color:"3289c7",livePreview:true,flat:false,layout:"full",submit:1,submitText:"OK",height:156},D=function(M,O){var N=f(M);e(O).data("colpick").fields.eq(1).val(N.r).end().eq(2).val(N.g).end().eq(3).val(N.b).end()},p=function(M,N){e(N).data("colpick").fields.eq(4).val(Math.round(M.h)).end().eq(5).val(Math.round(M.s)).end().eq(6).val(Math.round(M.b)).end()},s=function(M,N){e(N).data("colpick").fields.eq(0).val(a(M))},H=function(M,N){e(N).data("colpick").selector.css("backgroundColor","#"+a({h:M.h,s:100,b:100}));e(N).data("colpick").selectorIndic.css({left:parseInt(e(N).data("colpick").height*M.s/100,10),top:parseInt(e(N).data("colpick").height*(100-M.b)/100,10)})},m=function(M,N){e(N).data("colpick").hue.css("top",parseInt(e(N).data("colpick").height-e(N).data("colpick").height*M.h/360,10))},l=function(M,N){e(N).data("colpick").currentColor.css("backgroundColor","#"+a(M))},w=function(M,N){e(N).data("colpick").newColor.css("backgroundColor","#"+a(M))},u=function(N){var O=e(this).parent().parent(),M;if(this.parentNode.className.indexOf("_hex")>0){O.data("colpick").color=M=g(A(this.value));D(M,O.get(0));p(M,O.get(0))}else{if(this.parentNode.className.indexOf("_hsb")>0){O.data("colpick").color=M=B({h:parseInt(O.data("colpick").fields.eq(4).val(),10),s:parseInt(O.data("colpick").fields.eq(5).val(),10),b:parseInt(O.data("colpick").fields.eq(6).val(),10)});D(M,O.get(0));s(M,O.get(0))}else{O.data("colpick").color=M=b(n({r:parseInt(O.data("colpick").fields.eq(1).val(),10),g:parseInt(O.data("colpick").fields.eq(2).val(),10),b:parseInt(O.data("colpick").fields.eq(3).val(),10)}));s(M,O.get(0));p(M,O.get(0))}}H(M,O.get(0));m(M,O.get(0));w(M,O.get(0));O.data("colpick").onChange.apply(O.parent(),[M,a(M),f(M)])},z=function(M){e(this).parent().removeClass("colpick_focus")},v=function(){e(this).parent().parent().data("colpick").fields.parent().removeClass("colpick_focus");e(this).parent().addClass("colpick_focus")},k=function(M){M.preventDefault?M.preventDefault():M.returnValue=false;var O=e(this).parent().find("input").focus();var N={el:e(this).parent().addClass("colpick_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:(this.parentNode.className.indexOf("_hsb")>0?100:255),y:M.pageY,field:O,val:parseInt(O.val(),10),preview:e(this).parent().parent().data("colpick").livePreview};e(document).mouseup(N,y);e(document).mousemove(N,E)},E=function(M){M.data.field.val(Math.max(0,Math.min(M.data.max,parseInt(M.data.val-M.pageY+M.data.y,10))));if(M.data.preview){u.apply(M.data.field.get(0),[true])}return false},y=function(M){u.apply(M.data.field.get(0),[true]);M.data.el.removeClass("colpick_slider").find("input").focus();e(document).off("mouseup",y);e(document).off("mousemove",E);return false},K=function(M){M.preventDefault?M.preventDefault():M.returnValue=false;var N={cal:e(this).parent(),y:e(this).offset().top};N.preview=N.cal.data("colpick").livePreview;e(document).mouseup(N,o);e(document).mousemove(N,r);u.apply(N.cal.data("colpick").fields.eq(4).val(parseInt(360*(N.cal.data("colpick").height-(M.pageY-N.y))/N.cal.data("colpick").height,10)).get(0),[N.preview])},r=function(M){u.apply(M.data.cal.data("colpick").fields.eq(4).val(parseInt(360*(M.data.cal.data("colpick").height-Math.max(0,Math.min(M.data.cal.data("colpick").height,(M.pageY-M.data.y))))/M.data.cal.data("colpick").height,10)).get(0),[M.data.preview]);return false},o=function(M){D(M.data.cal.data("colpick").color,M.data.cal.get(0));s(M.data.cal.data("colpick").color,M.data.cal.get(0));e(document).off("mouseup",o);e(document).off("mousemove",r);return false},F=function(M){M.preventDefault?M.preventDefault():M.returnValue=false;var N={cal:e(this).parent(),pos:e(this).offset()};N.preview=N.cal.data("colpick").livePreview;e(document).mouseup(N,J);e(document).mousemove(N,j);u.apply(N.cal.data("colpick").fields.eq(6).val(parseInt(100*(N.cal.data("colpick").height-(M.pageY-N.pos.top))/N.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*(M.pageX-N.pos.left)/N.cal.data("colpick").height,10)).get(0),[N.preview])},j=function(M){u.apply(M.data.cal.data("colpick").fields.eq(6).val(parseInt(100*(M.data.cal.data("colpick").height-Math.max(0,Math.min(M.data.cal.data("colpick").height,(M.pageY-M.data.pos.top))))/M.data.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*(Math.max(0,Math.min(M.data.cal.data("colpick").height,(M.pageX-M.data.pos.left))))/M.data.cal.data("colpick").height,10)).get(0),[M.data.preview]);return false},J=function(M){D(M.data.cal.data("colpick").color,M.data.cal.get(0));s(M.data.cal.data("colpick").color,M.data.cal.get(0));e(document).off("mouseup",J);e(document).off("mousemove",j);return false},x=function(N){var O=e(this).parent();var M=O.data("colpick").color;O.data("colpick").origColor=M;l(M,O.get(0));O.data("colpick").onSubmit(M,a(M),f(M),O.data("colpick").el)},I=function(M){var Q=e("#"+e(this).data("colpickId"));Q.data("colpick").onBeforeShow.apply(this,[Q.get(0)]);var R=e(this).offset();var P=R.top+this.offsetHeight;var O=R.left;var N=C();if(O+346>N.l+N.w){O-=346}Q.css({left:O+"px",top:P+"px"});if(Q.data("colpick").onShow.apply(this,[Q.get(0)])!=false){Q.show()}e("html").mousedown({cal:Q},t);Q.mousedown(function(S){S.stopPropagation()})},t=function(M){if(M.data.cal.data("colpick").onHide.apply(this,[M.data.cal.get(0)])!=false){M.data.cal.hide()}e("html").off("mousedown",t)},C=function(){var M=document.compatMode=="CSS1Compat";return{l:window.pageXOffset||(M?document.documentElement.scrollLeft:document.body.scrollLeft),w:window.innerWidth||(M?document.documentElement.clientWidth:document.body.clientWidth)}},B=function(M){return{h:Math.min(360,Math.max(0,M.h)),s:Math.min(100,Math.max(0,M.s)),b:Math.min(100,Math.max(0,M.b))}},n=function(M){return{r:Math.min(255,Math.max(0,M.r)),g:Math.min(255,Math.max(0,M.g)),b:Math.min(255,Math.max(0,M.b))}},A=function(O){var M=6-O.length;if(M>0){var P=[];for(var N=0;N<M;N++){P.push("0")}P.push(O);O=P.join("")}return O},G=function(){var N=e(this).parent();var M=N.data("colpick").origColor;N.data("colpick").color=M;D(M,N.get(0));s(M,N.get(0));p(M,N.get(0));H(M,N.get(0));m(M,N.get(0));w(M,N.get(0))};return{init:function(M){M=e.extend({},q,M||{});if(typeof M.color=="string"){M.color=g(M.color)}else{if(M.color.r!=undefined&&M.color.g!=undefined&&M.color.b!=undefined){M.color=b(M.color)}else{if(M.color.h!=undefined&&M.color.s!=undefined&&M.color.b!=undefined){M.color=B(M.color)}else{return this}}}return this.each(function(){if(!e(this).data("colpickId")){var W=e.extend({},M);W.origColor=M.color;var P="collorpicker_"+parseInt(Math.random()*1000);e(this).data("colpickId",P);var O=e(L).attr("id",P);O.addClass("colpick_"+W.layout+(W.submit?"":" colpick_"+W.layout+"_ns"));if(W.colorScheme!="light"){O.addClass("colpick_"+W.colorScheme)}O.find("div.colpick_submit").html(W.submitText).click(x);W.fields=O.find("input").change(u).blur(z).focus(v);O.find("div.colpick_field_arrs").mousedown(k).end().find("div.colpick_current_color").click(G);W.selector=O.find("div.colpick_color").mousedown(F);W.selectorIndic=W.selector.find("div.colpick_selector_outer");W.el=this;W.hue=O.find("div.colpick_hue_arrs");huebar=W.hue.parent();var U=navigator.userAgent.toLowerCase();var Q=navigator.appName==="Microsoft Internet Explorer";var R=Q?parseFloat(U.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0;var S=(Q&&R<10);var V=["#ff0000","#ff0080","#ff00ff","#8000ff","#0000ff","#0080ff","#00ffff","#00ff80","#00ff00","#80ff00","#ffff00","#ff8000","#ff0000"];if(S){var T,N;for(T=0;T<=11;T++){N=e("<div></div>").attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+V[T]+", endColorstr="+V[T+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+V[T]+", endColorstr="+V[T+1]+')";');huebar.append(N)}}else{stopList=V.join(",");huebar.attr("style","background:-webkit-linear-gradient(top center,"+stopList+"); background:-moz-linear-gradient(top center,"+stopList+"); background:linear-gradient(to bottom,"+stopList+"); ");huebar.css({background:"linear-gradient(to bottom,"+stopList+")"});huebar.css({background:"-moz-linear-gradient(top,"+stopList+")"})}O.find("div.colpick_hue").mousedown(K);W.newColor=O.find("div.colpick_new_color");W.currentColor=O.find("div.colpick_current_color");O.data("colpick",W);D(W.color,O.get(0));p(W.color,O.get(0));s(W.color,O.get(0));m(W.color,O.get(0));H(W.color,O.get(0));l(W.color,O.get(0));w(W.color,O.get(0));if(W.flat){O.appendTo(this).show();O.css({position:"relative",display:"block"})}else{O.appendTo(document.body);e(this).on(W.showEvent,I);O.css({position:"absolute"})}}})},showPicker:function(){return this.each(function(){if(e(this).data("colpickId")){I.apply(this)}})},hidePicker:function(){return this.each(function(){if(e(this).data("colpickId")){e("#"+e(this).data("colpickId")).hide()}})},setColor:function(M,N){N=(typeof N==="undefined")?1:N;if(typeof M=="string"){M=g(M)}else{if(M.r!=undefined&&M.g!=undefined&&M.b!=undefined){M=b(M)}else{if(M.h!=undefined&&M.s!=undefined&&M.b!=undefined){M=B(M)}else{return this}}}return this.each(function(){if(e(this).data("colpickId")){var O=e("#"+e(this).data("colpickId"));O.data("colpick").color=M;O.data("colpick").origColor=M;D(M,O.get(0));p(M,O.get(0));s(M,O.get(0));m(M,O.get(0));H(M,O.get(0));w(M,O.get(0));O.data("colpick").onChange.apply(O.parent(),[M,a(M),f(M),1]);if(N){l(M,O.get(0))}}})}}}();var c=function(j){var j=parseInt(((j.indexOf("#")>-1)?j.substring(1):j),16);return{r:j>>16,g:(j&65280)>>8,b:(j&255)}};var g=function(j){return b(c(j))};var b=function(l){var k={h:0,s:0,b:0};var m=Math.min(l.r,l.g,l.b);var j=Math.max(l.r,l.g,l.b);var n=j-m;k.b=j;k.s=j!=0?255*n/j:0;if(k.s!=0){if(l.r==j){k.h=(l.g-l.b)/n}else{if(l.g==j){k.h=2+(l.b-l.r)/n}else{k.h=4+(l.r-l.g)/n}}}else{k.h=-1}k.h*=60;if(k.h<0){k.h+=360}k.s*=100/255;k.b*=100/255;return k};var f=function(j){var l={};var p=Math.round(j.h);var o=Math.round(j.s*255/100);var k=Math.round(j.b*255/100);if(o==0){l.r=l.g=l.b=k}else{var q=k;var n=(255-o)*k/255;var m=(q-n)*(p%60)/60;if(p==360){p=0}if(p<60){l.r=q;l.b=n;l.g=n+m}else{if(p<120){l.g=q;l.b=n;l.r=q-m}else{if(p<180){l.g=q;l.r=n;l.b=n+m}else{if(p<240){l.b=q;l.r=n;l.g=q-m}else{if(p<300){l.b=q;l.g=n;l.r=n+m}else{if(p<360){l.r=q;l.g=n;l.b=q-m}else{l.r=0;l.g=0;l.b=0}}}}}}}return{r:Math.round(l.r),g:Math.round(l.g),b:Math.round(l.b)}};var d=function(j){var k=[j.r.toString(16),j.g.toString(16),j.b.toString(16)];e.each(k,function(l,m){if(m.length==1){k[l]="0"+m}});return k.join("")};var a=function(j){return d(f(j))};e.fn.extend({colpick:h.init,colpickHide:h.hidePicker,colpickShow:h.showPicker,colpickSetColor:h.setColor});e.extend({colpickRgbToHex:d,colpickRgbToHsb:b,colpickHsbToHex:a,colpickHsbToRgb:f,colpickHexToHsb:g,colpickHexToRgb:c})})(jQuery);(function(){function x(n){throw n}var u=null;function q(r,n){var z=[],t=(1<<n)-1,y=r.length*n,w;for(w=0;w<y;w+=n){z[w>>>5]|=(r.charCodeAt(w/n)&t)<<32-n-w%32}return{value:z,binLen:y}}function l(r){var n=[],y=r.length,t,w;0!==y%2&&x("String of HEX type must be in byte increments");for(t=0;t<y;t+=2){w=parseInt(r.substr(t,2),16),isNaN(w)&&x("String of HEX type contains invalid characters"),n[t>>>3]|=w<<24-4*(t%8)}return{value:n,binLen:4*y}}function v(t){var n=[],B=0,y,A,z,w,r;-1===t.search(/^[a-zA-Z0-9=+\/]+$/)&&x("Invalid character in base-64 string");y=t.indexOf("=");t=t.replace(/\=/g,"");-1!==y&&y<t.length&&x("Invalid '=' found in base-64 string");for(A=0;A<t.length;A+=4){r=t.substr(A,4);for(z=w=0;z<r.length;z+=1){y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(r[z]),w|=y<<18-6*z}for(z=0;z<r.length-1;z+=1){n[B>>2]|=(w>>>16-8*z&255)<<24-8*(B%4),B+=1}}return{value:n,binLen:8*B}}function s(r,n){var z="",t=4*r.length,y,w;for(y=0;y<t;y+=1){w=r[y>>>2]>>>8*(3-y%4),z+="0123456789abcdef".charAt(w>>>4&15)+"0123456789abcdef".charAt(w&15)}return n.outputUpper?z.toUpperCase():z}function p(r,n){var A="",w=4*r.length,z,y,t;for(z=0;z<w;z+=3){t=(r[z>>>2]>>>8*(3-z%4)&255)<<16|(r[z+1>>>2]>>>8*(3-(z+1)%4)&255)<<8|r[z+2>>>2]>>>8*(3-(z+2)%4)&255;for(y=0;4>y;y+=1){A=8*z+6*y<=32*r.length?A+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t>>>6*(3-y)&63):A+n.b64Pad}}return A}function o(r){var n={outputUpper:!1,b64Pad:"="};try{r.hasOwnProperty("outputUpper")&&(n.outputUpper=r.outputUpper),r.hasOwnProperty("b64Pad")&&(n.b64Pad=r.b64Pad)}catch(t){}"boolean"!==typeof n.outputUpper&&x("Invalid outputUpper formatting option");"string"!==typeof n.b64Pad&&x("Invalid b64Pad formatting option");return n}function m(r,n){return r>>>n|r<<32-n}function k(r,n,t){return r&n^~r&t}function j(r,n,t){return r&n^r&t^n&t}function g(n){return m(n,2)^m(n,13)^m(n,22)}function f(n){return m(n,6)^m(n,11)^m(n,25)}function e(n){return m(n,7)^m(n,18)^n>>>3}function d(n){return m(n,17)^m(n,19)^n>>>10}function c(r,n){var t=(r&65535)+(n&65535);return((r>>>16)+(n>>>16)+(t>>>16)&65535)<<16|t&65535}function b(r,n,y,t){var w=(r&65535)+(n&65535)+(y&65535)+(t&65535);return((r>>>16)+(n>>>16)+(y>>>16)+(t>>>16)+(w>>>16)&65535)<<16|w&65535}function a(r,n,z,t,y){var w=(r&65535)+(n&65535)+(z&65535)+(t&65535)+(y&65535);return((r>>>16)+(n>>>16)+(z>>>16)+(t>>>16)+(y>>>16)+(w>>>16)&65535)<<16|w&65535}function h(an,am,al){var ai,ak,aj,ae,ad,af,G,aa,U,ah,S,W,ag,ac,X,ab,T,H,Z,F,E,D,A,w,t,r,V=[],n,Y;"SHA-224"===al||"SHA-256"===al?(S=64,ac=16,X=1,t=Number,ab=c,T=b,H=a,Z=e,F=d,E=g,D=f,w=j,A=k,r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ah="SHA-224"===al?[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]:[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]):x("Unexpected error in SHA-2 implementation");an[am>>>5]|=128<<24-am%32;an[(am+65>>>9<<4)+15]=am;n=an.length;for(W=0;W<n;W+=ac){am=ah[0];ai=ah[1];ak=ah[2];aj=ah[3];ae=ah[4];ad=ah[5];af=ah[6];G=ah[7];for(ag=0;ag<S;ag+=1){V[ag]=16>ag?new t(an[ag*X+W],an[ag*X+W+1]):T(F(V[ag-2]),V[ag-7],Z(V[ag-15]),V[ag-16]),aa=H(G,D(ae),A(ae,ad,af),r[ag],V[ag]),U=ab(E(am),w(am,ai,ak)),G=af,af=ad,ad=ae,ae=ab(aj,aa),aj=ak,ak=ai,ai=am,am=ab(aa,U)}ah[0]=ab(am,ah[0]);ah[1]=ab(ai,ah[1]);ah[2]=ab(ak,ah[2]);ah[3]=ab(aj,ah[3]);ah[4]=ab(ae,ah[4]);ah[5]=ab(ad,ah[5]);ah[6]=ab(af,ah[6]);ah[7]=ab(G,ah[7])}"SHA-224"===al?Y=[ah[0],ah[1],ah[2],ah[3],ah[4],ah[5],ah[6]]:"SHA-256"===al?Y=ah:x("Unexpected error in SHA-2 implementation");return Y}window.jsSHA=function(C,B,A){var w=u,z=u,y=0,r=[0],n=0,t=u,n="undefined"!==typeof A?A:8;8===n||16===n||x("charSize must be 8 or 16");"HEX"===B?(0!==C.length%2&&x("srcString of HEX type must be in byte increments"),t=l(C),y=t.binLen,r=t.value):"ASCII"===B||"TEXT"===B?(t=q(C,n),y=t.binLen,r=t.value):"B64"===B?(t=v(C),y=t.binLen,r=t.value):x("inputFormat must be HEX, TEXT, ASCII, or B64");this.getHash=function(F,D,I){var H=u,E=r.slice(),G="";switch(D){case"HEX":H=s;break;case"B64":H=p;break;default:x("format must be HEX or B64")}"SHA-224"===F?(u===w&&(w=h(E,y,F)),G=H(w,o(I))):"SHA-256"===F?(u===z&&(z=h(E,y,F)),G=H(z,o(I))):x("Chosen SHA variant is not supported");return G};this.getHMAC=function(O,M,K,J,I){var G,H,F,P,E,N=[],L=[],D=u;switch(J){case"HEX":G=s;break;case"B64":G=p;break;default:x("outputFormat must be HEX or B64")}"SHA-224"===K?(F=64,E=224):"SHA-256"===K?(F=64,E=256):x("Chosen SHA variant is not supported");"HEX"===M?(D=l(O),P=D.binLen,H=D.value):"ASCII"===M||"TEXT"===M?(D=q(O,n),P=D.binLen,H=D.value):"B64"===M?(D=v(O),P=D.binLen,H=D.value):x("inputFormat must be HEX, TEXT, ASCII, or B64");O=8*F;M=F/4-1;F<P/8?(H=h(H,P,K),H[M]&=4294967040):F>P/8&&(H[M]&=4294967040);for(F=0;F<=M;F+=1){N[F]=H[F]^909522486,L[F]=H[F]^1549556828}K=h(L.concat(h(N.concat(r),O+y,K)),O+E,K);return G(K,o(I))}}})();var CSSJSON=new function(){var c=this;c.init=function(){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.repeat=function(p){return new Array(1+p).join(this)}};c.init();var h=/([^\s\;\{\}][^\;\{\}]*)\{/g;var n=/\}/g;var d=/([^\;\{\}]*)\;/g;var l=/\/\*[\s\S]*?\*\//g;var g=/([^\:]+):([^\;]*);/;var o=/(\/\*[\s\S]*?\*\/)|([^\s\;\{\}][^\;\{\}]*(?=\{))|(\})|([^\;\{\}]+\;(?!\s*\*\/))/gmi;var j=1;var f=2;var b=3;var k=4;var e=function(p){return typeof p=="undefined"||p.length==0||p==null};c.toJSON=function(s,y){var t={children:{},attributes:{}};var v=null;var w=0;if(typeof y=="undefined"){var y={ordered:false,comments:false,stripComments:false,split:false}}if(y.stripComments){y.comments=false;s=s.replace(l,"")}while((v=o.exec(s))!=null){if(!e(v[j])&&y.comments){var D=v[j].trim();t[w++]=D}else{if(!e(v[f])){var p=v[f].trim();var B=c.toJSON(s,y);if(y.ordered){var u={};u.name=p;u.value=B;u.type="rule";t[w++]=u}else{if(y.split){var C=p.split(",")}else{var C=[p]}for(i in C){var q=C[i].trim();if(q in t.children){for(var z in B.attributes){t.children[q].attributes[z]=B.attributes[z]}}else{t.children[q]=B}}}}else{if(!e(v[b])){return t}else{if(!e(v[k])){var E=v[k].trim();var x=g.exec(E);if(x){var p=x[1].trim();var A=x[2].trim();if(y.ordered){var u={};u.name=p;u.value=A;u.type="attr";t[w++]=u}else{if(p in t.attributes){var r=t.attributes[p];if(!(r instanceof Array)){t.attributes[p]=[r]}t.attributes[p].push(A)}else{t.attributes[p]=A}}}else{t[w++]=E}}}}}}return t};c.toCSS=function(t,v,s){var r="";if(typeof v=="undefined"){v=0}if(typeof s=="undefined"){s=false}if(t.attributes){for(i in t.attributes){var p=t.attributes[i];if(p instanceof Array){for(var q=0;q<p.length;q++){r+=a(i,p[q],v)}}else{r+=a(i,p,v)}}}if(t.children){var u=true;for(i in t.children){if(s&&!u){r+="\n"}else{u=false}r+=m(i,t.children[i],v)}}return r};var a=function(p,q,r){return"\t".repeat(r)+p+": "+q+";\n"};var m=function(p,r,s){var q="\t".repeat(s)+p+" {\n";q+=c.toCSS(r,s+1);q+="\t".repeat(s)+"}\n";return q}};(function(){var f,C,F,p,x,A,c,v,g,E,n,D,k,u,d,s,z,a,r,I,j,w,h,H,y,q,m,b,e,o,B,l,t={}.hasOwnProperty,G=function(M,K){for(var J in K){if(t.call(K,J)){M[J]=K[J]}}function L(){this.constructor=M}L.prototype=K.prototype;M.prototype=new L();M.__super__=K.prototype;return M};D=(function(){function J(){this.boxIds=[]}J.prototype.undo=function(){};J.prototype.execute=function(){};J.prototype.getType=function(){};J.prototype.getPageNum=function(){};return J})();w=(function(){function J(K){this.root=K;this.element=void 0}J.prototype.buildElement=function(){};J.prototype.bindEvents=function(){};return J})();j=(function(){function J(){}J.rectContainsRect=function(K,L){return L.topLeft.left>=K.topLeft.left&&L.topLeft.top>=K.topLeft.top&&L.topLeft.left+L.size.width<=K.topLeft.left+K.size.width&&L.topLeft.top+L.size.height<=K.topLeft.top+K.size.height};J.rectContainsPoint=function(L,K){return K.left>=L.topLeft.left&&K.top>=L.topLeft.top&&K.left<=L.topLeft.left+L.size.width&&K.top<=L.topLeft.top+L.size.height};J.pointEqualToPoint=function(L,K){return L.left===K.left&&L.top===K.top};return J})();H=(function(){function J(){}J.C=67;J.V=86;J.Z=90;J.Y=89;J.DELETE=46;J.SHIFT=16;J.MAC_CMD_LEFT=91;J.MAC_CMD_RIGHT=93;J.MAC_DELETE=8;return J})();e=(function(){function J(K){this.root=K}J.prototype.bindEvents=function(){var K=this;return this.root.keydown(function(L){if(L.keyCode===H.Z&&L.ctrlKey){L.preventDefault();K.root.trigger("requestUndo")}if(L.keyCode===H.Y&&L.ctrlKey){L.preventDefault();K.root.trigger("requestRedo")}if(L.keyCode===H.DELETE||(L.keyCode===H.DELETE&&L.ctrlKey)){L.preventDefault();K.root.trigger("requestDelete")}if(L.keyCode===H.C&&L.ctrlKey&&L.shiftKey){L.preventDefault();K.root.trigger("requestCopy")}if(L.keyCode===H.V&&L.ctrlKey&&L.shiftKey){L.preventDefault();return K.root.trigger("requestPaste")}})};return J})();q=(function(){function J(K){this.root=K;this.leftCmdKeyPressed=false;this.rightCmdKeyPressed=false}J.prototype.bindEvents=function(){var K=this;return this.root.keydown(function(L){if(L.keyCode===H.MAC_CMD_LEFT){return K.leftCmdKeyPressed=true}else{if(L.keyCode===H.Z&&K._cmdKeyIsPressed()){L.preventDefault();return K.root.trigger("requestUndo")}else{if(L.keyCode===H.Y&&K._cmdKeyIsPressed()){L.preventDefault();return K.root.trigger("requestRedo")}else{if(L.keyCode===H.MAC_DELETE&&K._cmdKeyIsPressed()){L.preventDefault();return K.root.trigger("requestDelete")}else{if(L.keyCode===H.C&&K._cmdKeyIsPressed()&&L.shiftKey){L.preventDefault();return K.root.trigger("requestCopy")}else{if(L.keyCode===H.V&&K._cmdKeyIsPressed()&&L.shiftKey){L.preventDefault();return K.root.trigger("requestPaste")}}}}}}}).keyup(function(L){if(L.keyCode===H.MAC_CMD_LEFT){K.leftCmdKeyPressed=false}if(L.keyCode===H.MAC_CMD_RIGHT){K.rightCmdKeyPressed=false}if(L.keyCode===H.SHIFT){return K.shiftKeyPressed=false}})};J.prototype._cmdKeyIsPressed=function(){return this.rightCmdKeyPressed||this.leftCmdKeyPressed};return J})();s=(function(){function J(){}J.getController=function(K){if(navigator.userAgent.match(/Macintosh/)!==null){return new q(K)}else{return new e(K)}};return J})();F=(function(){function J(K){this.graphic=K;this.controller=void 0;this.content=void 0}J.prototype.bindEvents=function(){var K=this;this.controller=s.getController(this.graphic.element);this.graphic.element.on("requestUndo",function(L){K._checkNewContent(false);return L.stopPropagation()}).focus(function(L){return K._checkNewContent(true)}).blur(function(L){return K._checkNewContent(true)});return this.controller.bindEvents()};J.prototype._checkNewContent=function(L){var K;K=this.graphic.element.html();if((this.content!=null)&&this.content!==K){this.graphic.element.trigger("graphicContentChanged",[{graphic:this.graphic,prevContent:this.content,newContent:K}])}return this.content=L?K:void 0};return J})();C=(function(K){G(J,K);J.CLICK_TIME_MILLIS=200;J.DBLCLICK_TIME_MILLIS=200;J.TOOLTIP_DISPEAR_MILLS=1000;function J(L,M){this.root=L;this.options=M;J.__super__.constructor.call(this,this.root);this.helper=new F(this);this.prevPosition=void 0;this.prevMouseDownTime=0;this.clickCount=0;this.prevMouseUpTime=0;this.clickTimeoutId=0;this.preventDefaultMouseDown=true}J.prototype.buildElement=function(){var M,L,N;L=void 0;M=this.root.find(".ppedit-box");if(M.length>0){L=0;M.each(function(O,P){return L=Math.max(L,parseInt($(P).css("z-index")))})}N=$.extend({left:"50px",top:"50px",width:"75px",height:"50px",color:"black","font-family":"Times New Roman","font-size":"12pt","font-weight":"normal","text-decoration":"none","font-style":"normal","line-height":"117%","letter-spacing":"0px",padding:"0px","z-index":L!=null?L+1:0,"text-align":"left","vertical-align":"bottom"},this.options);return this.element=$("<div></div>").addClass("ppedit-box").attr("contenteditable",true).attr("id",$.now()).css(N)};J.prototype.bindEvents=function(){var L=this;this.element.mousedown(function(M){M.stopPropagation();if(!L.element.hasClass("ppedit-box-focus")){M.preventDefault()}L.select();return L.prevMouseDownTime=M.timeStamp}).mouseup(function(M){M.preventDefault();if(M.timeStamp-L.prevMouseDownTime<J.CLICK_TIME_MILLIS){L.clickCount++;if(L.clickTimeoutId===0){L.clickTimeoutId=setTimeout((function(){if(L.clickCount===1){L._onClick()}else{if(L.clickCount>=2){L._onDoubleClick()}}L.clickTimeoutId=0;return L.clickCount=0}),J.DBLCLICK_TIME_MILLIS)}}return L.stopMoving()}).click(function(M){M.stopPropagation();if(!L.element.hasClass("ppedit-box-focus")){return M.preventDefault()}}).dblclick(function(M){M.stopPropagation();if(!L.element.hasClass("ppedit-box-focus")){return M.preventDefault()}}).focus(function(M){return L.element.trigger("boxSelected",[L])}).on("containerMouseMove",function(N,M,O){if(N.target===L.element.get(0)){if(!L.element.hasClass("ppedit-box-focus")){if(L.element.hasClass("ppedit-box-selected")&&(O!=null)){return L.move(O.x,O.y)}}}}).on("containerMouseLeave",function(){return L.stopMoving()}).on("containerMouseUp",function(N,M){return L.stopMoving()}).on("containerKeyDown",function(N,M){if(L.element.hasClass("ppedit-box-selected")){return L._processKeyDownEvent(M)}}).keydown(function(M){if(!L.isFocused()){return L._processKeyDownEvent(M)}}).mouseenter(function(M){return L.element.trigger("boxMouseOver",[L])}).mouseleave(function(M){});return this.helper.bindEvents()};J.prototype._processKeyDownEvent=function(N){var M,L;L=this.currentPosition();M=false;if(N.which===37){N.preventDefault();M=true;this.move(-1,0)}if(N.which===38){N.preventDefault();M=true;this.move(0,-1)}if(N.which===39){N.preventDefault();M=true;this.move(1,0)}if(N.which===40){N.preventDefault();M=true;this.move(0,1)}if(M){return this.element.trigger("boxMoved",[this,this.currentPosition(),L])}};J.prototype.stopMoving=function(){this.element.removeClass("ppedit-box-selected");if((this.prevPosition!=null)&&!j.pointEqualToPoint(this.currentPosition(),this.prevPosition)){if($(document).find(".snapImg").hasClass("snapBtn-selected")){this.snap()}this.root.trigger("boxMoved",[this,$.extend(true,{},this.currentPosition()),$.extend(true,{},this.prevPosition)])}this.prevPosition=void 0;if($(document).find(".snapImg").hasClass("snapBtn-selected")){this.root.find(".hDotLine").removeClass("ppedit-hDotLine");return this.root.find(".vDotLine").removeClass("ppedit-vDotLine")}};J.prototype.move=function(M,L){var N,O;N=this.currentPosition();this.setPosition(M+N.left,L+N.top);O=this.getSnapPosition(this.currentPosition());if($(document).find(".snapImg").hasClass("snapBtn-selected")){this.root.find(".hDotLine").addClass("ppedit-hDotLine").css("top",O.top);return this.root.find(".vDotLine").addClass("ppedit-vDotLine").css("left",O.left)}};J.prototype.setPosition=function(L,M){this.element.css("left",L+"px");return this.element.css("top",M+"px")};J.prototype.currentPosition=function(){return this.element.position()};J.prototype.snap=function(){var L;L=this.getSnapPosition(this.currentPosition());return this.setPosition(L.left,L.top)};J.prototype.getSnapPosition=function(N){var L,M;L=parseInt(N.left/8)*8;M=parseInt(N.top/8)*8;return{left:L,top:M}};J.prototype.select=function(){this.element.addClass("ppedit-box-selected");return this.prevPosition=this.currentPosition()};J.prototype.isFocused=function(){return this.element.get(0)===document.activeElement};J.prototype._enableFocus=function(){this.root.find(".ppedit-box").removeClass("ppedit-box-focus").removeClass("ppedit-box-selected");return this.element.addClass("ppedit-box-focus").focus()};J.prototype.addBulletPoint=function(){return this._addHtml($("<ul><li></li></ul>"))};J.prototype.addOrderedPointList=function(){return this._addHtml($("<ol><li></li></ol>"))};J.prototype._addHtml=function(L){var M;M=$(window.getSelection().getRangeAt(0).startContainer.parentNode);if(M.closest(".ppedit-box").length===0){M=this.element}L.find("li").html(M.html());return M.empty().append(L)};J.prototype._getCursorPosition=function(){return window.getSelection().getRangeAt(0).startOffset};J.prototype._onClick=function(){};J.prototype._onDoubleClick=function(){return this._enableFocus()};return J})(w);l=(function(K){G(J,K);function J(N,P,M){var O,L;this.editor=N;this.pageNum=P;J.__super__.constructor.call(this);L=M.toArray();this.boxIds=(function(){var S,R,Q;Q=[];for(S=0,R=L.length;S<R;S++){O=L[S];Q.push(O.id)}return Q})();this.boxes=this.editor.areas[this.pageNum].boxesContainer.getBoxesFromIds(this.boxIds)}J.prototype.execute=function(){var P,O,M,N,L;this.editor.areas[this.pageNum].boxesContainer.removeBoxes(this.boxIds);N=this.boxIds;L=[];for(O=0,M=N.length;O<M;O++){P=N[O];L.push(this.editor.panel.removeBoxRow(P))}return L};J.prototype.undo=function(){var N,P,M,O,L;O=this.boxes;L=[];for(P=0,M=O.length;P<M;P++){N=O[P];this.editor.areas[this.pageNum].boxesContainer.addBox(N);L.push(this.editor.panel.addBoxRow(N.element.attr("id")))}return L};J.prototype.getType=function(){return"Remove"};J.prototype.getPageNum=function(){return this.pageNum};return J})(D);b=(function(J){G(K,J);function K(M,N,O,L){this.box=M;this.pageNum=N;this.toPosition=O;this.fromPosition=L;K.__super__.constructor.call(this);this.boxIds.push(this.box.element.attr("id"));if(L==null){this.fromPosition=this.box.currentPosition()}}K.prototype.execute=function(){return this.box.setPosition(this.toPosition.left,this.toPosition.top)};K.prototype.undo=function(){return this.box.setPosition(this.fromPosition.left,this.fromPosition.top)};K.prototype.getType=function(){return"Modify"};K.prototype.getPageNum=function(){return this.pageNum};return K})(D);x=(function(K){G(J,K);function J(L){this.root=L;J.__super__.constructor.call(this,this.root);this.downPosition=void 0;this.rectSize=void 0;this._context=void 0}J.prototype.buildElement=function(){return this.element=$("<canvas></canvas>").addClass("ppedit-canvas").attr("width","920px").attr("height","1325px")};J.prototype.bindEvents=function(){var L=this;this.element.on("containerMouseDown",function(M,N){L.downPosition={left:N.offsetX,top:N.offsetY};return L.rectSize={width:0,height:0}}).on("containerMouseMove",function(N,M,O){if((L.downPosition!=null)&&(L.rectSize!=null)&&(O!=null)){L.rectSize.width+=O.x;L.rectSize.height+=O.y;return L.drawRect(L.downPosition,L.rectSize)}}).on("containerMouseLeave",function(){return L.clear()}).on("containerMouseUp",function(){if((L.downPosition!=null)&&(L.rectSize!=null)){L.element.trigger("canvasRectSelect",[{topLeft:L.downPosition,size:L.rectSize}])}return L.clear()});return this._context=this.element.get(0).getContext("2d")};J.prototype.drawRect=function(M,L){this._context.clearRect(0,0,this.element.width(),this.element.height());this._context.globalAlpha=0.2;this._context.beginPath();this._context.rect(M.left,M.top,L.width,L.height);this._context.fillStyle="blue";return this._context.fill()};J.prototype.clear=function(){this._context.clearRect(0,0,this.element.width(),this.element.height());this.downPosition=void 0;return this.rectSize=void 0};return J})(w);p=(function(K){G(J,K);J.CLICK_TIME_INTERVAL=200;function J(L){this.root=L;J.__super__.constructor.call(this,this.root);this.boxes={}}J.prototype.buildElement=function(){this.element=$("<div></div>").addClass("ppedit-box-container");this.element.append('<p class="hDotLine"></p>');return this.element.append('<p class="vDotLine"></p>')};J.prototype.bindEvents=function(){var M,P,N,L,O=this;this.element.mousedown(function(Q){Q.preventDefault();return O.unSelectAllBoxes()}).dblclick(function(Q){var R;R=O.getPointClicked(Q);if(O.getSelectedBoxes().length===0){return O.element.trigger("addBoxRequested",[R])}}).click(function(Q){O.element.trigger("unSelectBoxes");return O.element.parent().trigger("removeToolTip")});N=this.boxes;L=[];for(P in N){M=N[P];L.push(M.bindEvents())}return L};J.prototype.selectBoxesInRect=function(M){var L,N=this;L={topLeft:{left:M.topLeft.left+this.element.scrollLeft(),top:M.topLeft.top+this.element.scrollTop()},size:M.size};if(L.size.width<0){L.topLeft.left-=Math.abs(L.size.width);L.size.width=Math.abs(L.size.width)}if(L.size.height<0){L.topLeft.top-=Math.abs(L.size.height);L.size.height=Math.abs(L.size.height)}return this.getAllBoxes().each(function(O,P){if(j.rectContainsRect(L,N.boxBounds($(P)))){return N.boxes[P.id].select()}})};J.prototype.boxBounds=function(M){var L;return L={topLeft:{left:M.position().left+this.element.scrollLeft(),top:M.position().top+this.element.scrollTop()},size:{width:M.width(),height:M.height()}}};J.prototype.addBox=function(L){if(L.element==null){L.buildElement()}this.element.append(L.element);L.bindEvents();return this.boxes[L.element.attr("id")]=L};J.prototype.removeBoxes=function(N){var P,O,M,L;L=[];for(O=0,M=N.length;O<M;O++){P=N[O];this.boxes[P].element.removeClass("ppedit-box-selected").removeClass("ppedit-box-focus").remove();L.push(delete this.boxes[P])}return L};J.prototype.getBoxesFromIds=function(L){var M;return(function(){var P,O,N;N=[];for(P=0,O=L.length;P<O;P++){M=L[P];if(this.boxes[M]!=null){N.push(this.boxes[M])}}return N}).call(this)};J.prototype.getBoxesFromSelector=function(L){var O,N,Q,M,P;N={};P=L.toArray();for(Q=0,M=P.length;Q<M;Q++){O=P[Q];N[O.id]=this.boxes[O.id]}return N};J.prototype.getAllBoxes=function(){return this.element.find(".ppedit-box")};J.prototype.getSelectedBoxes=function(){return this.element.find(".ppedit-box:focus, .ppedit-box-selected, .ppedit-box-focus")};J.prototype.getNotFocusedSelectedBoxes=function(){return this.element.find(".ppedit-box-selected")};J.prototype.changeBoxOpacity=function(L,M){return this.boxes[L].element.css("opacity",M)};J.prototype.unSelectAllBoxes=function(){var M,O,N,L;N=this.boxes;L=[];for(O in N){M=N[O];M.stopMoving();L.push(M.element.removeClass("ppedit-box-focus").blur())}return L};J._rectContainsRect=function(L,M){return M.topLeft.x>=L.topLeft.x&&M.topLeft.y>=L.topLeft.y&&M.topLeft.x+M.size.width<=L.topLeft.x+L.size.width&&M.topLeft.y+M.size.height<=L.topLeft.y+L.size.height};J.prototype.getPointClicked=function(L){return{left:event.offsetX+this.element.scrollLeft(),top:event.offsetY+this.element.scrollTop()}};J.prototype.getAllHunks=function(){var L,M;return(function(){var O,N;O=this.boxes;N=[];for(M in O){L=O[M];N.push({id:M,html:L.element.wrap("<div></div>").parent().html()})}return N}).call(this)};return J})(w);h=(function(K){G(J,K);function J(L){this.root=L;J.__super__.constructor.call(this,this.root)}J.prototype.buildElement=function(){return this.element=$('       <div class="ppedit-grid">            <svg width="100%" height="100%">              <defs>                <pattern id="smallGrid" width="8" height="8" patternUnits="userSpaceOnUse">                  <path d="M 8 0 L 0 0 0 8" fill="none" stroke="gray" stroke-width="0.5"/>                </pattern>                <pattern id="grid" width="80" height="80" patternUnits="userSpaceOnUse">                  <rect width="80" height="80" fill="url(#smallGrid)"/>                  <path d="M 80 0 L 0 0 0 80" fill="none" stroke="gray" stroke-width="1"/>                </pattern>              </defs>              <rect width="100%" height="100%" fill="url(#grid)" />            </svg>      </div>')};J.prototype.toggleGrid=function(){return this.element.toggle()};return J})(w);r=(function(K){G(J,K);function J(L,M){this.root=L;this.pageNum=M;J.__super__.constructor.call(this,this.root);this.prevMouseMoveEvent=void 0;this.canvas=void 0;this.grid=void 0;this.boxesContainer=void 0;this.fontPanel=void 0;this.toolTipTimeout=0}J.prototype.buildElement=function(){this.element=$('<div class="editContainer shadow-effect"></div>').attr("id","ppedit-page-"+this.pageNum).append("<div></div>").addClass("ppedit-container").addClass("col-xs-8").attr("tabindex",0);this.boxesContainer=new p(this.element);this.canvas=new x(this.element);this.grid=new h(this.element);this.fontPanel=new I(this.root);this.fontPanel.buildElement();this.boxesContainer.buildElement();this.canvas.buildElement();this.grid.buildElement();this.element.append(this.boxesContainer.element);this.element.append(this.canvas.element);return this.element.append(this.grid.element)};J.prototype.bindEvents=function(){var L=this;this.element.mousedown(function(){if(L.boxesContainer.getNotFocusedSelectedBoxes().length===0){return L.canvas.element.trigger("containerMouseDown",[event])}}).mousemove(function(M){var N;N=void 0;if(L.prevMouseMoveEvent!=null){N={x:M.clientX-L.prevMouseMoveEvent.clientX,y:M.clientY-L.prevMouseMoveEvent.clientY}}L.element.find("*").trigger("containerMouseMove",[M,N]);return L.prevMouseMoveEvent=M}).mouseleave(function(){L.element.find("*").trigger("containerMouseLeave");return L.prevMouseMoveEvent=void 0}).mouseup(function(M){L.element.find("*").trigger("containerMouseUp",[M]);return L.prevMouseMoveEvent=void 0}).keydown(function(M){return L.element.find("*").trigger("containerKeyDown",[M])}).on("canvasRectSelect",function(N,M){return L.boxesContainer.selectBoxesInRect(M)}).on("boxSelected",function(N,M){L.fontPanel.setSettingsFromStyle(M.element.get(0).style);return L.showToolTip(M)}).on("boxMouseOver",function(N,M){L.fontPanel.setSettingsFromStyle(M.element.get(0).style);return L.showToolTip(M)}).on("removeToolTip",function(M){return L.removeToolTip()}).on("boxMouseLeave",function(M){return L.toolTipTimeout=setTimeout((function(){return L.removeToolTip()}),C.TOOLTIP_DISPEAR_MILLS)});this.fontPanel.element.mouseover(function(M){return clearTimeout(L.toolTipTimeout)});this.boxesContainer.bindEvents();this.canvas.bindEvents();this.grid.bindEvents();return this.fontPanel.bindEvents()};J.prototype.setToolTipPosition=function(N,L,P,O){var M;M=this.fontPanel.element;if(this.element.height()-L-P<M.height()+10){if((this.element.width()-N-O/2)<M.width()+10){M.css("left",(N+O/2-M.width())+"px")}else{M.css("left",(N+O/2)+"px")}return M.css("top",(L-M.height()-25)+"px")}else{if((this.element.width()-N-O/2)<M.width()+10){M.css("left",(N+O/2-M.width())+"px")}else{M.css("left",(N+O/2)+"px")}return M.css("top",(L+P+10)+"px")}};J.prototype.showToolTip=function(L){this.element.append(this.fontPanel.element);if((!I.LEFT_POSITION)&&(!I.TOP_POSITION)){return this.setToolTipPosition(L.currentPosition().left,L.currentPosition().top,L.element.height(),L.element.width())}else{this.fontPanel.element.css("left",this.fontPanel.leftPosition+"px");return this.fontPanel.element.css("top",this.fontPanel.topPosition+"px")}};J.prototype.removeToolTip=function(){return this.fontPanel.element.detach()};return J})(w);f=(function(K){G(J,K);function J(L,N,M){this.editor=L;this.addPage=N;this.pageNum=M;J.__super__.constructor.call(this);this.area=void 0;this.boxIds=this.editor.areas[this.pageNum]!=null?Object.getOwnPropertyNames(this.editor.areas[M].boxesContainer.boxes):[]}J.prototype.execute=function(){if(this.addPage){if(this.pageNum==null){this.pageNum=this.editor.areas.length}return this._insertNewPage(this.pageNum)}else{return this._removePage(this.pageNum)}};J.prototype.undo=function(){if(this.addPage){return this._removePage(this.pageNum)}else{return this._insertPage(this.pageNum,this.area)}};J.prototype._insertNewPage=function(M){var L;L=new r(this.editor.element,this.editor.areas.length);L.buildElement();this._insertPage(M,L);return this.area=L};J.prototype._insertPage=function(V,N){var T,S,M,L,W,Q,R,P,O,U=this;if(V>0){N.element.insertAfter(this.editor.superContainer.children().eq(V-1))}else{this.editor.superContainer.append(N.element)}N.bindEvents();L=this.editor.panel;L.insertTab(V);R=N.boxesContainer.boxes;for(M in R){T=R[M];W=L.getRows(V);if(W.length===0){L.addBoxRow(M)}else{W.each(function(X,Z){var Y,aa;Y=$(Z).attr("ppedit-box-id");aa=N.boxesContainer.boxes[Y].element.css("z-index");if(parseInt(aa)<parseInt(T.element.css("z-index"))||X===W.length-1){L.addBoxRow(M,X);return false}})}}this.editor.areas=this.editor.areas.slice(0,V).concat([N]).concat(this.editor.areas.slice(V));O=[];for(S=Q=0,P=this.editor.areas.length-1;0<=P?Q<=P:Q>=P;S=0<=P?++Q:--Q){O.push(this.editor.areas[S].element.attr("id","ppedit-page-"+S))}return O};J.prototype._removePage=function(P){var M,O,N,L;this.area=this.editor.areas.splice(P,1)[0];this.area.element.detach();this.editor.panel.removeTab(P);L=[];for(M=O=0,N=this.editor.areas.length-1;0<=N?O<=N:O>=N;M=0<=N?++O:--O){this.editor.areas[M].element.attr("id","ppedit-page-"+M);this.editor.areas[M].grid.toggleGrid();L.push(this.editor.areas[M].grid.toggleGrid())}return L};J.prototype.getType=function(){if(this.addPage){return"addPage"}else{return"removePage"}};J.prototype.getPageNum=function(){return this.pageNum};return J})(D);y=(function(K){G(J,K);function J(M,L){this.editor=M;this.jsonBoxes=L;J.__super__.constructor.call(this)}J.prototype.execute=function(){var P,N,W,X,V,M,O,L,Y,T,S,U,R,Q;O=this.jsonBoxes;if(O.length>this.editor.areas.length){for(V=T=0,U=O.length-this.editor.areas.length;0<=U?T<=U:T>=U;V=0<=U?++T:--T){P=new f(this.editor,true);P.execute()}}Q=[];for(V=S=0,R=O.length-1;0<=R?S<=R:S>=R;V=0<=R?++S:--S){Q.push((function(){var ab,Z,aa=this;ab=O[V];Z=[];for(M in ab){X=ab[M];N=this.editor.areas[V];L=this.editor.panel;W=new C(N.boxesContainer.element);W.element=$(X.html);N.boxesContainer.addBox(W);Y=L.getRows(V);if(Y.length===0){L.addBoxRow(V,M)}else{Y.each(function(ac,ae){var ad,af;ad=$(ae).attr("ppedit-box-id");af=N.boxesContainer.boxes[ad].element.css("z-index");if(parseInt(af)<parseInt(W.element.css("z-index"))||ac===Y.length-1){L.addBoxRow(V,M,ac);return false}})}Z.push(L.setBoxName(M,X.name))}return Z}).call(this))}return Q};J.prototype.undo=function(){};J.prototype.getType=function(){return"Create"};J.prototype.getPageNum=function(){};return J})(D);a=(function(J){G(K,J);function K(L,M,N){this.editor=L;this.pageNum=M;this.optionsList=N;K.__super__.constructor.call(this);this.boxes=[]}K.prototype.execute=function(){var R,T,P,N,S,L,Q,O,M;if(this.optionsList!=null){if(this.boxes.length===0){Q=this.optionsList;for(P=0,S=Q.length;P<S;P++){T=Q[P];this.boxes.push(new C(this.editor.areas[this.pageNum].boxesContainer.element,T))}}O=this.boxes;M=[];for(N=0,L=O.length;N<L;N++){R=O[N];M.push(this._addBox(R))}return M}else{if(this.boxes.length===0){this.boxes.push(new C(this.editor.areas[this.pageNum].boxesContainer.element))}return this._addBox(this.boxes[0])}};K.prototype.undo=function(){var N,P,M,O,L;O=this.boxes;L=[];for(P=0,M=O.length;P<M;P++){N=O[P];this.editor.areas[this.pageNum].boxesContainer.removeBoxes([N.element.attr("id")]);L.push(this.editor.panel.removeBoxRow([N.element.attr("id")]))}return L};K.prototype._addBox=function(L){var M;this.editor.areas[this.pageNum].boxesContainer.addBox(L);M=L.element.attr("id");this.editor.panel.addBoxRow(this.pageNum,M);if(this.boxIds.indexOf(M)===-1){return this.boxIds.push(M)}};K.prototype.getType=function(){return"Create"};K.prototype.getPageNum=function(){return this.pageNum};return K})(D);z=(function(K){G(J,K);function J(M,N,L){this.editor=M;this.pageNum=N;this.boxesClones=L;J.__super__.constructor.call(this);this.newBoxes=[]}J.prototype.execute=function(){var N,M,P,O,L,Q=this;if(this.newBoxes.length===0){this.boxesClones.each(function(S,R){var U,T;T=CSSJSON.toJSON(R.style.cssText).attributes;U=new C(Q.editor.areas[Q.pageNum].boxesContainer.element,T);return Q.newBoxes[S]=U})}L=[];for(M=P=0,O=this.newBoxes.length-1;0<=O?P<=O:P>=O;M=0<=O?++P:--P){N=this.newBoxes[M];this.editor.areas[this.pageNum].boxesContainer.addBox(N);N.element.html(this.boxesClones.eq(M).html());this.editor.panel.addBoxRow(this.pageNum,N.element.attr("id"));L.push(this.boxIds[M]=N.element.attr("id"))}return L};J.prototype.undo=function(){var N,P,M,O,L;O=this.newBoxes;L=[];for(P=0,M=O.length;P<M;P++){N=O[P];this.editor.areas[this.pageNum].boxesContainer.removeBoxes([N.element.attr("id")]);L.push(this.editor.panel.removeBoxRow([N.element.attr("id")]))}return L};J.prototype.getType=function(){return"Create"};J.prototype.getPageNum=function(){return this.pageNum};return J})(D);d=(function(){function J(){}J.INIT_NUM_OF_PAGES=2;J.MAX_NUM_OF_PAGES=3;J.HUNK_NAME_MAX_NUM_OF_CHAR=10;return J})();u=(function(){function J(){this.initNumOfPages=d.INIT_NUM_OF_PAGES;this.undoStack=[];this.redoStack=[]}J.prototype.pushCommand=function(L,K){if((K==null)||K){L.execute()}this.undoStack.push(L);return this.redoStack.splice(0,this.redoStack.length)};J.prototype.undo=function(){var K;if(this.undoStack.length>0){K=this.undoStack.pop();K.undo();return this.redoStack.push(K)}};J.prototype.redo=function(){var K;if(this.redoStack.length>0){K=this.redoStack.pop();K.execute();return this.undoStack.push(K)}};J.prototype.getUndoJSON=function(){var O,U,T,S,L,Y,V,Z,Q,X,P,N,W,K,R,M;U={modified:(function(){var ac,ab,aa;aa=[];for(S=ac=0,ab=this.initNumOfPages-1;0<=ab?ac<=ab:ac>=ab;S=0<=ab?++ac:--ac){aa.push({})}return aa}).call(this),removed:(function(){var ac,ab,aa;aa=[];for(S=ac=0,ab=this.initNumOfPages-1;0<=ab?ac<=ab:ac>=ab;S=0<=ab?++ac:--ac){aa.push({})}return aa}).call(this),created:(function(){var ac,ab,aa;aa=[];for(S=ac=0,ab=this.initNumOfPages-1;0<=ab?ac<=ab:ac>=ab;S=0<=ab?++ac:--ac){aa.push({})}return aa}).call(this)};R=this.undoStack;for(P=0,W=R.length;P<W;P++){O=R[P];M=O.boxIds;for(N=0,K=M.length;N<K;N++){L=M[N];switch(O.getType()){case"Create":U.created[O.getPageNum()][""+L]={id:L,html:$("#"+L).clone().wrap("<div></div>").parent().html()||"",name:$("tr[ppedit-box-id="+L+"]").find("input").val()};break;case"Modify":if(U.created[O.getPageNum()][""+L]==null){U.modified[O.getPageNum()][""+L]={id:L,html:$("#"+L).clone().wrap("<div></div>").parent().html()||"",name:$("tr[ppedit-box-id="+L+"]").find("input").val()}}break;case"Remove":delete U.modified[O.getPageNum()][""+L];if(U.created[O.getPageNum()][""+L]!=null){delete U.created[O.getPageNum()][""+L]}else{U.removed[O.getPageNum()][""+L]={id:L,html:"",name:""}}break;case"removePage":delete U.modified[O.getPageNum()][""+L];if(U.created[O.getPageNum()][""+L]!=null){delete U.created[O.getPageNum()][""+L]}else{U.removed[O.getPageNum()][""+L]={id:L,html:"",name:""}}}}if(O.getType()==="removePage"){if(O.getPageNum()<U.modified.length-2){U.modified[O.getPageNum()]=$.extend(U.modified[O.getPageNum()],U.modified[O.getPageNum()+1]);U.created[O.getPageNum()]=$.extend(U.created[O.getPageNum()],U.created[O.getPageNum()+1]);U.removed[O.getPageNum()]=$.extend(U.removed[O.getPageNum()],U.removed[O.getPageNum()+1]);U.modified.splice(O.getPageNum()+1,1);U.created.splice(O.getPageNum()+1,1);U.removed.splice(O.getPageNum()+1,1)}}else{if(O.getType()==="addPage"){U.modified.push({});U.created.push({});U.removed.push({})}}}Z={modified:(function(){var ac,aa,ad,ab;ad=U.modified;ab=[];for(ac=0,aa=ad.length;ac<aa;ac++){V=ad[ac];ab.push((function(){var ae;ae=[];for(Y in V){X=V[Y];ae.push(X)}return ae})())}return ab})(),removed:(function(){var ac,aa,ad,ab;ad=U.removed;ab=[];for(ac=0,aa=ad.length;ac<aa;ac++){V=ad[ac];ab.push((function(){var ae;ae=[];for(Y in V){X=V[Y];ae.push(X)}return ae})())}return ab})(),created:(function(){var ac,aa,ad,ab;ad=U.created;ab=[];for(ac=0,aa=ad.length;ac<aa;ac++){V=ad[ac];ab.push((function(){var ae;ae=[];for(Y in V){X=V[Y];ae.push(X)}return ae})())}return ab})()};Q=new jsSHA(JSON.stringify(U),"TEXT");T=Q.getHMAC("","TEXT","SHA-256","HEX");Z.etag=T;return JSON.stringify(Z)};J.prototype.clearHistory=function(){return this.undoStack.splice(0,this.undoStack.length)};return J})();E=(function(K){G(J,K);function J(N,M,L){this.editor=N;this.boxesSelector=M;this.newCssOptions=L;J.__super__.constructor.call(this);this.pageNum=this.editor.getPageNum(this.boxesSelector.first());this.boxesToCopy=this.boxesSelector.clone()}J.prototype.execute=function(){var L=this;return this.boxesSelector.each(function(M,N){return $(N).css(L.newCssOptions)})};J.prototype.undo=function(){var L=this;return this.boxesToCopy.each(function(N,O){var M;M=CSSJSON.toJSON(L.boxesToCopy.filter("#"+O.id).attr("style")).attributes;return L.boxesSelector.filter("#"+O.id).css(M)})};J.prototype.getType=function(){return"Modify"};J.prototype.getPageNum=function(){return this.pageNum};return J})(D);g=(function(K){G(J,K);function J(M,O,N,L){this.editor=M;this.pageNum=O;this.moveUp=L;J.__super__.constructor.call(this);this.boxId=N.attr("id")}J.prototype.execute=function(){if(this.moveUp){return this.swapRowWithUpperRow()}else{return this.swapRowWithLowerRow()}};J.prototype.undo=function(){if(this.moveUp){return this.swapRowWithLowerRow()}else{return this.swapRowWithUpperRow()}};J.prototype.swapRowWithUpperRow=function(){var M,N,L;N=this.editor.panel.getRowWithBoxId(this.boxId);M=N.index();if(M-1>=0){L=this.editor.panel.getRowAtIndex(this.pageNum,M-1);return this.swapRows(N,L)}};J.prototype.swapRowWithLowerRow=function(){var L,M,N;N=this.editor.panel.getRowWithBoxId(this.boxId);L=N.index();if(L+1<this.editor.panel.getRows(this.pageNum).length){M=this.editor.panel.getRowAtIndex(this.pageNum,L+1);return this.swapRows(N,M)}};J.prototype.swapRows=function(P,O){var M,N,L;if(P.index()<O.index()){P.insertAfter(O)}else{P.insertBefore(O)}M=this.editor.areas[this.pageNum].boxesContainer.boxes[P.attr("ppedit-box-id")];N=M.element.css("z-index");L=this.editor.areas[this.pageNum].boxesContainer.boxes[O.attr("ppedit-box-id")];M.element.css("z-index",L.element.css("z-index"));return L.element.css("z-index",N)};J.prototype.getType=function(){return"Modify"};J.prototype.getPageNum=function(){return this.pageNum};return J})(D);A=(function(K){G(J,K);function J(N,O,M,L){this.box=N;this.pageNum=O;this.prevContent=M;this.newContent=L;J.__super__.constructor.call(this);this.boxIds.push(this.box.element.attr("id"))}J.prototype.execute=function(){return this.box.element.html(this.newContent)};J.prototype.undo=function(){return this.box.element.html(this.prevContent)};J.prototype.getType=function(){return"Modify"};J.prototype.getPageNum=function(){return this.pageNum};return J})(D);v=(function(K){G(J,K);function J(M,O,N,P,L){this.editor=M;this.pageNum=O;this.boxId=N;this.prevVal=P;this.newVal=L;J.__super__.constructor.call(this)}J.prototype.execute=function(){return this.changeOpacityToVal(this.newVal)};J.prototype.undo=function(){return this.changeOpacityToVal(this.prevVal)};J.prototype.changeOpacityToVal=function(L){this.editor.areas[this.pageNum].boxesContainer.changeBoxOpacity(this.boxId,L);return this.editor.panel.element.find("tr[ppedit-box-id="+this.boxId+"]").find(".ppedit-slider").slider("setValue",parseInt(L*100))};J.prototype.getType=function(){return"Modify"};J.prototype.getPageNum=function(){return this.pageNum};return J})(D);c=(function(J){G(K,J);function K(M,O,N,P,L){this.editor=M;this.pageNum=N;this.prevName=P;this.newName=L;K.__super__.constructor.call(this);this.boxIds.push(O)}K.prototype.execute=function(){return this.editor.panel.setBoxName(this.boxIds[0],this.newName.substr(0,d.HUNK_NAME_MAX_NUM_OF_CHAR))};K.prototype.undo=function(){return this.editor.panel.setBoxName(this.boxIds[0],this.prevName.substr(0,d.HUNK_NAME_MAX_NUM_OF_CHAR))};K.prototype.getType=function(){return"Modify"};K.prototype.getPageNum=function(){return this.pageNum};return K})(D);k=(function(){function J(){}J.prototype.createChangeFontSizeCommand=function(M,L,K){return new E(M,L,{"font-size":K})};J.prototype.createChangeFontTypeCommand=function(M,L,K){return new E(M,L,{"font-family":K})};J.prototype.createChangeLetterSpaceCommand=function(L,K,M){return new E(L,K,{"letter-spacing":M})};J.prototype.createChangeLineHeightCommand=function(M,L,K){return new E(M,L,{"line-height":K})};J.prototype.createChangePaddingCommand=function(M,L,K){return new E(M,L,{padding:K})};J.prototype.createChangeFontWeightCommand=function(N,M,L){var K;K=L?"bold":"normal";return new E(N,M,{"font-weight":K})};J.prototype.createChangeItalicFontCommand=function(N,M,L){var K;K=L?"italic":"normal";return new E(N,M,{"font-style":K})};J.prototype.createChangeUnderlineFontCommand=function(N,M,L){var K;K=L?"underline":"none";return new E(N,M,{"text-decoration":K})};J.prototype.createRightAlignmentCommand=function(L,K){return new E(L,K,{"text-align":"right"})};J.prototype.createLeftAlignmentCommand=function(L,K){return new E(L,K,{"text-align":"left"})};J.prototype.createCenterAlignmentCommand=function(L,K){return new E(L,K,{"text-align":"center"})};J.prototype.createChangeTextColorCommand=function(M,L,K){return new E(M,L,{color:"#"+K})};J.prototype.createChangeOpacityCommand=function(M,L,N,O,K){return new v(M,L,N,O,K)};J.prototype.createMoveBoxCommand=function(L,M,N,K){return new b(L,M,N,K)};J.prototype.createRemoveBoxesCommand=function(L,M,K){return new l(L,M,K)};J.prototype.createCopyBoxesCommand=function(M,L,K){return new z(M,L,K)};J.prototype.createCreateBoxesCommand=function(K,L,M){return new a(K,L,M)};J.prototype.createCreateChangeBoxContentCommand=function(M,N,L,K){return new A(M,N,L,K)};J.prototype.createMoveUpCommand=function(K,M,L){return new g(K,M,L,true)};J.prototype.createMoveDownCommand=function(K,M,L){return new g(K,M,L,false)};J.prototype.createLoadBoxesCommand=function(L,K){return new y(L,K)};J.prototype.createAddPageCommand=function(K){return new f(K,true)};J.prototype.createRemovePageCommand=function(K,L){return new f(K,false,L)};J.prototype.createChangeBoxNameCommand=function(L,N,M,O,K){return new c(L,N,M,O,K)};return J})();B=(function(J){G(K,J);function K(L){this.root=L;this.prevOpacityVal=void 0;this.prevBoxNameVal={};K.__super__.constructor.call(this,this.root)}K.prototype.buildElement=function(){return this.element=$('      <div class="menu-sidebar">          <!-- Sidebar Right -->        <div class="menu-tab-sidebar">            <div class="minimize-sidebar-btn shadow-effect">                <span class="minimize-text">&lt;&lt;</span>            </div>            <div class="menu-tab-pages">            </div>            <div class="add-tab-sidebar-btn shadow-effect">                <span class="add-text">+</span>            </div>        </div>         <div class="right-sidebar-container shadow-effect">            <!-- Row 1 Menu  -->            <div class="right-sidebar-menu1">              <div class="moveElementUpBtn menu-panel-icon"></div>              <div class="moveElementDownBtn menu-panel-icon"></div>              <div class="addElementBtn menu-panel-icon"></div>              <div class="ppedit-pageNumLabel"></div>              <div class="ppedit-deletePage menu-panel-icon"></div>             </div>          </div>      </div>')};K.prototype.bindEvents=function(){var L=this;this.element.find(".addElementBtn").click(function(){return L.element.trigger("panelClickAddBtnClick",[L._getDisplayedTabIndex()])});this.element.find(".moveElementUpBtn").click(function(){return L.element.trigger("moveElementUpBtnClick",[L._getDisplayedTabIndex()])});this.element.find(".moveElementDownBtn").click(function(){return L.element.trigger("moveElementDownBtnClick",[L._getDisplayedTabIndex()])});this.element.find(".add-tab-sidebar-btn").click(function(){return L.element.trigger("addTabBtnClick")});return this.element.find(".minimize-sidebar-btn").click(function(M){return L.element.toggleClass("menu-sidebar-open")})};K.prototype.addNewTab=function(){return this.insertTab(this.element.find(".page-sidebar-tab").length)};K.prototype.insertTab=function(L){var O,M,N,P=this;O=Math.max(L,this.element.find(".page-sidebar-tab").length);N=$('           <a href="#ppedit-page-'+O+'">                  <div class="page-sidebar-tab menu-right-btn shadow-effect">                    <span class="vertical-text">Page '+(O+1)+"</span>                  </div>           </a>    ");if(O===0){this.element.find(".menu-tab-pages").append(N)}else{N.insertAfter(this.element.find(".menu-tab-pages a").eq(O-1))}N.click(function(Q){return P._displayTab(O)}).nextAll("a").each(function(Q,R){return $(R).attr("href","#ppedit-page-"+(O+Q+1)).html('            <div class="page-sidebar-tab menu-right-btn shadow-effect">              <span class="vertical-text">Page '+(O+Q+2)+"</span>            </div>          ").click(function(){return P._displayTab(O+Q+1)})});M=$('      <!-- Row 2 Menu -->      <div class="ppedit-row-container">        <table class="right-sidebar-menu2" cellspacing="0px" cellpadding="2px">        </table>      </div>    ');if(O===0){this.element.find(".right-sidebar-container").append(M)}else{M.insertAfter(this.element.find(".ppedit-row-container").eq(O-1))}return this._displayTab(O)};K.prototype.addBoxRow=function(L,O,N){var M,P=this;M=$('        <tr class="ppedit-panel-row">          <td style="width:10%">            <div class="deleteElementBtn menu-panel-icon"></div>          </td>          <td style="width:50%">          <input type="text" class="form-control" placeholder="Untitled box">          </td>          <td style="width:40%">            <div class="ppedit-slider"></div>          </td>        </tr>    	      ').attr("ppedit-box-id",O);if((N==null)||N===0){this._getRowContainer(L).find(".right-sidebar-menu2").prepend(M)}else{M.insertBefore(this._getRowContainer(L).find('.ppedit-panel-row:nth-child("'+N+'")'))}M.find(".ppedit-slider").slider({min:0,max:100,step:1,value:100}).on("slideStart",function(Q){return P.prevOpacityVal=$(Q.target).val()||100}).on("slide",function(Q){var R;R=$(Q.target).val();N=M.parents(".ppedit-row-container").index()-1;return $(Q.target).trigger("onRowSliderValChanged",[N,O,parseInt(R)/100])}).on("slideStop",function(Q){var R;R=$(Q.target).val();N=M.parents(".ppedit-row-container").index()-1;if(P.prevOpacityVal!==R){$(Q.target).trigger("onRowSliderStopValChanged",[N,O,parseInt(P.prevOpacityVal)/100,parseInt(R)/100])}return P.prevOpacityVal=void 0});M.find(".deleteElementBtn").on("click",function(Q){N=M.parents(".ppedit-row-container").index()-1;return $(Q.target).trigger("onRowDeleteBtnClick",[N,O])});return M.find("input").blur(function(R){var Q;Q=$(R.target).val();if(Q!==P.prevBoxNameVal[O]){N=M.parents(".ppedit-row-container").index()-1;$(R.target).trigger("boxNameChanged",[O,N,P.prevBoxNameVal[O]||"",Q]);return P.prevBoxNameVal[O]=Q}})};K.prototype.removeBoxRow=function(L){return this.getRowWithBoxId(L).remove()};K.prototype.getRowWithBoxId=function(L){return this.element.find("tr[ppedit-box-id="+L+"]").eq(0)};K.prototype.getRowAtIndex=function(L,M){return this._getRowContainer(L).find(".ppedit-panel-row").eq(M)};K.prototype.getRows=function(L){return this._getRowContainer(L).find(".ppedit-panel-row")};K.prototype.setBoxName=function(M,L){return this.getRowWithBoxId(M).find("input").val(L)};K.prototype._displayTab=function(L){var M=this;this.element.find(".ppedit-row-container").removeClass("ppedit-row-container-active").eq(L).addClass("ppedit-row-container-active");this.element.find(".ppedit-pageNumLabel").html("Page "+(L+1));return this.element.find(".ppedit-deletePage").off().click(function(){return M.element.trigger("deleteTabBtnClick",[L])})};K.prototype.removeTab=function(L){var M=this;this._getRowContainer(L).remove();this.element.find(".menu-tab-pages a").eq(L).remove();this.element.find(".menu-tab-pages a").each(function(N,O){return $(O).attr("href","#ppedit-page-"+N).html('          <div class="page-sidebar-tab menu-right-btn shadow-effect">            <span class="vertical-text">Page '+(N+1)+"</span>          </div>        ").click(function(){return M._displayTab(N)})});return this._displayTab(L)};K.prototype.getBoxName=function(L){return this.getRowWithBoxId(L).find("input").val()};K.prototype._getRowContainer=function(L){return this.element.find(".ppedit-row-container").eq(L)};K.prototype._getDisplayedRowContainer=function(){return this.element.find(".ppedit-row-container-active").eq(0)};K.prototype._getDisplayedTabIndex=function(){return this._getDisplayedRowContainer().index()-1};return K})(w);n=(function(){function J(){this.items=void 0}J.prototype.pushItems=function(K){return this.items=$.extend(true,{},K)};J.prototype.popItems=function(){var K;K=this.items;this.items=void 0;if(K!=null){return K}else{return[]}};return J})();o=(function(K){G(J,K);function J(L){this.root=L;J.__super__.constructor.call(this,this.root);this.clipboard=new n;this.commandManager=new u;this.cmdFactory=new k;this.controller=void 0;this.panel=void 0}J.prototype.buildElement=function(){this.element=$('      <div class="container" tabindex="0">      </div>    ');this.controller=s.getController(this.element);this.superContainer=$('      <div class="superContainer">      </div>    ');this.areas=[];this.panel=new B(this.element);this.mainPanel=new m(this.element);this.panel.buildElement();this.mainPanel.buildElement();this.element.append(this.mainPanel.element);this.element.append(this.panel.element);return this.element.append(this.superContainer)};J.prototype.bindEvents=function(){var P,M,O,N,L,Q=this;this.element.on("focus",function(R){return Q.element.blur()}).on("requestUndo",function(R){return Q.commandManager.undo()}).on("requestRedo",function(R){return Q.commandManager.redo()}).on("requestDelete",function(T){var S,V,U,R;R=[];for(S=V=0,U=d.INIT_NUM_OF_PAGES-1;0<=U?V<=U:V>=U;S=0<=U?++V:--V){if(Q.areas[S].boxesContainer.getSelectedBoxes().length!==0){R.push(Q.commandManager.pushCommand(Q.cmdFactory.createRemoveBoxesCommand(Q,S,Q.areas[0].boxesContainer.getSelectedBoxes())))}else{R.push(void 0)}}return R}).on("requestCopy",function(T){var S,V,U,R;R=[];for(S=V=0,U=d.INIT_NUM_OF_PAGES-1;0<=U?V<=U:V>=U;S=0<=U?++V:--V){if(Q.areas[S].boxesContainer.getSelectedBoxes().length!==0){Q.clipboard.pushItems({pageNum:S,boxes:Q.areas[S].boxesContainer.getSelectedBoxes()});break}else{R.push(void 0)}}return R}).on("requestPaste",function(S){var R;R=Q.clipboard.popItems();if((R.boxes!=null)&&R.boxes.length>0){return Q.commandManager.pushCommand(Q.cmdFactory.createCopyBoxesCommand(Q,R.pageNum,R.boxes))}}).on("textColorChanged",function(T,S){var R;R=Q.getSelectedBoxes();if(R.length!==0){return Q.commandManager.pushCommand(Q.cmdFactory.createChangeTextColorCommand(Q,R,S))}}).on("graphicContentChanged",function(S,V){var U,W,R,T;T=Q.getPageNum(V.graphic.element);Q.commandManager.pushCommand(Q.cmdFactory.createCreateChangeBoxContentCommand(V.graphic,T,V.prevContent,V.newContent),false);U=Q.panel.getBoxName(V.graphic.element.attr("id"));W=V.graphic.element.clone();W.children().remove();R=W.html();if(U.length===0&&R.length>0){return Q.commandManager.pushCommand(Q.cmdFactory.createChangeBoxNameCommand(Q,V.graphic.element.attr("id"),T,"",R))}}).on("boxMoved",function(T,S,V,R){var U;U=Q.getPageNum(S.element);return Q.commandManager.pushCommand(Q.cmdFactory.createMoveBoxCommand(S,U,V,R),false)}).on("moveElementUpBtnClick",function(T,R){var S;S=Q.getSelectedBoxes();if(S.length>0){return Q.commandManager.pushCommand(Q.cmdFactory.createMoveUpCommand(Q,R,S))}}).on("moveElementDownBtnClick",function(T,R){var S;S=Q.getSelectedBoxes();if(S.length>0){return Q.commandManager.pushCommand(Q.cmdFactory.createMoveDownCommand(Q,R,S))}}).on("addTabBtnClick",function(R){if(Q.areas.length<d.MAX_NUM_OF_PAGES){return Q.commandManager.pushCommand(Q.cmdFactory.createAddPageCommand(Q))}}).on("deleteTabBtnClick",function(S,R){if(Q.areas.length>d.INIT_NUM_OF_PAGES){return Q.commandManager.pushCommand(Q.cmdFactory.createRemovePageCommand(Q,R))}}).on("panelClickAddBtnClick",function(S,R){return Q.commandManager.pushCommand(Q.cmdFactory.createCreateBoxesCommand(Q,R))}).on("panelClickGridBtnClick",function(U){var T,W,S,V,R;V=Q.areas;R=[];for(W=0,S=V.length;W<S;W++){T=V[W];R.push(T.grid.toggleGrid())}return R}).on("onRowDeleteBtnClick",function(S,R,T){return Q.commandManager.pushCommand(Q.cmdFactory.createRemoveBoxesCommand(Q,R,Q.root.find("#"+T)))}).on("onRowSliderValChanged",function(S,R,T,U){return Q.areas[R].boxesContainer.changeBoxOpacity(T,U)}).on("onRowSliderStopValChanged",function(T,R,U,V,S){return Q.commandManager.pushCommand(Q.cmdFactory.createChangeOpacityCommand(Q,R,U,V,S))}).on("addBoxRequested",function(R,T){var S;S=Q.getPageNum($(R.target));return Q.commandManager.pushCommand(Q.cmdFactory.createCreateBoxesCommand(Q,S,[T]))}).on("fontTypeChanged",function(S,R){var T;T=Q.getSelectedBoxes();if(T.length!==0){return Q.commandManager.pushCommand(Q.cmdFactory.createChangeFontTypeCommand(Q,T,R))}}).on("fontSizeChanged",function(S,R){var T;T=Q.getSelectedBoxes();if(T.length!==0){return Q.commandManager.pushCommand(Q.cmdFactory.createChangeFontSizeCommand(Q,T,R))}}).on("letterSpaceChanged",function(S,R){var T;T=Q.getSelectedBoxes();if(T.length!==0){return Q.commandManager.pushCommand(Q.cmdFactory.createChangeLetterSpaceCommand(Q,T,R))}}).on("lineHeightChanged",function(S,R){var T;T=Q.getSelectedBoxes();if(T.length!==0){return Q.commandManager.pushCommand(Q.cmdFactory.createChangeLineHeightCommand(Q,T,R))}}).on("paddingChanged",function(S,R){var T;T=Q.getSelectedBoxes();if(T.length!==0){return Q.commandManager.pushCommand(Q.cmdFactory.createChangePaddingCommand(Q,T,R))}}).on("fontWeightBtnEnableClick",function(R){var S;S=Q.getSelectedBoxes();if(S.length!==0){return Q.commandManager.pushCommand(Q.cmdFactory.createChangeFontWeightCommand(Q,S,true))}}).on("fontWeightBtnDisableClick",function(R){var S;S=Q.getSelectedBoxes();if(S.length!==0){return Q.commandManager.pushCommand(Q.cmdFactory.createChangeFontWeightCommand(Q,S,false))}}).on("fontUnderlinedBtnEnableClick",function(R){var S;S=Q.getSelectedBoxes();if(S.length!==0){return Q.commandManager.pushCommand(Q.cmdFactory.createChangeUnderlineFontCommand(Q,S,true))}}).on("fontUnderlinedBtnDisableClick",function(R){var S;S=Q.getSelectedBoxes();if(S.length!==0){return Q.commandManager.pushCommand(Q.cmdFactory.createChangeUnderlineFontCommand(Q,S,false))}}).on("fontItalicBtnEnableClick",function(R){var S;S=Q.getSelectedBoxes();if(S.length!==0){return Q.commandManager.pushCommand(Q.cmdFactory.createChangeItalicFontCommand(Q,S,true))}}).on("fontItalicBtnDisableClick",function(R){var S;S=Q.getSelectedBoxes();if(S.length!==0){return Q.commandManager.pushCommand(Q.cmdFactory.createChangeItalicFontCommand(Q,S,false))}}).on("rightAlignment",function(R){var S;S=Q.getSelectedBoxes();if(S.length!==0){return Q.commandManager.pushCommand(Q.cmdFactory.createRightAlignmentCommand(Q,S))}}).on("leftAlignment",function(R){var S;S=Q.getSelectedBoxes();if(S.length!==0){return Q.commandManager.pushCommand(Q.cmdFactory.createLeftAlignmentCommand(Q,S))}}).on("centerAlignment",function(R){var S;S=Q.getSelectedBoxes();if(S.length!==0){return Q.commandManager.pushCommand(Q.cmdFactory.createCenterAlignmentCommand(Q,S))}}).on("bulletPointBtnEnableClick",function(U){var T,S,W,X,V,R;W=Q.getSelectedBoxes();V=Q.getPageNum(W);S=Q.areas[V].boxesContainer.getBoxesFromSelector(W.eq(0));R=[];for(X in S){T=S[X];R.push(T.addBulletPoint())}return R}).on("orderedPointBtnEnableClick",function(U){var T,S,W,X,V,R;W=Q.getSelectedBoxes();V=Q.getPageNum(W);S=Q.areas[V].boxesContainer.getBoxesFromSelector(W.eq(0));R=[];for(X in S){T=S[X];R.push(T.addOrderedPointList())}return R}).on("boxNameChanged",function(T,S,U,V,R){return Q.commandManager.pushCommand(Q.cmdFactory.createChangeBoxNameCommand(Q,S,U,V,R),false)});this.panel.bindEvents();this.controller.bindEvents();this.mainPanel.bindEvents();L=[];for(M=O=0,N=d.INIT_NUM_OF_PAGES-1;0<=N?O<=N:O>=N;M=0<=N?++O:--O){P=this.cmdFactory.createAddPageCommand(this);L.push(P.execute())}return L};J.prototype.getSelectedBoxes=function(){return this.element.find(".ppedit-box:focus, .ppedit-box-selected, .ppedit-box-focus")};J.prototype.getPageNum=function(L){return L.parents(".editContainer").index()};J.prototype.load=function(L){var M;M=this.cmdFactory.createLoadBoxesCommand(this,L);M.execute();return this.commandManager.initNumOfPages=this.areas.length};J.prototype.getAllHunks=function(){var L;return JSON.stringify((function(){var P,N,O,M;O=this.areas;M=[];for(P=0,N=O.length;P<N;P++){L=O[P];M.push(this.area.boxesContainer.getAllHunks())}return M}).call(this))};return J})(w);I=(function(K){G(J,K);J.LEFT_POSITION=void 0;J.TOP_POSITION=void 0;function J(L){this.root=L;J.__super__.constructor.call(this,this.root)}J.prototype.buildElement=function(){return this.element=$('          <div class="edit-menu FontPanel shadow-effect">            <div class="edit-menu-row1">               <select class="fontTypeBtn from-control edit-menu-row1-dd-ff">                 <option value="Times New Roman" selected>Times New Roman</option>                 <option value="Arial">Arial</option>                 <option value="Inconsolata">Inconsolata</option>                 <option value="Glyphicons Halflings">Glyphicons Halflings</option>               </select>                              <select class="fontSizeBtn from-control edit-menu-row1-dd-fs">                 <option value="6">6</option>                 <option value="8">8</option>                 <option value="10" selected>10</option>                 <option value="11">11</option>                 <option value="12">12</option>                 <option value="14">14</option>                 <option value="16">16</option>                 <option value="20">20</option>               </select>                              <div class="boldButton boldButtonDisable font-panel-icon-row"></div>               <div class="italicButton italicButtonDisable font-panel-icon-row"></div>               <div class="underlineButton underlineButtonDisable font-panel-icon-row"></div>             </div>             <div class="edit-menu-row2">                <div class="leftAlignBtn leftAlignButtonEnable font-panel-icon-row"></div>                <div class="centerAlignBtn centerAlignButtonDisable font-panel-icon-row"></div>                <div class="rightAlignBtn rightAlignButtonDisable font-panel-icon-row"></div>                <div class="colorPicker colorPickerButton font-panel-icon-row"></div>                <div class="orderedPointBtn orderedBulletPointButtonDisable font-panel-icon-row"></div>                <div class="bulletPointBtn bulletPointButtonDisable font-panel-icon-row"></div>                                <div>               <div class="font-panel-icon letter-space-img" ></div>               <select class="letter-space from-control edit-menu-row1-dd-fs">                 <option value="0" selected>0</option>                 <option value="1">1</option>                 <option value="2">2</option>                 <option value="3">3</option>                 <option value="4">4</option>                 <option value="5">5</option>                 </select>               </div>               <div>              <div class="font-panel-icon line-space-img" ></div>               <select class="line-height from-control edit-menu-row1-dd-fs">                 <option value="117" selected>1.0</option>                 <option value="175">1.5</option>                 <option value="233">2.0</option>                 <option value="291">2.5</option>                 <option value="349">3.0</option>                 <option value="407">3.5</option>                 <option value="465">4.0</option>               </select>               </div>               <div>                <div class="font-panel-icon text-padding-img" ></div>                   <!-- <img class="icon-set line-height-img" src="images/icons/text-padding25.png" style="float:left;display:inline;"> -->               <select class="padding from-control edit-menu-row1-dd-fs">                 <option value="0" selected>0</option>                 <option value="5">0.5</option>                 <option value="10">1.0</option>                 <option value="15">1.5</option>                 <option value="20">2.0</option>                 <option value="25">2.5</option>                 <option value="30">3.0</option>                 <option value="35">3.5</option>                 <option value="40">4.0</option>               </select>               </div>             </div>            </div>')};J.prototype.bindEvents=function(){var L=this;this.element.mousedown(function(M){M.stopPropagation();return L.selectFontPanel()}).mouseup(function(M){J.LEFT_POSITION=L.currentFontPanelPosition().left;J.TOP_POSITION=L.currentFontPanelPosition().right;return L.stopMoveFontPanel()}).on("containerMouseMove",function(N,M,O){if(N.target===L.element.get(0)){if(L.element.position().left<=0){L.stopMoveFontPanel();L.element.css("left","1px")}if(L.element.position().left>=L.element.parent().width()-L.element.width()){L.stopMoveFontPanel();L.element.css("left",L.element.parent().width()-L.element.width()-1+"px")}if(L.element.position().top<=0){L.stopMoveFontPanel();L.element.css("top","1px")}if(L.element.position().top>=L.element.parent().height()-L.element.height()){L.stopMoveFontPanel();L.element.css("top",L.element.parent().height()-L.element.height()-1+"px")}if(L.element.hasClass("ppedit-panel-selected")&&(O!=null)){return L.moveFontPanel(O.x,O.y)}}}).on("containerMouseLeave",function(){return L.stopMoveFontPanel()}).focusin(function(M){if(M.target!==L.element.get(0)){return L.stopMoveFontPanel()}});this.element.find("select.fontTypeBtn").change(function(N){var M;M=$(N.target).find("option:selected").val();return L.root.trigger("fontTypeChanged",[M])});this.element.find("select.letter-space").change(function(N){var M;M=$(N.target).find("option:selected").val()+"px";return L.root.trigger("letterSpaceChanged",[M])});this.element.find("select.fontSizeBtn").change(function(N){var M;M=$(N.target).find("option:selected").val()+"pt";return L.root.trigger("fontSizeChanged",[M])});this.element.find("select.line-height").change(function(N){var M;M=$(N.target).find("option:selected").val();if(M!=="normal"){M+="%"}return L.root.trigger("lineHeightChanged",[M])});this.element.find("select.padding").change(function(N){var M;M=$(N.target).find("option:selected").val()+"px";return L.root.trigger("paddingChanged",[M])});this.element.find(".colorPicker").click(function(M){return $(M.target).colpick({colorScheme:"dark",layout:"rgbhex",color:"ff8800",onSubmit:function(N,Q,O,P){L.element.trigger("textColorChanged",[Q]);return $(P).colpickHide()}})});this.element.find(".boldButton").click(function(N){var M;if($(N.target).hasClass("boldButtonDisable")){M=$(N.target).attr("class","boldButton boldButtonEnable font-panel-icon-row");return M.trigger(M.hasClass("boldButtonEnable font-panel-icon-row")?"fontWeightBtnEnableClick":"fontWeightBtnDisableClick")}else{M=$(N.target).attr("class","boldButtonDisable font-panel-icon-row");return M.trigger(M.hasClass(".boldButtonDisable font-panel-icon")?"fontWeightBtnEnableClick":"fontWeightBtnDisableClick")}});this.element.find(".italicButton").click(function(N){var M;if($(N.target).hasClass("italicButtonDisable")){M=$(N.target).attr("class","italicButtonEnable font-panel-icon-row");return M.trigger(M.hasClass("italicButtonEnable font-panel-icon-row")?"fontItalicBtnEnableClick":"fontItalicBtnDisableClick")}else{M=$(N.target).attr("class","italicButtonDisable font-panel-icon-row");return M.trigger(M.hasClass(".italicButtonDisable font-panel-icon")?"fontItalicBtnEnableClick":"fontItalicBtnDisableClick")}});this.element.find(".underlineButton").click(function(N){var M;if($(N.target).hasClass("underlineButtonDisable")){M=$(N.target).attr("class","underlineButtonEnable font-panel-icon-row");return M.trigger(M.hasClass("underlineButtonEnable font-panel-icon-row")?"fontUnderlinedBtnEnableClick":"fontUnderlinedBtnDisableClick")}else{M=$(N.target).attr("class","underlineButtonDisable font-panel-icon-row");return M.trigger(M.hasClass(".underlineButtonDisable font-panel-icon-row")?"fontUnderlinedBtnEnableClick":"fontUnderlinedBtnDisableClick")}});this.element.find(".centerAlignBtn").click(function(N){var M;if($(N.target).hasClass("centerAlignButtonDisable")){M=$(N.target).attr("class","centerAlignBtn centerAlignButtonEnable font-panel-icon-row");L.element.find(".leftAlignBtn").attr("class","leftAlignBtn leftAlignButtonDisable font-panel-icon-row");L.element.find(".rightAlignBtn").attr("class","rightAlignBtn rightAlignButtonDisable font-panel-icon-row");return M.trigger("centerAlignment")}else{M=$(N.target).attr("class","centerAlignBtn centerAlignButtonDisable font-panel-icon-row");L.element.find(".leftAlignBtn").attr("class","leftAlignBtn leftAlignButtonEnable font-panel-icon-row");L.element.find(".rightAlignBtn").attr("class","rightAlignBtn rightAlignButtonDisable font-panel-icon-row");return $(N.target).trigger("leftAlignment")}});this.element.find(".rightAlignBtn").click(function(N){var M;if($(N.target).hasClass("rightAlignButtonDisable")){M=$(N.target).attr("class","rightAlignBtn rightAlignButtonEnable font-panel-icon-row");L.element.find(".leftAlignBtn").attr("class","leftAlignBtn leftAlignButtonDisable font-panel-icon-row");L.element.find(".centerAlignBtn").attr("class","centerAlignBtn centerAlignButtonDisable font-panel-icon-row");return M.trigger("rightAlignment")}else{M=$(N.target).attr("class","rightAlignBtn rightAlignButtonDisable font-panel-icon-row");L.element.find(".leftAlignBtn").attr("class","leftAlignBtn leftAlignButtonEnable font-panel-icon-row");L.element.find(".centerAlignBtn").attr("class","centerAlignBtn centerAlignButtonDisable font-panel-icon-row");return $(N.target).trigger("leftAlignment")}});this.element.find(".leftAlignBtn").click(function(N){var M;if($(N.target).hasClass("leftAlignButtonDisable")){M=$(N.target).attr("class","leftAlignBtn leftAlignButtonEnable font-panel-icon-row");L.element.find(".rightAlignBtn").attr("class","rightAlignBtn rightAlignButtonDisable font-panel-icon-row");L.element.find(".centerAlignBtn").attr("class","centerAlignBtn centerAlignButtonDisable font-panel-icon-row");return M.trigger("leftAlignment")}});this.element.find(".rightAlignBtn").click(function(M){return $(M.target).trigger("rightAlignment")});this.element.find(".leftAlignBtn").click(function(M){return $(M.target).trigger("leftAlignment")});this.element.find(".bulletPointBtn").click(function(M){return $(M.target).trigger("bulletPointBtnEnableClick")});this.element.find(".orderedPointBtn").click(function(M){return $(M.target).trigger("orderedPointBtnEnableClick")});this.element.find(".gridElementBtn").click(function(){return $(event.target).trigger("panelClickGridBtnClick")});return this.element.find(".snapBtn").click(function(){if(!$(event.target).hasClass("snapBtn-selected")){return $(event.target).addClass("snapBtn-selected")}else{return $(event.target).removeClass("snapBtn-selected")}})};J.prototype.changeColor=function(L,O,M,N){$(N).css("background-color","#"+O);return $(N).colpickHide()};J.prototype.setSettingsFromStyle=function(L){this.element.find(".fontTypeBtn").children().removeAttr("selected").filter("option[value="+L["font-family"]+"]").attr("selected","selected");this.element.find(".fontSizeBtn").children().removeAttr("selected").filter('option[value="'+parseInt(L["font-size"])+'"]').attr("selected","selected");this.element.find(".letter-space").children().removeAttr("selected").filter('option[value="'+parseInt(L["letter-spacing"])+'"]').attr("selected","selected");this.element.find(".line-height").children().removeAttr("selected").filter('option[value="'+parseInt(L["line-height"])+'"]').attr("selected","selected");this.element.find(".padding").children().removeAttr("selected").filter('option[value="'+parseInt(L.padding)+'"]').attr("selected","selected");this._switchBtn(".wbtn",L["font-weight"]==="bold");this._switchBtn(".ubtn",L["text-decoration"].indexOf("underline")!==-1);this._switchBtn(".ibtn",L["font-style"]==="italic");this.element.find(".centerAlignBtn").removeClass("active");this.element.find(".leftAlignBtn").removeClass("active");this.element.find(".rightAlignBtn").removeClass("active");if(L["text-align"]==="left"){return this.element.find(".leftAlignBtn").addClass("active")}else{if(L["text-align"]==="center"){return this.element.find(".centerAlignBtn").addClass("active")}else{if(L["text-align"]==="right"){return this.element.find(".rightAlignBtn").addClass("active")}}}};J.prototype._switchBtn=function(L,M){if(M){return this.element.find(L).addClass("ppedit-btn-enabled active")}else{return this.element.find(L).removeClass("ppedit-btn-enabled active")}};J.prototype.selectFontPanel=function(){return this.element.addClass("ppedit-panel-selected")};J.prototype.moveFontPanel=function(M,L){var P,O,N;P=this.currentFontPanelPosition();O=M+P.left;N=L+P.top;return this.setFontPanelPosition(O,N)};J.prototype.stopMoveFontPanel=function(){return this.element.removeClass("ppedit-panel-selected")};J.prototype.currentFontPanelPosition=function(){return this.element.position()};J.prototype.setFontPanelPosition=function(L,M){this.element.css("left",L+"px");return this.element.css("top",M+"px")};return J})(w);m=(function(J){G(K,J);function K(L){this.root=L;K.__super__.constructor.call(this,this.root)}K.prototype.buildElement=function(){return this.element=$('            <div class="left-sidebar">              <div class="main-panel-icon undoImg"></div>              <div class="main-panel-icon redoImg"></div>              <div class="main-panel-icon gridImg"></div>              <div class="main-panel-icon snapImg"></div>          </div>')};K.prototype.bindEvents=function(){var L=this;this.element.find(".snapImg").click(function(){if(!$(event.target).hasClass("snapBtn-selected")){return $(event.target).addClass("snapBtn-selected")}else{return $(event.target).removeClass("snapBtn-selected")}});this.element.find(".gridImg").click(function(){return L.root.trigger("panelClickGridBtnClick")});this.element.find(".undoImg").click(function(){return L.root.trigger("requestUndo")});return this.element.find(".redoImg").click(function(){return L.root.trigger("requestRedo")})};return K})(w);(function(N,P,R){var Q,K,S,J,M,O,L;Q=void 0;L={"default":"cool!"};M=false;S=null;J=null;K={init:function(T){Q=N(this);N.extend(L,T||{});J=new o(Q);J.buildElement();Q.append(J.element);J.bindEvents();if(T.onload!=null){T.onload()}return Q},doSomething:function(T){return Q},destroy:function(){return Q},save:function(){return J.commandManager.getUndoJSON()},allHunks:function(){return J.area.boxesContainer.getAllHunks()},clearHistory:function(){J.commandManager.clearHistory();return Q},load:function(T){J.load(T.hunks);return Q}};O={toggleFlag:function(){return M=!M}};return N.fn.ppedit=function(T){if(K[T]){return K[T].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof T==="object"||!T){return K.init.apply(this,arguments)}else{return N.error("Method "+T+" does not exist on jquery.ppedit")}}}})(jQuery,window,document)}).call(this);