!function(b){var a=function(c,e){this.element=b(c);this.picker=b('<div class="slider"><div class="slider-track"><div class="slider-selection"></div><div class="slider-handle"></div><div class="slider-handle"></div></div><div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div></div>').insertBefore(this.element).append(this.element);if(this.id=this.element.data("slider-id")||e.id){this.picker[0].id=this.id}"undefined"!==typeof Modernizr&&Modernizr.touch&&(this.touchCapable=!0);var d=this.element.data("slider-tooltip")||e.tooltip;this.tooltip=this.picker.find(".tooltip");this.tooltipInner=this.tooltip.find("div.tooltip-inner");this.orientation=this.element.data("slider-orientation")||e.orientation;switch(this.orientation){case"vertical":this.picker.addClass("slider-vertical");this.stylePos="top";this.mousePos="pageY";this.sizePos="offsetHeight";this.tooltip.addClass("right")[0].style.left="100%";break;default:this.picker.addClass("slider-horizontal").css("width",this.element.outerWidth()),this.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth",this.tooltip.addClass("top")[0].style.top=-this.tooltip.outerHeight()-14+"px"}this.min=this.element.data("slider-min")||e.min;this.max=this.element.data("slider-max")||e.max;this.step=this.element.data("slider-step")||e.step;this.value=this.element.data("slider-value")||e.value;this.value[1]&&(this.range=!0);this.selection=this.element.data("slider-selection")||e.selection;this.selectionEl=this.picker.find(".slider-selection");"none"===this.selection&&this.selectionEl.addClass("hide");this.selectionElStyle=this.selectionEl[0].style;this.handle1=this.picker.find(".slider-handle:first");this.handle1Stype=this.handle1[0].style;this.handle2=this.picker.find(".slider-handle:last");this.handle2Stype=this.handle2[0].style;switch(this.element.data("slider-handle")||e.handle){case"round":this.handle1.addClass("round");this.handle2.addClass("round");break;case"triangle":this.handle1.addClass("triangle"),this.handle2.addClass("triangle")}this.range?(this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=[Math.max(this.min,Math.min(this.max,this.value))],this.handle2.addClass("hide"),this.value[1]="after"==this.selection?this.max:this.min);this.diff=this.max-this.min;this.percentage=[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff];this.offset=this.picker.offset();this.size=this.picker[0][this.sizePos];this.formater=e.formater;this.layout();if(this.touchCapable){this.picker.on({touchstart:b.proxy(this.mousedown,this)})}else{this.picker.on({mousedown:b.proxy(this.mousedown,this)})}if("show"===d){this.picker.on({mouseenter:b.proxy(this.showTooltip,this),mouseleave:b.proxy(this.hideTooltip,this)})}else{this.tooltip.addClass("hide")}};a.prototype={constructor:a,over:!1,inDrag:!1,showTooltip:function(){this.tooltip.addClass("in");this.over=!0},hideTooltip:function(){!1===this.inDrag&&this.tooltip.removeClass("in");this.over=!1},layout:function(){this.handle1Stype[this.stylePos]=this.percentage[0]+"%";this.handle2Stype[this.stylePos]=this.percentage[1]+"%";"vertical"==this.orientation?(this.selectionElStyle.top=Math.min(this.percentage[0],this.percentage[1])+"%",this.selectionElStyle.height=Math.abs(this.percentage[0]-this.percentage[1])+"%"):(this.selectionElStyle.left=Math.min(this.percentage[0],this.percentage[1])+"%",this.selectionElStyle.width=Math.abs(this.percentage[0]-this.percentage[1])+"%");this.range?(this.tooltipInner.text(this.formater(this.value[0])+" : "+this.formater(this.value[1])),this.tooltip[0].style[this.stylePos]=this.size*(this.percentage[0]+(this.percentage[1]-this.percentage[0])/2)/100-("vertical"===this.orientation?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+"px"):(this.tooltipInner.text(this.formater(this.value[0])),this.tooltip[0].style[this.stylePos]=this.size*this.percentage[0]/100-("vertical"===this.orientation?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+"px")},mousedown:function(c){this.touchCapable&&"touchstart"===c.type&&(c=c.originalEvent);this.offset=this.picker.offset();this.size=this.picker[0][this.sizePos];c=this.getPercentage(c);if(this.range){var e=Math.abs(this.percentage[0]-c),d=Math.abs(this.percentage[1]-c);this.dragged=e<d?0:1}else{this.dragged=0}this.percentage[this.dragged]=c;this.layout();if(this.touchCapable){b(document).on({touchmove:b.proxy(this.mousemove,this),touchend:b.proxy(this.mouseup,this)})}else{b(document).on({mousemove:b.proxy(this.mousemove,this),mouseup:b.proxy(this.mouseup,this)})}this.inDrag=!0;c=this.calculateValue();this.element.trigger({type:"slideStart",value:c}).trigger({type:"slide",value:c});return !1},mousemove:function(c){this.touchCapable&&"touchmove"===c.type&&(c=c.originalEvent);c=this.getPercentage(c);this.range&&(0===this.dragged&&this.percentage[1]<c?(this.percentage[0]=this.percentage[1],this.dragged=1):1===this.dragged&&this.percentage[0]>c&&(this.percentage[1]=this.percentage[0],this.dragged=0));this.percentage[this.dragged]=c;this.layout();c=this.calculateValue();this.element.trigger({type:"slide",value:c}).data("value",c).prop("value",c);return !1},mouseup:function(c){this.touchCapable?b(document).off({touchmove:this.mousemove,touchend:this.mouseup}):b(document).off({mousemove:this.mousemove,mouseup:this.mouseup});this.inDrag=!1;!1==this.over&&this.hideTooltip();this.element;c=this.calculateValue();this.element.trigger({type:"slideStop",value:c}).data("value",c).prop("value",c);return !1},calculateValue:function(){var c;this.range?this.value=c=[this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step,this.min+Math.round(this.diff*this.percentage[1]/100/this.step)*this.step]:(c=this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step,this.value=[c,this.value[1]]);return c},getPercentage:function(c){this.touchCapable&&(c=c.touches[0]);c=100*(c[this.mousePos]-this.offset[this.stylePos])/this.size;c=Math.round(c/this.percentage[2])*this.percentage[2];return Math.max(0,Math.min(100,c))},getValue:function(){return this.range?this.value:this.value[0]},setValue:function(c){this.value=c;this.range?(this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=[Math.max(this.min,Math.min(this.max,this.value))],this.handle2.addClass("hide"),this.value[1]="after"==this.selection?this.max:this.min);this.diff=this.max-this.min;this.percentage=[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff];this.layout()}};b.fn.slider=function(c,d){return this.each(function(){var f=b(this),e=f.data("slider"),g="object"===typeof c&&c;e||f.data("slider",e=new a(this,b.extend({},b.fn.slider.defaults,g)));if("string"==typeof c){e[c](d)}})};b.fn.slider.defaults={min:0,max:10,step:1,orientation:"horizontal",value:5,selection:"before",tooltip:"show",handle:"round",formater:function(c){return c}};b.fn.slider.Constructor=a}(window.jQuery);(function(j){var g=function(){var ad={showEvent:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},colorScheme:"light",color:"3289c7",livePreview:!0,flat:!1,layout:"full",submit:1,submitText:"OK",height:156},af=function(l,m){var n=a(l);j(m).data("colpick").fields.eq(1).val(n.r).end().eq(2).val(n.g).end().eq(3).val(n.b).end()},aa=function(l,m){j(m).data("colpick").fields.eq(4).val(Math.round(l.h)).end().eq(5).val(Math.round(l.s)).end().eq(6).val(Math.round(l.b)).end()},ae=function(l,m){j(m).data("colpick").fields.eq(0).val(c(l))},Z=function(l,m){j(m).data("colpick").selector.css("backgroundColor","#"+c({h:l.h,s:100,b:100}));j(m).data("colpick").selectorIndic.css({left:parseInt(j(m).data("colpick").height*l.s/100,10),top:parseInt(j(m).data("colpick").height*(100-l.b)/100,10)})},ac=function(l,m){j(m).data("colpick").hue.css("top",parseInt(j(m).data("colpick").height-j(m).data("colpick").height*l.h/360,10))},P=function(l,m){j(m).data("colpick").currentColor.css("backgroundColor","#"+c(l))},V=function(l,m){j(m).data("colpick").newColor.css("backgroundColor","#"+c(l))},Y=function(l){l=j(this).parent().parent();var m;if(0<this.parentNode.className.indexOf("_hex")){m=l.data("colpick");var t=this.value,n=6-t.length;if(0<n){for(var s=[],q=0;q<n;q++){s.push("0")}s.push(t);t=s.join("")}m.color=m=h(t);af(m,l.get(0));aa(m,l.get(0))}else{0<this.parentNode.className.indexOf("_hsb")?(l.data("colpick").color=m=O({h:parseInt(l.data("colpick").fields.eq(4).val(),10),s:parseInt(l.data("colpick").fields.eq(5).val(),10),b:parseInt(l.data("colpick").fields.eq(6).val(),10)}),af(m,l.get(0)),ae(m,l.get(0))):(m=l.data("colpick"),t=parseInt(l.data("colpick").fields.eq(1).val(),10),n=parseInt(l.data("colpick").fields.eq(2).val(),10),s=parseInt(l.data("colpick").fields.eq(3).val(),10),t={r:Math.min(255,Math.max(0,t)),g:Math.min(255,Math.max(0,n)),b:Math.min(255,Math.max(0,s))},m.color=m=e(t),ae(m,l.get(0)),aa(m,l.get(0)))}Z(m,l.get(0));ac(m,l.get(0));V(m,l.get(0));l.data("colpick").onChange.apply(l.parent(),[m,c(m),a(m)])},G=function(l){j(this).parent().removeClass("colpick_focus")},k=function(){j(this).parent().parent().data("colpick").fields.parent().removeClass("colpick_focus");j(this).parent().addClass("colpick_focus")},p=function(l){l.preventDefault?l.preventDefault():l.returnValue=!1;var m=j(this).parent().find("input").focus();l={el:j(this).parent().addClass("colpick_slider"),max:0<this.parentNode.className.indexOf("_hsb_h")?360:0<this.parentNode.className.indexOf("_hsb")?100:255,y:l.pageY,field:m,val:parseInt(m.val(),10),preview:j(this).parent().parent().data("colpick").livePreview};j(document).mouseup(l,U);j(document).mousemove(l,r)},r=function(l){l.data.field.val(Math.max(0,Math.min(l.data.max,parseInt(l.data.val-l.pageY+l.data.y,10))));l.data.preview&&Y.apply(l.data.field.get(0),[!0]);return !1},U=function(l){Y.apply(l.data.field.get(0),[!0]);l.data.el.removeClass("colpick_slider").find("input").focus();j(document).off("mouseup",U);j(document).off("mousemove",r);return !1},W=function(l){l.preventDefault?l.preventDefault():l.returnValue=!1;var m={cal:j(this).parent(),y:j(this).offset().top};m.preview=m.cal.data("colpick").livePreview;j(document).mouseup(m,o);j(document).mousemove(m,ab);Y.apply(m.cal.data("colpick").fields.eq(4).val(parseInt(360*(m.cal.data("colpick").height-(l.pageY-m.y))/m.cal.data("colpick").height,10)).get(0),[m.preview])},ab=function(l){Y.apply(l.data.cal.data("colpick").fields.eq(4).val(parseInt(360*(l.data.cal.data("colpick").height-Math.max(0,Math.min(l.data.cal.data("colpick").height,l.pageY-l.data.y)))/l.data.cal.data("colpick").height,10)).get(0),[l.data.preview]);return !1},o=function(l){af(l.data.cal.data("colpick").color,l.data.cal.get(0));ae(l.data.cal.data("colpick").color,l.data.cal.get(0));j(document).off("mouseup",o);j(document).off("mousemove",ab);return !1},d=function(l){l.preventDefault?l.preventDefault():l.returnValue=!1;var m={cal:j(this).parent(),pos:j(this).offset()};m.preview=m.cal.data("colpick").livePreview;j(document).mouseup(m,z);j(document).mousemove(m,D);Y.apply(m.cal.data("colpick").fields.eq(6).val(parseInt(100*(m.cal.data("colpick").height-(l.pageY-m.pos.top))/m.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*(l.pageX-m.pos.left)/m.cal.data("colpick").height,10)).get(0),[m.preview])},D=function(l){Y.apply(l.data.cal.data("colpick").fields.eq(6).val(parseInt(100*(l.data.cal.data("colpick").height-Math.max(0,Math.min(l.data.cal.data("colpick").height,l.pageY-l.data.pos.top)))/l.data.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(l.data.cal.data("colpick").height,l.pageX-l.data.pos.left))/l.data.cal.data("colpick").height,10)).get(0),[l.data.preview]);return !1},z=function(l){af(l.data.cal.data("colpick").color,l.data.cal.get(0));ae(l.data.cal.data("colpick").color,l.data.cal.get(0));j(document).off("mouseup",z);j(document).off("mousemove",D);return !1},y=function(l){l=j(this).parent();var m=l.data("colpick").color;l.data("colpick").origColor=m;P(m,l.get(0));l.data("colpick").onSubmit(m,c(m),a(m),l.data("colpick").el)},w=function(l){l=j("#"+j(this).data("colpickId"));l.data("colpick").onBeforeShow.apply(this,[l.get(0)]);var m=j(this).offset(),q=m.top+this.offsetHeight,m=m.left,n=v();m+346>n.l+n.w&&(m-=346);l.css({left:m+"px",top:q+"px"});!1!=l.data("colpick").onShow.apply(this,[l.get(0)])&&l.show();j("html").mousedown({cal:l},R);l.mousedown(function(s){s.stopPropagation()})},R=function(l){!1!=l.data.cal.data("colpick").onHide.apply(this,[l.data.cal.get(0)])&&l.data.cal.hide();j("html").off("mousedown",R)},v=function(){var l="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(l?document.documentElement.scrollLeft:document.body.scrollLeft),w:window.innerWidth||(l?document.documentElement.clientWidth:document.body.clientWidth)}},O=function(l){return{h:Math.min(360,Math.max(0,l.h)),s:Math.min(100,Math.max(0,l.s)),b:Math.min(100,Math.max(0,l.b))}},X=function(){var l=j(this).parent(),m=l.data("colpick").origColor;l.data("colpick").color=m;af(m,l.get(0));ae(m,l.get(0));aa(m,l.get(0));Z(m,l.get(0));ac(m,l.get(0));V(m,l.get(0))};return{init:function(l){l=j.extend({},ad,l||{});if("string"==typeof l.color){l.color=h(l.color)}else{if(void 0!=l.color.r&&void 0!=l.color.g&&void 0!=l.color.b){l.color=e(l.color)}else{if(void 0!=l.color.h&&void 0!=l.color.s&&void 0!=l.color.b){l.color=O(l.color)}else{return this}}}return this.each(function(){if(!j(this).data("colpickId")){var m=j.extend({},l);m.origColor=l.color;var t="collorpicker_"+parseInt(1000*Math.random());j(this).data("colpickId",t);t=j('<div class="colpick"><div class="colpick_color"><div class="colpick_color_overlay1"><div class="colpick_color_overlay2"><div class="colpick_selector_outer"><div class="colpick_selector_inner"></div></div></div></div></div><div class="colpick_hue"><div class="colpick_hue_arrs"><div class="colpick_hue_larr"></div><div class="colpick_hue_rarr"></div></div></div><div class="colpick_new_color"></div><div class="colpick_current_color"></div><div class="colpick_hex_field"><div class="colpick_field_letter">#</div><input type="text" maxlength="6" size="6" /></div><div class="colpick_rgb_r colpick_field"><div class="colpick_field_letter">R</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_g colpick_field"><div class="colpick_field_letter">G</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_h colpick_field"><div class="colpick_field_letter">H</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_s colpick_field"><div class="colpick_field_letter">S</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_submit"></div></div>').attr("id",t);t.addClass("colpick_"+m.layout+(m.submit?"":" colpick_"+m.layout+"_ns"));"light"!=m.colorScheme&&t.addClass("colpick_"+m.colorScheme);t.find("div.colpick_submit").html(m.submitText).click(y);m.fields=t.find("input").change(Y).blur(G).focus(k);t.find("div.colpick_field_arrs").mousedown(p).end().find("div.colpick_current_color").click(X);m.selector=t.find("div.colpick_color").mousedown(d);m.selectorIndic=m.selector.find("div.colpick_selector_outer");m.el=this;m.hue=t.find("div.colpick_hue_arrs");huebar=m.hue.parent();var n=navigator.userAgent.toLowerCase(),s="Microsoft Internet Explorer"===navigator.appName,q=s?parseFloat(n.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,n="#ff0000 #ff0080 #ff00ff #8000ff #0000ff #0080ff #00ffff #00ff80 #00ff00 #80ff00 #ffff00 #ff8000 #ff0000".split(" ");if(s&&10>q){for(s=0;11>=s;s++){q=j("<div></div>").attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+n[s]+", endColorstr="+n[s+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+n[s]+", endColorstr="+n[s+1]+')";'),huebar.append(q)}}else{stopList=n.join(","),huebar.attr("style","background:-webkit-linear-gradient(top center,"+stopList+"); background:-moz-linear-gradient(top center,"+stopList+"); background:linear-gradient(to bottom,"+stopList+"); "),huebar.css({background:"linear-gradient(to bottom,"+stopList+")"}),huebar.css({background:"-moz-linear-gradient(top,"+stopList+")"})}t.find("div.colpick_hue").mousedown(W);m.newColor=t.find("div.colpick_new_color");m.currentColor=t.find("div.colpick_current_color");t.data("colpick",m);af(m.color,t.get(0));aa(m.color,t.get(0));ae(m.color,t.get(0));ac(m.color,t.get(0));Z(m.color,t.get(0));P(m.color,t.get(0));V(m.color,t.get(0));m.flat?(t.appendTo(this).show(),t.css({position:"relative",display:"block"})):(t.appendTo(document.body),j(this).on(m.showEvent,w),t.css({position:"absolute"}))}})},showPicker:function(){return this.each(function(){j(this).data("colpickId")&&w.apply(this)})},hidePicker:function(){return this.each(function(){j(this).data("colpickId")&&j("#"+j(this).data("colpickId")).hide()})},setColor:function(l,m){m="undefined"===typeof m?1:m;if("string"==typeof l){l=h(l)}else{if(void 0!=l.r&&void 0!=l.g&&void 0!=l.b){l=e(l)}else{if(void 0!=l.h&&void 0!=l.s&&void 0!=l.b){l=O(l)}else{return this}}}return this.each(function(){if(j(this).data("colpickId")){var n=j("#"+j(this).data("colpickId"));n.data("colpick").color=l;n.data("colpick").origColor=l;af(l,n.get(0));aa(l,n.get(0));ae(l,n.get(0));ac(l,n.get(0));Z(l,n.get(0));V(l,n.get(0));n.data("colpick").onChange.apply(n.parent(),[l,c(l),a(l),1]);m&&P(l,n.get(0))}})}}}(),b=function(k){k=parseInt(-1<k.indexOf("#")?k.substring(1):k,16);return{r:k>>16,g:(k&65280)>>8,b:k&255}},h=function(k){return e(b(k))},e=function(m){var l={h:0,s:0,b:0},o=Math.min(m.r,m.g,m.b),k=Math.max(m.r,m.g,m.b),o=k-o;l.b=k;l.s=0!=k?255*o/k:0;l.h=0!=l.s?m.r==k?(m.g-m.b)/o:m.g==k?2+(m.b-m.r)/o:4+(m.r-m.g)/o:-1;l.h*=60;0>l.h&&(l.h+=360);l.s*=100/255;l.b*=100/255;return l},a=function(r){var q,s,p;q=Math.round(r.h);var o=Math.round(255*r.s/100);r=Math.round(255*r.b/100);if(0==o){q=s=p=r}else{var o=(255-o)*r/255,m=q%60*(r-o)/60;360==q&&(q=0);60>q?(q=r,p=o,s=o+m):120>q?(s=r,p=o,q=r-m):180>q?(s=r,q=o,p=o+m):240>q?(p=r,q=o,s=r-m):300>q?(p=r,s=o,q=o+m):360>q?(q=r,s=o,p=r-m):p=s=q=0}return{r:Math.round(q),g:Math.round(s),b:Math.round(p)}},f=function(d){var k=[d.r.toString(16),d.g.toString(16),d.b.toString(16)];j.each(k,function(m,l){1==l.length&&(k[m]="0"+l)});return k.join("")},c=function(k){return f(a(k))};j.fn.extend({colpick:g.init,colpickHide:g.hidePicker,colpickShow:g.showPicker,colpickSetColor:g.setColor});j.extend({colpickRgbToHex:f,colpickRgbToHsb:e,colpickHsbToHex:c,colpickHsbToRgb:a,colpickHexToHsb:h,colpickHexToRgb:b})})(jQuery);(function(){function I(e){throw e}function p(v,u){var s=[],n=(1<<u)-1,r=v.length*u,l;for(l=0;l<r;l+=u){s[l>>>5]|=(v.charCodeAt(l/u)&n)<<32-u-l%32}return{value:s,binLen:r}}function z(r){var n=[],l=r.length,d,s;0!==l%2&&I("String of HEX type must be in byte increments");for(d=0;d<l;d+=2){s=parseInt(r.substr(d,2),16),isNaN(s)&&I("String of HEX type contains invalid characters"),n[d>>>3]|=s<<24-d%8*4}return{value:n,binLen:4*l}}function q(w){var v=[],s=0,u,A,d,B,r;-1===w.search(/^[a-zA-Z0-9=+\/]+$/)&&I("Invalid character in base-64 string");u=w.indexOf("=");w=w.replace(/\=/g,"");-1!==u&&u<w.length&&I("Invalid '=' found in base-64 string");for(A=0;A<w.length;A+=4){r=w.substr(A,4);for(d=B=0;d<r.length;d+=1){u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(r[d]),B|=u<<18-6*d}for(d=0;d<r.length-1;d+=1){v[s>>2]|=(B>>>16-8*d&255)<<24-s%4*8,s+=1}}return{value:v,binLen:8*s}}function m(v,u){var s="",n=4*v.length,r,l;for(r=0;r<n;r+=1){l=v[r>>>2]>>>8*(3-r%4),s+="0123456789abcdef".charAt(l>>>4&15)+"0123456789abcdef".charAt(l&15)}return u.outputUpper?s.toUpperCase():s}function f(w,v){var u="",r=4*w.length,s,l,A;for(s=0;s<r;s+=3){for(A=(w[s>>>2]>>>8*(3-s%4)&255)<<16|(w[s+1>>>2]>>>8*(3-(s+1)%4)&255)<<8|w[s+2>>>2]>>>8*(3-(s+2)%4)&255,l=0;4>l;l+=1){u=8*s+6*l<=32*w.length?u+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(A>>>6*(3-l)&63):u+v.b64Pad}}return u}function o(l){var k={outputUpper:!1,b64Pad:"="};try{l.hasOwnProperty("outputUpper")&&(k.outputUpper=l.outputUpper),l.hasOwnProperty("b64Pad")&&(k.b64Pad=l.b64Pad)}catch(d){}"boolean"!==typeof k.outputUpper&&I("Invalid outputUpper formatting option");"string"!==typeof k.b64Pad&&I("Invalid b64Pad formatting option");return k}function C(h,g){return h>>>g|h<<32-g}function D(l,k,h){return l&k^~l&h}function F(l,k,h){return l&k^l&h^k&h}function y(e){return C(e,2)^C(e,13)^C(e,22)}function E(e){return C(e,6)^C(e,11)^C(e,25)}function x(e){return C(e,7)^C(e,18)^e>>>3}function a(e){return C(e,17)^C(e,19)^e>>>10}function j(l,k){var h=(l&65535)+(k&65535);return((l>>>16)+(k>>>16)+(h>>>16)&65535)<<16|h&65535}function b(u,s,r,n){var l=(u&65535)+(s&65535)+(r&65535)+(n&65535);return((u>>>16)+(s>>>16)+(r>>>16)+(n>>>16)+(l>>>16)&65535)<<16|l&65535}function t(v,u,s,r,n){var l=(v&65535)+(u&65535)+(s&65535)+(r&65535)+(n&65535);return((v>>>16)+(u>>>16)+(s>>>16)+(r>>>16)+(n>>>16)+(l>>>16)&65535)<<16|l&65535}function c(al,ak,S){var ac,ag,aj,af,T,R,Q,P,M,ad,G,ab,ah,ao,ap,an,ai,N,H,am,ae,n,h,g,e,d,B=[],aq,A;"SHA-224"===S||"SHA-256"===S?(G=64,ao=16,ap=1,e=Number,an=j,ai=b,N=t,H=x,am=a,ae=y,n=E,g=F,h=D,d=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ad="SHA-224"===S?[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]:[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]):I("Unexpected error in SHA-2 implementation");al[ak>>>5]|=128<<24-ak%32;al[(ak+65>>>9<<4)+15]=ak;aq=al.length;for(ab=0;ab<aq;ab+=ao){ak=ad[0];ac=ad[1];ag=ad[2];aj=ad[3];af=ad[4];T=ad[5];R=ad[6];Q=ad[7];for(ah=0;ah<G;ah+=1){B[ah]=16>ah?new e(al[ah*ap+ab],al[ah*ap+ab+1]):ai(am(B[ah-2]),B[ah-7],H(B[ah-15]),B[ah-16]),P=N(Q,n(af),h(af,T,R),d[ah],B[ah]),M=an(ae(ak),g(ak,ac,ag)),Q=R,R=T,T=af,af=an(aj,P),aj=ag,ag=ac,ac=ak,ak=an(P,M)}ad[0]=an(ak,ad[0]);ad[1]=an(ac,ad[1]);ad[2]=an(ag,ad[2]);ad[3]=an(aj,ad[3]);ad[4]=an(af,ad[4]);ad[5]=an(T,ad[5]);ad[6]=an(R,ad[6]);ad[7]=an(Q,ad[7])}"SHA-224"===S?A=[ad[0],ad[1],ad[2],ad[3],ad[4],ad[5],ad[6]]:"SHA-256"===S?A=ad:I("Unexpected error in SHA-2 implementation");return A}window.jsSHA=function(G,w,v){var u=null,r=null,s=0,l=[0],d=0,H=null,d="undefined"!==typeof v?v:8;8===d||16===d||I("charSize must be 8 or 16");"HEX"===w?(0!==G.length%2&&I("srcString of HEX type must be in byte increments"),H=z(G),s=H.binLen,l=H.value):"ASCII"===w||"TEXT"===w?(H=p(G,d),s=H.binLen,l=H.value):"B64"===w?(H=q(G),s=H.binLen,l=H.value):I("inputFormat must be HEX, TEXT, ASCII, or B64");this.getHash=function(K,J,A){var k=null,B=l.slice(),n="";switch(J){case"HEX":k=m;break;case"B64":k=f;break;default:I("format must be HEX or B64")}"SHA-224"===K?(null===u&&(u=c(B,s,K)),n=k(u,o(A))):"SHA-256"===K?(null===r&&(r=c(B,s,K)),n=k(r,o(A))):I("Chosen SHA variant is not supported");return n};this.getHMAC=function(N,M,L,K,J){var T,A,R,S,P,B=[],Q=[],O=null;switch(K){case"HEX":T=m;break;case"B64":T=f;break;default:I("outputFormat must be HEX or B64")}"SHA-224"===L?(R=64,P=224):"SHA-256"===L?(R=64,P=256):I("Chosen SHA variant is not supported");"HEX"===M?(O=z(N),S=O.binLen,A=O.value):"ASCII"===M||"TEXT"===M?(O=p(N,d),S=O.binLen,A=O.value):"B64"===M?(O=q(N),S=O.binLen,A=O.value):I("inputFormat must be HEX, TEXT, ASCII, or B64");N=8*R;M=R/4-1;R<S/8?(A=c(A,S,L),A[M]&=4294967040):R>S/8&&(A[M]&=4294967040);for(R=0;R<=M;R+=1){B[R]=A[R]^909522486,Q[R]=A[R]^1549556828}L=c(Q.concat(c(B.concat(l),N+s,L)),N+P,L);return T(L,o(J))}}})();var CSSJSON=new function(){var f=this;f.init=function(){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.repeat=function(g){return Array(1+g).join(this)}};f.init();var c=/\/\*[\s\S]*?\*\//g,a=/([^\:]+):([^\;]*);/,e=/(\/\*[\s\S]*?\*\/)|([^\s\;\{\}][^\;\{\}]*(?=\{))|(\})|([^\;\{\}]+\;(?!\s*\*\/))/gmi,b=function(g){return"undefined"==typeof g||0==g.length||null==g};f.toJSON=function(j,m){var l={children:{},attributes:{}},o=null,q=0;"undefined"==typeof m&&(m={ordered:!1,comments:!1,stripComments:!1,split:!1});m.stripComments&&(m.comments=!1,j=j.replace(c,""));for(;null!=(o=e.exec(j));){if(!b(o[1])&&m.comments){o=o[1].trim(),l[q++]=o}else{if(b(o[2])){if(b(o[3])){b(o[4])||(o=o[4].trim(),(r=a.exec(o))?(o=r[1].trim(),r=r[2].trim(),m.ordered?(p={},p.name=o,p.value=r,p.type="attr",l[q++]=p):o in l.attributes?(p=l.attributes[o],p instanceof Array||(l.attributes[o]=[p]),l.attributes[o].push(r)):l.attributes[o]=r):l[q++]=o)}else{break}}else{var o=o[2].trim(),r=f.toJSON(j,m);if(m.ordered){var p={};p.name=o;p.value=r;p.type="rule";l[q++]=p}else{for(i in o=m.split?o.split(","):[o],o){if(p=o[i].trim(),p in l.children){for(var d in r.attributes){l.children[p].attributes[d]=r.attributes[d]}}else{l.children[p]=r}}}}}}return l};f.toCSS=function(d,o,j){var m="";"undefined"==typeof o&&(o=0);"undefined"==typeof j&&(j=!1);if(d.attributes){for(i in d.attributes){var t=d.attributes[i];if(t instanceof Array){for(var u=0;u<t.length;u++){var q;q=i;var p=t[u];q="\t".repeat(o)+q+": "+p+";\n";m+=q}}else{u=m,m=i,t="\t".repeat(o)+m+": "+t+";\n",m=u+t}}}if(d.children){for(i in t=!0,d.children){j&&!t?m+="\n":t=!1,u=m,p=i,m=d.children[i],q=o,p="\t".repeat(q)+p+" {\n",p+=f.toCSS(m,q+1),p+="\t".repeat(q)+"}\n",m=u+p}}return m}};(function(){var aq,ad,al,af,Y,W,aa,am,an,ap,aj,ao,ai,c,X,j,ah,V,b,o,p,ac,ae,ak,f,a,U,O,D,z,ab,y,Z={}.hasOwnProperty,ag=function(d,e){function h(){this.constructor=d}for(var g in e){Z.call(e,g)&&(d[g]=e[g])}h.prototype=e.prototype;d.prototype=new h;d.__super__=e.prototype;return d};ao=function(){function d(){this.boxIds=[]}d.prototype.undo=function(){};d.prototype.execute=function(){};d.prototype.getType=function(){};d.prototype.getPageNum=function(){};return d}();ac=function(){function d(e){this.root=e;this.element=void 0}d.prototype.buildElement=function(){};d.prototype.bindEvents=function(){};return d}();p=function(){function d(){}d.rectContainsRect=function(e,g){return g.topLeft.left>=e.topLeft.left&&g.topLeft.top>=e.topLeft.top&&g.topLeft.left+g.size.width<=e.topLeft.left+e.size.width&&g.topLeft.top+g.size.height<=e.topLeft.top+e.size.height};d.rectContainsPoint=function(e,g){return g.left>=e.topLeft.left&&g.top>=e.topLeft.top&&g.left<=e.topLeft.left+e.size.width&&g.top<=e.topLeft.top+e.size.height};d.pointEqualToPoint=function(e,g){return e.left===g.left&&e.top===g.top};return d}();ak=function(){function d(){}d.C=67;d.V=86;d.Z=90;d.Y=89;d.DELETE=46;d.SHIFT=16;d.MAC_CMD_LEFT=91;d.MAC_CMD_RIGHT=93;d.MAC_DELETE=8;return d}();D=function(){function d(e){this.root=e}d.prototype.bindEvents=function(){var e=this;return this.root.keydown(function(g){g.keyCode===ak.Z&&g.ctrlKey&&(g.preventDefault(),e.root.trigger("requestUndo"));g.keyCode===ak.Y&&g.ctrlKey&&(g.preventDefault(),e.root.trigger("requestRedo"));if(g.keyCode===ak.DELETE||g.keyCode===ak.DELETE&&g.ctrlKey){g.preventDefault(),e.root.trigger("requestDelete")}g.keyCode===ak.C&&g.ctrlKey&&g.shiftKey&&(g.preventDefault(),e.root.trigger("requestCopy"));if(g.keyCode===ak.V&&g.ctrlKey&&g.shiftKey){return g.preventDefault(),e.root.trigger("requestPaste")}})};return d}();a=function(){function d(e){this.root=e;this.rightCmdKeyPressed=this.leftCmdKeyPressed=!1}d.prototype.bindEvents=function(){var e=this;return this.root.keydown(function(g){if(g.keyCode===ak.MAC_CMD_LEFT){return e.leftCmdKeyPressed=!0}if(g.keyCode===ak.Z&&e._cmdKeyIsPressed()){return g.preventDefault(),e.root.trigger("requestUndo")}if(g.keyCode===ak.Y&&e._cmdKeyIsPressed()){return g.preventDefault(),e.root.trigger("requestRedo")}if(g.keyCode===ak.MAC_DELETE&&e._cmdKeyIsPressed()){return g.preventDefault(),e.root.trigger("requestDelete")}if(g.keyCode===ak.C&&e._cmdKeyIsPressed()&&g.shiftKey){return g.preventDefault(),e.root.trigger("requestCopy")}if(g.keyCode===ak.V&&e._cmdKeyIsPressed()&&g.shiftKey){return g.preventDefault(),e.root.trigger("requestPaste")}}).keyup(function(g){g.keyCode===ak.MAC_CMD_LEFT&&(e.leftCmdKeyPressed=!1);g.keyCode===ak.MAC_CMD_RIGHT&&(e.rightCmdKeyPressed=!1);if(g.keyCode===ak.SHIFT){return e.shiftKeyPressed=!1}})};d.prototype._cmdKeyIsPressed=function(){return this.rightCmdKeyPressed||this.leftCmdKeyPressed};return d}();j=function(){function d(){}d.getController=function(e){return null!==navigator.userAgent.match(/Macintosh/)?new a(e):new D(e)};return d}();al=function(){function d(e){this.graphic=e;this.content=this.controller=void 0}d.prototype.bindEvents=function(){var e=this;this.controller=j.getController(this.graphic.element);this.graphic.element.on("requestUndo",function(g){e._checkNewContent(!1);return g.stopPropagation()}).focus(function(g){return e._checkNewContent(!0)}).blur(function(g){return e._checkNewContent(!0)});return this.controller.bindEvents()};d.prototype._checkNewContent=function(e){var g;g=this.graphic.element.html();null!=this.content&&this.content!==g&&this.graphic.element.trigger("graphicContentChanged",[{graphic:this.graphic,prevContent:this.content,newContent:g}]);return this.content=e?g:void 0};return d}();ad=function(d){function e(h,g){this.root=h;this.options=g;e.__super__.constructor.call(this,this.root);this.helper=new al(this);this.prevPosition=void 0;this.clickTimeoutId=this.prevMouseUpTime=this.clickCount=this.prevMouseDownTime=0;this.preventDefaultMouseDown=!0}ag(e,d);e.CLICK_TIME_MILLIS=200;e.DBLCLICK_TIME_MILLIS=200;e.TOOLTIP_DISPEAR_MILLS=1000;e.prototype.buildElement=function(){var h,g;g=void 0;h=this.root.find(".ppedit-box");0<h.length&&(g=0,h.each(function(l,k){return g=Math.max(g,parseInt($(k).css("z-index")))}));h=$.extend({left:"50px",top:"50px",width:"75px",height:"50px",color:"black","font-family":"Times New Roman","font-size":"12pt","font-weight":"normal","text-decoration":"none","font-style":"normal","line-height":"117%","letter-spacing":"0px",padding:"0px","z-index":null!=g?g+1:0,"text-align":"left","vertical-align":"bottom"},this.options);return this.element=$("<div></div>").addClass("ppedit-box").attr("contenteditable",!0).attr("id",$.now()).css(h)};e.prototype.bindEvents=function(){var g=this;this.element.mousedown(function(h){h.stopPropagation();g.element.hasClass("ppedit-box-focus")||h.preventDefault();g.select();return g.prevMouseDownTime=h.timeStamp}).mouseup(function(h){h.preventDefault();h.timeStamp-g.prevMouseDownTime<e.CLICK_TIME_MILLIS&&(g.clickCount++,0===g.clickTimeoutId&&(g.clickTimeoutId=setTimeout(function(){1===g.clickCount?g._onClick():2<=g.clickCount&&g._onDoubleClick();g.clickTimeoutId=0;return g.clickCount=0},e.DBLCLICK_TIME_MILLIS)));return g.stopMoving()}).click(function(h){h.stopPropagation();if(!g.element.hasClass("ppedit-box-focus")){return h.preventDefault()}}).dblclick(function(h){h.stopPropagation();if(!g.element.hasClass("ppedit-box-focus")){return h.preventDefault()}}).focus(function(h){return g.element.trigger("boxSelected",[g])}).on("containerMouseMove",function(k,h,l){if(k.target===g.element.get(0)&&!g.element.hasClass("ppedit-box-focus")&&g.element.hasClass("ppedit-box-selected")&&null!=l){return g.move(l.x,l.y)}}).on("containerMouseLeave",function(){return g.stopMoving()}).on("containerMouseUp",function(k,h){return g.stopMoving()}).on("containerKeyDown",function(k,h){if(g.element.hasClass("ppedit-box-selected")){return g._processKeyDownEvent(h)}}).keydown(function(h){if(!g.isFocused()){return g._processKeyDownEvent(h)}}).mouseenter(function(h){return g.element.trigger("boxMouseOver",[g])}).mouseleave(function(h){});return this.helper.bindEvents()};e.prototype._processKeyDownEvent=function(k){var h,g;g=this.currentPosition();h=!1;37===k.which&&(k.preventDefault(),h=!0,this.move(-1,0));38===k.which&&(k.preventDefault(),h=!0,this.move(0,-1));39===k.which&&(k.preventDefault(),h=!0,this.move(1,0));40===k.which&&(k.preventDefault(),h=!0,this.move(0,1));if(h){return this.element.trigger("boxMoved",[this,this.currentPosition(),g])}};e.prototype.stopMoving=function(){this.element.removeClass("ppedit-box-selected");null==this.prevPosition||p.pointEqualToPoint(this.currentPosition(),this.prevPosition)||($(document).find(".snapImg").hasClass("snapBtn-selected")&&this.snap(),this.root.trigger("boxMoved",[this,$.extend(!0,{},this.currentPosition()),$.extend(!0,{},this.prevPosition)]));this.prevPosition=void 0;if($(document).find(".snapImg").hasClass("snapBtn-selected")){return this.root.find(".hDotLine").removeClass("ppedit-hDotLine"),this.root.find(".vDotLine").removeClass("ppedit-vDotLine")}};e.prototype.move=function(k,h){var g;g=this.currentPosition();this.setPosition(k+g.left,h+g.top);g=this.getSnapPosition(this.currentPosition());if($(document).find(".snapImg").hasClass("snapBtn-selected")){return this.root.find(".hDotLine").addClass("ppedit-hDotLine").css("top",g.top),this.root.find(".vDotLine").addClass("ppedit-vDotLine").css("left",g.left)}};e.prototype.setPosition=function(h,g){this.element.css("left",h+"px");return this.element.css("top",g+"px")};e.prototype.currentPosition=function(){return this.element.position()};e.prototype.snap=function(){var g;g=this.getSnapPosition(this.currentPosition());return this.setPosition(g.left,g.top)};e.prototype.getSnapPosition=function(h){var g;g=8*parseInt(h.left/8);h=8*parseInt(h.top/8);return{left:g,top:h}};e.prototype.select=function(){this.element.addClass("ppedit-box-selected");return this.prevPosition=this.currentPosition()};e.prototype.isFocused=function(){return this.element.get(0)===document.activeElement};e.prototype._enableFocus=function(){this.root.find(".ppedit-box").removeClass("ppedit-box-focus").removeClass("ppedit-box-selected");return this.element.addClass("ppedit-box-focus").focus()};e.prototype.addBulletPoint=function(){return this._addHtml($("<ul><li></li></ul>"))};e.prototype.addOrderedPointList=function(){return this._addHtml($("<ol><li></li></ol>"))};e.prototype._addHtml=function(h){var g;g=$(window.getSelection().getRangeAt(0).startContainer.parentNode);0===g.closest(".ppedit-box").length&&(g=this.element);h.find("li").html(g.html());return g.empty().append(h)};e.prototype._getCursorPosition=function(){return window.getSelection().getRangeAt(0).startOffset};e.prototype._onClick=function(){};e.prototype._onDoubleClick=function(){return this._enableFocus()};return e}(ac);y=function(d){function e(m,k,g){this.editor=m;this.pageNum=k;e.__super__.constructor.call(this);k=g.toArray();var l,h;h=[];g=0;for(l=k.length;g<l;g++){m=k[g],h.push(m.id)}this.boxIds=h;this.boxes=this.editor.areas[this.pageNum].boxesContainer.getBoxesFromIds(this.boxIds)}ag(e,d);e.prototype.execute=function(){var m,h,g,l,k;this.editor.areas[this.pageNum].boxesContainer.removeBoxes(this.boxIds);l=this.boxIds;k=[];h=0;for(g=l.length;h<g;h++){m=l[h],k.push(this.editor.panel.removeBoxRow(m))}return k};e.prototype.undo=function(){var m,h,g,l,k;l=this.boxes;k=[];h=0;for(g=l.length;h<g;h++){m=l[h],this.editor.areas[this.pageNum].boxesContainer.addBox(m),k.push(this.editor.panel.addBoxRow(m.element.attr("id")))}return k};e.prototype.getType=function(){return"Remove"};return e}(ao);O=function(d){function e(l,h,g,k){this.box=l;this.pageNum=h;this.toPosition=g;this.fromPosition=k;e.__super__.constructor.call(this);this.boxIds.push(this.box.element.attr("id"));null==k&&(this.fromPosition=this.box.currentPosition())}ag(e,d);e.prototype.execute=function(){return this.box.setPosition(this.toPosition.left,this.toPosition.top)};e.prototype.undo=function(){return this.box.setPosition(this.fromPosition.left,this.fromPosition.top)};e.prototype.getType=function(){return"Modify"};e.prototype.getPageNum=function(){return this.pageNum};return e}(ao);Y=function(d){function e(g){this.root=g;e.__super__.constructor.call(this,this.root);this._context=this.rectSize=this.downPosition=void 0}ag(e,d);e.prototype.buildElement=function(){return this.element=$("<canvas></canvas>").addClass("ppedit-canvas").attr("width","920px").attr("height","1325px")};e.prototype.bindEvents=function(){var g=this;this.element.on("containerMouseDown",function(k,h){g.downPosition={left:h.offsetX,top:h.offsetY};return g.rectSize={width:0,height:0}}).on("containerMouseMove",function(k,h,l){if(null!=g.downPosition&&null!=g.rectSize&&null!=l){return g.rectSize.width+=l.x,g.rectSize.height+=l.y,g.drawRect(g.downPosition,g.rectSize)}}).on("containerMouseLeave",function(){return g.clear()}).on("containerMouseUp",function(){null!=g.downPosition&&null!=g.rectSize&&g.root.trigger("canvasRectSelect",[{topLeft:g.downPosition,size:g.rectSize}]);return g.clear()});return this._context=this.element.get(0).getContext("2d")};e.prototype.drawRect=function(h,g){this._context.clearRect(0,0,this.element.width(),this.element.height());this._context.globalAlpha=0.2;this._context.beginPath();this._context.rect(h.left,h.top,g.width,g.height);this._context.fillStyle="blue";return this._context.fill()};e.prototype.clear=function(){this._context.clearRect(0,0,this.element.width(),this.element.height());return this.rectSize=this.downPosition=void 0};return e}(ac);af=function(d){function e(g){this.root=g;e.__super__.constructor.call(this,this.root);this.boxes={}}ag(e,d);e.CLICK_TIME_INTERVAL=200;e.prototype.buildElement=function(){this.element=$("<div></div>").addClass("ppedit-box-container");this.element.append('<p class="hDotLine"></p>');return this.element.append('<p class="vDotLine"></p>')};e.prototype.bindEvents=function(){var m,h,g,l,k=this;this.element.mousedown(function(n){n.preventDefault();return k.unSelectAllBoxes()}).dblclick(function(n){n=k.getPointClicked(n);if(0===k.getSelectedBoxes().length){return k.element.trigger("addBoxRequested",[n])}}).click(function(n){k.element.trigger("unSelectBoxes");return k.element.parent().trigger("removeToolTip")});g=this.boxes;l=[];for(h in g){m=g[h],l.push(m.bindEvents())}return l};e.prototype.selectBoxesInRect=function(k){var h,g=this;h={topLeft:{left:k.topLeft.left+this.element.scrollLeft(),top:k.topLeft.top+this.element.scrollTop()},size:k.size};0>h.size.width&&(h.topLeft.left-=Math.abs(h.size.width),h.size.width=Math.abs(h.size.width));0>h.size.height&&(h.topLeft.top-=Math.abs(h.size.height),h.size.height=Math.abs(h.size.height));return this.getAllBoxes().each(function(m,l){if(p.rectContainsRect(h,g.boxBounds($(l)))){return g.boxes[l.id].select()}})};e.prototype.boxBounds=function(g){return{topLeft:{left:g.position().left+this.element.scrollLeft(),top:g.position().top+this.element.scrollTop()},size:{width:g.width(),height:g.height()}}};e.prototype.addBox=function(g){null==g.element&&g.buildElement();this.element.append(g.element);g.bindEvents();return this.boxes[g.element.attr("id")]=g};e.prototype.removeBoxes=function(m){var h,g,l,k;k=[];g=0;for(l=m.length;g<l;g++){h=m[g],this.boxes[h].element.removeClass("ppedit-box-selected").removeClass("ppedit-box-focus").remove(),k.push(delete this.boxes[h])}return k};e.prototype.getBoxesFromIds=function(m){var h,g,l,k;k=[];g=0;for(l=m.length;g<l;g++){h=m[g],null!=this.boxes[h]&&k.push(this.boxes[h])}return k};e.prototype.getBoxesFromSelector=function(m){var h,g,l,k;h={};k=m.toArray();g=0;for(l=k.length;g<l;g++){m=k[g],h[m.id]=this.boxes[m.id]}return h};e.prototype.getAllBoxes=function(){return this.element.find(".ppedit-box")};e.prototype.getSelectedBoxes=function(){return this.element.find(".ppedit-box:focus, .ppedit-box-selected, .ppedit-box-focus")};e.prototype.getNotFocusedSelectedBoxes=function(){return this.element.find(".ppedit-box-selected")};e.prototype.changeBoxOpacity=function(h,g){return this.boxes[h].element.css("opacity",g)};e.prototype.unSelectAllBoxes=function(){var l,h,g,k;g=this.boxes;k=[];for(h in g){l=g[h],l.stopMoving(),k.push(l.element.removeClass("ppedit-box-focus").blur())}return k};e._rectContainsRect=function(h,g){return g.topLeft.x>=h.topLeft.x&&g.topLeft.y>=h.topLeft.y&&g.topLeft.x+g.size.width<=h.topLeft.x+h.size.width&&g.topLeft.y+g.size.height<=h.topLeft.y+h.size.height};e.prototype.getPointClicked=function(g){return{left:event.offsetX+this.element.scrollLeft(),top:event.offsetY+this.element.scrollTop()}};e.prototype.getAllHunks=function(){var l,h,g,k;g=this.boxes;k=[];for(h in g){l=g[h],k.push({id:h,html:l.element.wrap("<div></div>").parent().html()})}return k};return e}(ac);ae=function(d){function e(g){this.root=g;e.__super__.constructor.call(this,this.root)}ag(e,d);e.prototype.buildElement=function(){return this.element=$('       <div class="ppedit-grid">            <svg width="100%" height="100%">              <defs>                <pattern id="smallGrid" width="8" height="8" patternUnits="userSpaceOnUse">                  <path d="M 8 0 L 0 0 0 8" fill="none" stroke="gray" stroke-width="0.5"/>                </pattern>                <pattern id="grid" width="80" height="80" patternUnits="userSpaceOnUse">                  <rect width="80" height="80" fill="url(#smallGrid)"/>                  <path d="M 80 0 L 0 0 0 80" fill="none" stroke="gray" stroke-width="1"/>                </pattern>              </defs>              <rect width="100%" height="100%" fill="url(#grid)" />            </svg>      </div>')};e.prototype.toggleGrid=function(){return this.element.toggle()};return e}(ac);b=function(d){function e(h,g){this.root=h;this.pageNum=g;e.__super__.constructor.call(this,this.root);this.fontPanel=this.boxesContainer=this.grid=this.canvas=this.prevMouseMoveEvent=void 0;this.toolTipTimeout=0}ag(e,d);e.prototype.buildElement=function(){this.element=$('<div class="editContainer shadow-effect"></div>').attr("id","ppedit-page-"+this.pageNum).append("<div></div>").addClass("ppedit-container").addClass("col-xs-8").attr("tabindex",0);this.boxesContainer=new af(this.element);this.canvas=new Y(this.element);this.grid=new ae(this.element);this.fontPanel=new o(this.root);this.fontPanel.buildElement();this.boxesContainer.buildElement();this.canvas.buildElement();this.grid.buildElement();this.element.append(this.boxesContainer.element);this.element.append(this.canvas.element);return this.element.append(this.grid.element)};e.prototype.bindEvents=function(){var g=this;this.element.mousedown(function(){if(0===g.boxesContainer.getNotFocusedSelectedBoxes().length){return g.canvas.element.trigger("containerMouseDown",[event])}}).mousemove(function(k){var h;h=void 0;null!=g.prevMouseMoveEvent&&(h={x:k.clientX-g.prevMouseMoveEvent.clientX,y:k.clientY-g.prevMouseMoveEvent.clientY});g.element.find("*").trigger("containerMouseMove",[k,h]);return g.prevMouseMoveEvent=k}).mouseleave(function(){g.element.find("*").trigger("containerMouseLeave");return g.prevMouseMoveEvent=void 0}).mouseup(function(h){g.element.find("*").trigger("containerMouseUp",[h]);return g.prevMouseMoveEvent=void 0}).keydown(function(h){return g.element.find("*").trigger("containerKeyDown",[h])}).on("canvasRectSelect",function(k,h){return g.boxesContainer.selectBoxesInRect(h)}).on("boxSelected",function(k,h){g.fontPanel.setSettingsFromStyle(h.element.get(0).style);return g.showToolTip(h)}).on("boxMouseOver",function(k,h){g.fontPanel.setSettingsFromStyle(h.element.get(0).style);return g.showToolTip(h)}).on("removeToolTip",function(h){return g.removeToolTip()}).on("boxMouseLeave",function(h){return g.toolTipTimeout=setTimeout(function(){return g.removeToolTip()},ad.TOOLTIP_DISPEAR_MILLS)});this.fontPanel.element.mouseover(function(h){return clearTimeout(g.toolTipTimeout)});this.boxesContainer.bindEvents();this.canvas.bindEvents();this.grid.bindEvents();return this.fontPanel.bindEvents()};e.prototype.setToolTipPosition=function(m,h,g,l){var k;k=this.fontPanel.element;if(this.element.height()-h-g<k.height()+10){return this.element.width()-m-l/2<k.width()+10?k.css("left",m+l/2-k.width()+"px"):k.css("left",m+l/2+"px"),k.css("top",h-k.height()-25+"px")}this.element.width()-m-l/2<k.width()+10?k.css("left",m+l/2-k.width()+"px"):k.css("left",m+l/2+"px");return k.css("top",h+g+10+"px")};e.prototype.showToolTip=function(g){this.element.append(this.fontPanel.element);return o.LEFT_POSITION||o.TOP_POSITION?(this.fontPanel.element.css("left",this.fontPanel.leftPosition+"px"),this.fontPanel.element.css("top",this.fontPanel.topPosition+"px")):this.setToolTipPosition(g.currentPosition().left,g.currentPosition().top,g.element.height(),g.element.width())};e.prototype.removeToolTip=function(){return this.fontPanel.element.detach()};return e}(ac);aq=function(d){function e(k,g,h){this.editor=k;this.addPage=g;this.pageNum=h;e.__super__.constructor.call(this);this.area=void 0;this.boxIds=null!=this.editor.areas[this.pageNum]?Object.getOwnPropertyNames(this.editor.areas[h].boxesContainer.boxes):[]}ag(e,d);e.prototype.execute=function(){return this.addPage?(null==this.pageNum&&(this.pageNum=this.editor.areas.length),this._insertNewPage(this.pageNum)):this._removePage(this.pageNum)};e.prototype.undo=function(){return this.addPage?this._removePage(this.pageNum):this._insertPage(this.pageNum,this.area)};e.prototype._insertNewPage=function(h){var g;g=new b(this.editor.element,this.editor.areas.length);g.buildElement();this._insertPage(h,g);return this.area=g};e.prototype._insertPage=function(u,w){var v,t,r,l,s,q,n,m;0<u?w.element.insertAfter(this.editor.superContainer.children().eq(u-1)):this.editor.superContainer.append(w.element);w.bindEvents();l=this.editor.panel;l.insertTab(u);t=w.boxesContainer.boxes;for(r in t){v=t[r],s=l.getRows(u),0===s.length?l.addBoxRow(r):s.each(function(x,k){var h;h=$(k).attr("ppedit-box-id");h=w.boxesContainer.boxes[h].element.css("z-index");if(parseInt(h)<parseInt(v.element.css("z-index"))||x===s.length-1){return l.addBoxRow(r,x),!1}})}this.editor.areas=this.editor.areas.slice(0,u).concat([w]).concat(this.editor.areas.slice(u));m=[];t=q=0;for(n=this.editor.areas.length-1;0<=n?q<=n:q>=n;t=0<=n?++q:--q){m.push(this.editor.areas[t].element.attr("id","ppedit-page-"+t))}return m};e.prototype._removePage=function(l){var h,g,k;this.area=this.editor.areas.splice(l,1)[0];this.area.element.detach();this.editor.panel.removeTab(l);k=[];l=h=0;for(g=this.editor.areas.length-1;0<=g?h<=g:h>=g;l=0<=g?++h:--h){this.editor.areas[l].element.attr("id","ppedit-page-"+l),this.editor.areas[l].grid.toggleGrid(),k.push(this.editor.areas[l].grid.toggleGrid())}return k};e.prototype.getType=function(){return this.addPage?"addPage":"removePage"};e.prototype.getPageNum=function(){return this.pageNum};return e}(ao);f=function(d){function e(h,g){this.editor=h;this.jsonBoxes=g;e.__super__.constructor.call(this)}ag(e,d);e.prototype.execute=function(){var C,B,A,w,x,q,v,u,t,s,r;v=this.jsonBoxes;if(v.length>this.editor.areas.length){for(x=s=0,r=v.length-this.editor.areas.length;0<=r?s<=r:s>=r;x=0<=r?++s:--s){C=new aq(this.editor,!0),C.execute()}}r=[];x=C=0;for(s=v.length-1;0<=s?C<=s:C>=s;x=0<=s?++C:--C){r.push(function(){var g,h;g=v[x];h=[];for(q in g){w=g[q],B=this.editor.areas[x],u=this.editor.panel,A=new ad(B.boxesContainer.element),A.element=$(w.html),B.boxesContainer.addBox(A),t=u.getRows(x),0===t.length?u.addBoxRow(x,q):t.each(function(k,m){var l;l=$(m).attr("ppedit-box-id");l=B.boxesContainer.boxes[l].element.css("z-index");if(parseInt(l)<parseInt(A.element.css("z-index"))||k===t.length-1){return u.addBoxRow(x,q,k),!1}}),h.push(u.setBoxName(q,w.name))}return h}.call(this))}return r};e.prototype.undo=function(){};e.prototype.getType=function(){return"Create"};e.prototype.getPageNum=function(){};return e}(ao);V=function(d){function e(k,g,h){this.editor=k;this.pageNum=g;this.optionsList=h;e.__super__.constructor.call(this);this.boxes=[]}ag(e,d);e.prototype.execute=function(){var h,g,m,l,k;if(null!=this.optionsList){if(0===this.boxes.length){for(l=this.optionsList,g=0,m=l.length;g<m;g++){h=l[g],this.boxes.push(new ad(this.editor.areas[this.pageNum].boxesContainer.element,h))}}l=this.boxes;k=[];g=0;for(m=l.length;g<m;g++){h=l[g],k.push(this._addBox(h))}return k}0===this.boxes.length&&this.boxes.push(new ad(this.editor.areas[this.pageNum].boxesContainer.element));return this._addBox(this.boxes[0])};e.prototype.undo=function(){var h,g,m,l,k;l=this.boxes;k=[];g=0;for(m=l.length;g<m;g++){h=l[g],this.editor.areas[this.pageNum].boxesContainer.removeBoxes([h.element.attr("id")]),k.push(this.editor.panel.removeBoxRow([h.element.attr("id")]))}return k};e.prototype._addBox=function(g){this.editor.areas[this.pageNum].boxesContainer.addBox(g);g=g.element.attr("id");this.editor.panel.addBoxRow(this.pageNum,g);if(-1===this.boxIds.indexOf(g)){return this.boxIds.push(g)}};e.prototype.getType=function(){return"Create"};e.prototype.getPageNum=function(){return this.pageNum};return e}(ao);ah=function(d){function e(k,g,h){this.editor=k;this.pageNum=g;this.boxesClones=h;e.__super__.constructor.call(this);this.newBoxes=[]}ag(e,d);e.prototype.execute=function(){var k,h,q,n,m,l=this;0===this.newBoxes.length&&this.boxesClones.each(function(r,s){var g;g=CSSJSON.toJSON(s.style.cssText).attributes;g=new ad(l.editor.areas[l.pageNum].boxesContainer.element,g);return l.newBoxes[r]=g});m=[];h=q=0;for(n=this.newBoxes.length-1;0<=n?q<=n:q>=n;h=0<=n?++q:--q){k=this.newBoxes[h],this.editor.areas[this.pageNum].boxesContainer.addBox(k),k.element.html(this.boxesClones.eq(h).html()),this.editor.panel.addBoxRow(this.pageNum,k.element.attr("id")),m.push(this.boxIds[h]=k.element.attr("id"))}return m};e.prototype.undo=function(){var h,g,m,l,k;l=this.newBoxes;k=[];g=0;for(m=l.length;g<m;g++){h=l[g],this.editor.areas[this.pageNum].boxesContainer.removeBoxes([h.element.attr("id")]),k.push(this.editor.panel.removeBoxRow([h.element.attr("id")]))}return k};e.prototype.getType=function(){return"Create"};e.prototype.getPageNum=function(){return this.pageNum};return e}(ao);X=function(){function d(){}d.INIT_NUM_OF_PAGES=2;d.MAX_NUM_OF_PAGES=3;d.HUNK_NAME_MAX_NUM_OF_CHAR=10;return d}();c=function(){function d(){this.initNumOfPages=X.INIT_NUM_OF_PAGES;this.undoStack=[];this.redoStack=[]}d.prototype.pushCommand=function(e,g){(null==g||g)&&e.execute();this.undoStack.push(e);return this.redoStack.splice(0,this.redoStack.length)};d.prototype.undo=function(){var e;if(0<this.undoStack.length){return e=this.undoStack.pop(),e.undo(),this.redoStack.push(e)}};d.prototype.redo=function(){var e;if(0<this.redoStack.length){return e=this.redoStack.pop(),e.execute(),this.undoStack.push(e)}};d.prototype.getUndoJSON=function(){var E,B,C,A,x,w,v,u,t,s,r,q;B={modified:function(){var g,h,e;e=[];g=0;for(h=this.initNumOfPages-1;0<=h?g<=h:g>=h;0<=h?++g:--g){e.push({})}return e}.call(this),removed:function(){var g,h,e;e=[];g=0;for(h=this.initNumOfPages-1;0<=h?g<=h:g>=h;0<=h?++g:--g){e.push({})}return e}.call(this),created:function(){var g,h,e;e=[];g=0;for(h=this.initNumOfPages-1;0<=h?g<=h:g>=h;0<=h?++g:--g){e.push({})}return e}.call(this)};r=this.undoStack;v=0;for(t=r.length;v<t;v++){E=r[v];q=E.boxIds;u=0;for(s=q.length;u<s;u++){switch(C=q[u],E.getType()){case"Create":B.created[E.getPageNum()][""+C]={id:C,html:$("#"+C).clone().wrap("<div></div>").parent().html()||"",name:$("tr[ppedit-box-id="+C+"]").find("input").val()};break;case"Modify":null==B.created[E.getPageNum()][""+C]&&(B.modified[E.getPageNum()][""+C]={id:C,html:$("#"+C).clone().wrap("<div></div>").parent().html()||"",name:$("tr[ppedit-box-id="+C+"]").find("input").val()});break;case"Remove":delete B.modified[E.getPageNum()][""+C];null!=B.created[E.getPageNum()][""+C]?delete B.created[E.getPageNum()][""+C]:B.removed[E.getPageNum()][""+C]={id:C,html:"",name:""};break;case"removePage":delete B.modified[E.getPageNum()][""+C],null!=B.created[E.getPageNum()][""+C]?delete B.created[E.getPageNum()][""+C]:B.removed[E.getPageNum()][""+C]={id:C,html:"",name:""}}}"removePage"===E.getType()?E.getPageNum()<B.modified.length-2&&(B.modified[E.getPageNum()]=$.extend(B.modified[E.getPageNum()],B.modified[E.getPageNum()+1]),B.created[E.getPageNum()]=$.extend(B.created[E.getPageNum()],B.created[E.getPageNum()+1]),B.removed[E.getPageNum()]=$.extend(B.removed[E.getPageNum()],B.removed[E.getPageNum()+1]),B.modified.splice(E.getPageNum()+1,1),B.created.splice(E.getPageNum()+1,1),B.removed.splice(E.getPageNum()+1,1)):"addPage"===E.getType()&&(B.modified.push({}),B.created.push({}),B.removed.push({}))}C={modified:function(){var h,e,l,k;l=B.modified;k=[];h=0;for(e=l.length;h<e;h++){x=l[h],k.push(function(){var g;g=[];for(A in x){w=x[A],g.push(w)}return g}())}return k}(),removed:function(){var h,e,l,k;l=B.removed;k=[];h=0;for(e=l.length;h<e;h++){x=l[h],k.push(function(){var g;g=[];for(A in x){w=x[A],g.push(w)}return g}())}return k}(),created:function(){var h,e,l,k;l=B.created;k=[];h=0;for(e=l.length;h<e;h++){x=l[h],k.push(function(){var g;g=[];for(A in x){w=x[A],g.push(w)}return g}())}return k}()};E=(new jsSHA(JSON.stringify(B),"TEXT")).getHMAC("","TEXT","SHA-256","HEX");C.etag=E;return JSON.stringify(C)};d.prototype.clearHistory=function(){return this.undoStack.splice(0,this.undoStack.length)};return d}();ap=function(d){function e(k,g,h){this.editor=k;this.boxesSelector=g;this.newCssOptions=h;e.__super__.constructor.call(this);this.pageNum=this.editor.getPageNum(this.boxesSelector.first());this.boxesToCopy=this.boxesSelector.clone()}ag(e,d);e.prototype.execute=function(){var g=this;return this.boxesSelector.each(function(h,k){return $(k).css(g.newCssOptions)})};e.prototype.undo=function(){var g=this;return this.boxesToCopy.each(function(h,l){var k;k=CSSJSON.toJSON(g.boxesToCopy.filter("#"+l.id).attr("style")).attributes;return g.boxesSelector.filter("#"+l.id).css(k)})};e.prototype.getType=function(){return"Modify"};e.prototype.getPageNum=function(){return this.pageNum};return e}(ao);an=function(d){function e(l,g,k,h){this.editor=l;this.pageNum=g;this.moveUp=h;e.__super__.constructor.call(this);this.boxId=k.attr("id")}ag(e,d);e.prototype.execute=function(){return this.moveUp?this.swapRowWithUpperRow():this.swapRowWithLowerRow()};e.prototype.undo=function(){return this.moveUp?this.swapRowWithLowerRow():this.swapRowWithUpperRow()};e.prototype.swapRowWithUpperRow=function(){var h,g;g=this.editor.panel.getRowWithBoxId(this.boxId);h=g.index();if(0<=h-1){return h=this.editor.panel.getRowAtIndex(this.pageNum,h-1),this.swapRows(g,h)}};e.prototype.swapRowWithLowerRow=function(){var h,g;g=this.editor.panel.getRowWithBoxId(this.boxId);h=g.index();if(h+1<this.editor.panel.getRows(this.pageNum).length){return h=this.editor.panel.getRowAtIndex(this.pageNum,h+1),this.swapRows(g,h)}};e.prototype.swapRows=function(h,g){var m,l,k;h.index()<g.index()?h.insertAfter(g):h.insertBefore(g);m=this.editor.areas[this.pageNum].boxesContainer.boxes[h.attr("ppedit-box-id")];l=m.element.css("z-index");k=this.editor.areas[this.pageNum].boxesContainer.boxes[g.attr("ppedit-box-id")];m.element.css("z-index",k.element.css("z-index"));return k.element.css("z-index",l)};e.prototype.getType=function(){return"Modify"};e.prototype.getPageNum=function(){return this.pageNum};return e}(ao);W=function(d){function e(l,g,k,h){this.box=l;this.pageNum=g;this.prevContent=k;this.newContent=h;e.__super__.constructor.call(this);this.boxIds.push(this.box.element.attr("id"))}ag(e,d);e.prototype.execute=function(){return this.box.element.html(this.newContent)};e.prototype.undo=function(){return this.box.element.html(this.prevContent)};e.prototype.getType=function(){return"Modify"};e.prototype.getPageNum=function(){return this.pageNum};return e}(ao);am=function(d){function e(m,g,l,k,h){this.editor=m;this.pageNum=g;this.boxId=l;this.prevVal=k;this.newVal=h;e.__super__.constructor.call(this)}ag(e,d);e.prototype.execute=function(){return this.changeOpacityToVal(this.newVal)};e.prototype.undo=function(){return this.changeOpacityToVal(this.prevVal)};e.prototype.changeOpacityToVal=function(g){this.editor.areas[this.pageNum].boxesContainer.changeBoxOpacity(this.boxId,g);return this.editor.panel.element.find("tr[ppedit-box-id="+this.boxId+"]").find(".ppedit-slider").slider("setValue",parseInt(100*g))};e.prototype.getType=function(){return"Modify"};e.prototype.getPageNum=function(){return this.pageNum};return e}(ao);aa=function(d){function e(m,g,l,k,h){this.editor=m;this.pageNum=l;this.prevName=k;this.newName=h;e.__super__.constructor.call(this);this.boxIds.push(g)}ag(e,d);e.prototype.execute=function(){return this.editor.panel.setBoxName(this.boxIds[0],this.newName.substr(0,X.HUNK_NAME_MAX_NUM_OF_CHAR))};e.prototype.undo=function(){return this.editor.panel.setBoxName(this.boxIds[0],this.prevName.substr(0,X.HUNK_NAME_MAX_NUM_OF_CHAR))};e.prototype.getType=function(){return"Modify"};e.prototype.getPageNum=function(){return this.pageNum};return e}(ao);ai=function(){function d(){}d.prototype.createChangeFontSizeCommand=function(g,h,e){return new ap(g,h,{"font-size":e})};d.prototype.createChangeFontTypeCommand=function(g,h,e){return new ap(g,h,{"font-family":e})};d.prototype.createChangeLetterSpaceCommand=function(g,h,e){return new ap(g,h,{"letter-spacing":e})};d.prototype.createChangeLineHeightCommand=function(g,h,e){return new ap(g,h,{"line-height":e})};d.prototype.createChangePaddingCommand=function(g,h,e){return new ap(g,h,{padding:e})};d.prototype.createChangeFontWeightCommand=function(g,h,e){return new ap(g,h,{"font-weight":e?"bold":"normal"})};d.prototype.createChangeItalicFontCommand=function(g,h,e){return new ap(g,h,{"font-style":e?"italic":"normal"})};d.prototype.createChangeUnderlineFontCommand=function(g,h,e){return new ap(g,h,{"text-decoration":e?"underline":"none"})};d.prototype.createRightAlignmentCommand=function(e,g){return new ap(e,g,{"text-align":"right"})};d.prototype.createLeftAlignmentCommand=function(e,g){return new ap(e,g,{"text-align":"left"})};d.prototype.createCenterAlignmentCommand=function(e,g){return new ap(e,g,{"text-align":"center"})};d.prototype.createChangeTextColorCommand=function(g,h,e){return new ap(g,h,{color:"#"+e})};d.prototype.createChangeOpacityCommand=function(h,m,g,l,k){return new am(h,m,g,l,k)};d.prototype.createMoveBoxCommand=function(g,k,e,h){return new O(g,k,e,h)};d.prototype.createRemoveBoxesCommand=function(g,h,e){return new y(g,h,e)};d.prototype.createCopyBoxesCommand=function(g,h,e){return new ah(g,h,e)};d.prototype.createCreateBoxesCommand=function(g,h,e){return new V(g,h,e)};d.prototype.createCreateChangeBoxContentCommand=function(g,k,e,h){return new W(g,k,e,h)};d.prototype.createMoveUpCommand=function(g,h,e){return new an(g,h,e,!0)};d.prototype.createMoveDownCommand=function(g,h,e){return new an(g,h,e,!1)};d.prototype.createLoadBoxesCommand=function(e,g){return new f(e,g)};d.prototype.createAddPageCommand=function(e){return new aq(e,!0)};d.prototype.createRemovePageCommand=function(e,g){return new aq(e,!1,g)};d.prototype.createChangeBoxNameCommand=function(h,m,g,l,k){return new aa(h,m,g,l,k)};return d}();ab=function(d){function e(g){this.root=g;this.prevOpacityVal=void 0;this.prevBoxNameVal={};e.__super__.constructor.call(this,this.root)}ag(e,d);e.prototype.buildElement=function(){return this.element=$('      <div class="menu-sidebar">          \x3c!-- Sidebar Right --\x3e        <div class="menu-tab-sidebar">            <div class="minimize-sidebar-btn shadow-effect">                <span class="minimize-text">&lt;&lt;</span>            </div>            <div class="menu-tab-pages">            </div>            <div class="add-tab-sidebar-btn shadow-effect">                <span class="add-text">+</span>            </div>        </div>         <div class="right-sidebar-container shadow-effect">            \x3c!-- Row 1 Menu  --\x3e            <div class="right-sidebar-menu1">              <div class="moveElementUpBtn menu-panel-icon"></div>              <div class="moveElementDownBtn menu-panel-icon"></div>              <div class="addElementBtn menu-panel-icon"></div>              <div class="ppedit-pageNumLabel"></div>              <div class="ppedit-deletePage menu-panel-icon"></div>             </div>          </div>      </div>')};e.prototype.bindEvents=function(){var g=this;this.element.find(".addElementBtn").click(function(){return g.element.trigger("panelClickAddBtnClick",[g._getDisplayedTabIndex()])});this.element.find(".moveElementUpBtn").click(function(){return g.element.trigger("moveElementUpBtnClick",[g._getDisplayedTabIndex()])});this.element.find(".moveElementDownBtn").click(function(){return g.element.trigger("moveElementDownBtnClick",[g._getDisplayedTabIndex()])});this.element.find(".add-tab-sidebar-btn").click(function(){return g.element.trigger("addTabBtnClick")});return this.element.find(".minimize-sidebar-btn").click(function(h){return g.element.toggleClass("menu-sidebar-open")})};e.prototype.addNewTab=function(){return this.insertTab(this.element.find(".page-sidebar-tab").length)};e.prototype.insertTab=function(h){var g,k=this;g=Math.max(h,this.element.find(".page-sidebar-tab").length);h=$('           <a href="#ppedit-page-'+g+'">                  <div class="page-sidebar-tab menu-right-btn shadow-effect">                    <span class="vertical-text">Page '+(g+1)+"</span>                  </div>           </a>    ");0===g?this.element.find(".menu-tab-pages").append(h):h.insertAfter(this.element.find(".menu-tab-pages a").eq(g-1));h.click(function(l){return k._displayTab(g)}).nextAll("a").each(function(l,m){return $(m).attr("href","#ppedit-page-"+(g+l+1)).html('            <div class="page-sidebar-tab menu-right-btn shadow-effect">              <span class="vertical-text">Page '+(g+l+2)+"</span>            </div>          ").click(function(){return k._displayTab(g+l+1)})});h=$('      \x3c!-- Row 2 Menu --\x3e      <div class="ppedit-row-container">        <table class="right-sidebar-menu2" cellspacing="0px" cellpadding="2px">        </table>      </div>    ');0===g?this.element.find(".right-sidebar-container").append(h):h.insertAfter(this.element.find(".ppedit-row-container").eq(g-1));return this._displayTab(g)};e.prototype.addBoxRow=function(h,g,m){var l,k=this;l=$('        <tr class="ppedit-panel-row">          <td style="width:10%">            <div class="deleteElementBtn menu-panel-icon"></div>          </td>          <td style="width:50%">          <input type="text" class="form-control" placeholder="Untitled box">          </td>          <td style="width:40%">            <div class="ppedit-slider"></div>          </td>        </tr>    \t      ').attr("ppedit-box-id",g);null==m||0===m?this._getRowContainer(h).find(".right-sidebar-menu2").prepend(l):l.insertBefore(this._getRowContainer(h).find('.ppedit-panel-row:nth-child("'+m+'")'));l.find(".ppedit-slider").slider({min:0,max:100,step:1,value:100}).on("slideStart",function(n){return k.prevOpacityVal=$(n.target).val()||100}).on("slide",function(n){var q;q=$(n.target).val();m=l.parents(".ppedit-row-container").index()-1;return $(n.target).trigger("onRowSliderValChanged",[m,g,parseInt(q)/100])}).on("slideStop",function(n){var q;q=$(n.target).val();m=l.parents(".ppedit-row-container").index()-1;k.prevOpacityVal!==q&&$(n.target).trigger("onRowSliderStopValChanged",[m,g,parseInt(k.prevOpacityVal)/100,parseInt(q)/100]);return k.prevOpacityVal=void 0});l.find(".deleteElementBtn").on("click",function(n){m=l.parents(".ppedit-row-container").index()-1;return $(n.target).trigger("onRowDeleteBtnClick",[m,g])});return l.find("input").blur(function(n){var q;q=$(n.target).val();if(q!==k.prevBoxNameVal[g]){return m=l.parents(".ppedit-row-container").index()-1,$(n.target).trigger("boxNameChanged",[g,m,k.prevBoxNameVal[g]||"",q]),k.prevBoxNameVal[g]=q}})};e.prototype.removeBoxRow=function(g){return this.getRowWithBoxId(g).remove()};e.prototype.getRowWithBoxId=function(g){return this.element.find("tr[ppedit-box-id="+g+"]").eq(0)};e.prototype.getRowAtIndex=function(h,g){return this._getRowContainer(h).find(".ppedit-panel-row").eq(g)};e.prototype.getRows=function(g){return this._getRowContainer(g).find(".ppedit-panel-row")};e.prototype.setBoxName=function(h,g){return this.getRowWithBoxId(h).find("input").val(g)};e.prototype._displayTab=function(h){var g=this;this.element.find(".ppedit-row-container").removeClass("ppedit-row-container-active").eq(h).addClass("ppedit-row-container-active");this.element.find(".ppedit-pageNumLabel").html("Page "+(h+1));return this.element.find(".ppedit-deletePage").off().click(function(){return g.element.trigger("deleteTabBtnClick",[h])})};e.prototype.removeTab=function(h){var g=this;this._getRowContainer(h).remove();this.element.find(".menu-tab-pages a").eq(h).remove();this.element.find(".menu-tab-pages a").each(function(k,l){return $(l).attr("href","#ppedit-page-"+k).html('          <div class="page-sidebar-tab menu-right-btn shadow-effect">            <span class="vertical-text">Page '+(k+1)+"</span>          </div>        ").click(function(){return g._displayTab(k)})});return this._displayTab(h)};e.prototype.getBoxName=function(g){return this.getRowWithBoxId(g).find("input").val()};e.prototype._getRowContainer=function(g){return this.element.find(".ppedit-row-container").eq(g)};e.prototype._getDisplayedRowContainer=function(){return this.element.find(".ppedit-row-container-active").eq(0)};e.prototype._getDisplayedTabIndex=function(){return this._getDisplayedRowContainer().index()-1};return e}(ac);aj=function(){function d(){this.items=void 0}d.prototype.pushItems=function(e){return this.items=$.extend(!0,{},e)};d.prototype.popItems=function(){var e;e=this.items;this.items=void 0;return null!=e?e:[]};return d}();z=function(d){function e(g){this.root=g;e.__super__.constructor.call(this,this.root);this.clipboard=new aj;this.commandManager=new c;this.cmdFactory=new ai;this.panel=this.controller=void 0}ag(e,d);e.prototype.buildElement=function(){this.element=$('      <div class="container" tabindex="0">      </div>    ');this.controller=j.getController(this.element);this.superContainer=$('      <div class="superContainer">      </div>    ');this.areas=[];this.panel=new ab(this.element);this.mainPanel=new U(this.element);this.panel.buildElement();this.mainPanel.buildElement();this.element.append(this.mainPanel.element);this.element.append(this.panel.element);return this.element.append(this.superContainer)};e.prototype.bindEvents=function(){var h,g,m,l,k=this;this.element.on("focus",function(n){return k.element.blur()}).on("requestUndo",function(n){return k.commandManager.undo()}).on("requestRedo",function(n){return k.commandManager.redo()}).on("requestDelete",function(q){var n,s,r;r=[];q=n=0;for(s=X.INIT_NUM_OF_PAGES-1;0<=s?n<=s:n>=s;q=0<=s?++n:--n){0!==k.areas[q].boxesContainer.getSelectedBoxes().length?r.push(k.commandManager.pushCommand(k.cmdFactory.createRemoveBoxesCommand(k,q,k.areas[0].boxesContainer.getSelectedBoxes()))):r.push(void 0)}return r}).on("requestCopy",function(q){var n,s,r;r=[];q=n=0;for(s=X.INIT_NUM_OF_PAGES-1;0<=s?n<=s:n>=s;q=0<=s?++n:--n){if(0!==k.areas[q].boxesContainer.getSelectedBoxes().length){k.clipboard.pushItems({pageNum:q,boxes:k.areas[q].boxesContainer.getSelectedBoxes()});break}else{r.push(void 0)}}return r}).on("requestPaste",function(n){n=k.clipboard.popItems();if(null!=n.boxes&&0<n.boxes.length){return k.commandManager.pushCommand(k.cmdFactory.createCopyBoxesCommand(k,n.pageNum,n.boxes))}}).on("textColorChanged",function(q,n){var r;r=k.getSelectedBoxes();if(0!==r.length){return k.commandManager.pushCommand(k.cmdFactory.createChangeTextColorCommand(k,r,n))}}).on("graphicContentChanged",function(q,n){var t,s,r;r=k.getPageNum(n.graphic.element);k.commandManager.pushCommand(k.cmdFactory.createCreateChangeBoxContentCommand(n.graphic,r,n.prevContent,n.newContent),!1);t=k.panel.getBoxName(n.graphic.element.attr("id"));s=n.graphic.element.clone();s.children().remove();s=s.html();if(0===t.length&&0<s.length){return k.commandManager.pushCommand(k.cmdFactory.createChangeBoxNameCommand(k,n.graphic.element.attr("id"),r,"",s))}}).on("boxMoved",function(q,n,s,r){q=k.getPageNum(n.element);return k.commandManager.pushCommand(k.cmdFactory.createMoveBoxCommand(n,q,s,r),!1)}).on("moveElementUpBtnClick",function(q,n){var r;r=k.getSelectedBoxes();if(0<r.length){return k.commandManager.pushCommand(k.cmdFactory.createMoveUpCommand(k,n,r))}}).on("moveElementDownBtnClick",function(q,n){var r;r=k.getSelectedBoxes();if(0<r.length){return k.commandManager.pushCommand(k.cmdFactory.createMoveDownCommand(k,n,r))}}).on("addTabBtnClick",function(n){if(k.areas.length<X.MAX_NUM_OF_PAGES){return k.commandManager.pushCommand(k.cmdFactory.createAddPageCommand(k))}}).on("deleteTabBtnClick",function(q,n){if(k.areas.length>X.INIT_NUM_OF_PAGES){return k.commandManager.pushCommand(k.cmdFactory.createRemovePageCommand(k,n))}}).on("panelClickAddBtnClick",function(q,n){return k.commandManager.pushCommand(k.cmdFactory.createCreateBoxesCommand(k,n))}).on("panelClickGridBtnClick",function(q){var n,t,s,r;s=k.areas;r=[];n=0;for(t=s.length;n<t;n++){q=s[n],r.push(q.grid.toggleGrid())}return r}).on("onRowDeleteBtnClick",function(q,n,r){return k.commandManager.pushCommand(k.cmdFactory.createRemoveBoxesCommand(k,n,k.root.find("#"+r)))}).on("onRowSliderValChanged",function(q,n,s,r){return k.areas[n].boxesContainer.changeBoxOpacity(s,r)}).on("onRowSliderStopValChanged",function(q,n,t,s,r){return k.commandManager.pushCommand(k.cmdFactory.createChangeOpacityCommand(k,n,t,s,r))}).on("addBoxRequested",function(q,n){var r;r=k.getPageNum($(q.target));return k.commandManager.pushCommand(k.cmdFactory.createCreateBoxesCommand(k,r,[n]))}).on("fontTypeChanged",function(q,n){var r;r=k.getSelectedBoxes();if(0!==r.length){return k.commandManager.pushCommand(k.cmdFactory.createChangeFontTypeCommand(k,r,n))}}).on("fontSizeChanged",function(q,n){var r;r=k.getSelectedBoxes();if(0!==r.length){return k.commandManager.pushCommand(k.cmdFactory.createChangeFontSizeCommand(k,r,n))}}).on("letterSpaceChanged",function(q,n){var r;r=k.getSelectedBoxes();if(0!==r.length){return k.commandManager.pushCommand(k.cmdFactory.createChangeLetterSpaceCommand(k,r,n))}}).on("lineHeightChanged",function(q,n){var r;r=k.getSelectedBoxes();if(0!==r.length){return k.commandManager.pushCommand(k.cmdFactory.createChangeLineHeightCommand(k,r,n))}}).on("paddingChanged",function(q,n){var r;r=k.getSelectedBoxes();if(0!==r.length){return k.commandManager.pushCommand(k.cmdFactory.createChangePaddingCommand(k,r,n))}}).on("fontWeightBtnEnableClick",function(n){n=k.getSelectedBoxes();if(0!==n.length){return k.commandManager.pushCommand(k.cmdFactory.createChangeFontWeightCommand(k,n,!0))}}).on("fontWeightBtnDisableClick",function(n){n=k.getSelectedBoxes();if(0!==n.length){return k.commandManager.pushCommand(k.cmdFactory.createChangeFontWeightCommand(k,n,!1))}}).on("fontUnderlinedBtnEnableClick",function(n){n=k.getSelectedBoxes();if(0!==n.length){return k.commandManager.pushCommand(k.cmdFactory.createChangeUnderlineFontCommand(k,n,!0))}}).on("fontUnderlinedBtnDisableClick",function(n){n=k.getSelectedBoxes();if(0!==n.length){return k.commandManager.pushCommand(k.cmdFactory.createChangeUnderlineFontCommand(k,n,!1))}}).on("fontItalicBtnEnableClick",function(n){n=k.getSelectedBoxes();if(0!==n.length){return k.commandManager.pushCommand(k.cmdFactory.createChangeItalicFontCommand(k,n,!0))}}).on("fontItalicBtnDisableClick",function(n){n=k.getSelectedBoxes();if(0!==n.length){return k.commandManager.pushCommand(k.cmdFactory.createChangeItalicFontCommand(k,n,!1))}}).on("rightAlignment",function(n){n=k.getSelectedBoxes();if(0!==n.length){return k.commandManager.pushCommand(k.cmdFactory.createRightAlignmentCommand(k,n))}}).on("leftAlignment",function(n){n=k.getSelectedBoxes();if(0!==n.length){return k.commandManager.pushCommand(k.cmdFactory.createLeftAlignmentCommand(k,n))}}).on("centerAlignment",function(n){n=k.getSelectedBoxes();if(0!==n.length){return k.commandManager.pushCommand(k.cmdFactory.createCenterAlignmentCommand(k,n))}}).on("bulletPointBtnEnableClick",function(q){var n,s,r;q=k.getSelectedBoxes();n=k.getPageNum(q);n=k.areas[n].boxesContainer.getBoxesFromSelector(q.eq(0));r=[];for(s in n){q=n[s],r.push(q.addBulletPoint())}return r}).on("orderedPointBtnEnableClick",function(q){var n,s,r;q=k.getSelectedBoxes();n=k.getPageNum(q);n=k.areas[n].boxesContainer.getBoxesFromSelector(q.eq(0));r=[];for(s in n){q=n[s],r.push(q.addOrderedPointList())}return r}).on("boxNameChanged",function(q,n,t,s,r){return k.commandManager.pushCommand(k.cmdFactory.createChangeBoxNameCommand(k,n,t,s,r),!1)});this.panel.bindEvents();this.controller.bindEvents();this.mainPanel.bindEvents();l=[];g=0;for(m=X.INIT_NUM_OF_PAGES-1;0<=m?g<=m:g>=m;0<=m?++g:--g){h=this.cmdFactory.createAddPageCommand(this),l.push(h.execute())}return l};e.prototype.getSelectedBoxes=function(){return this.element.find(".ppedit-box:focus, .ppedit-box-selected, .ppedit-box-focus")};e.prototype.getPageNum=function(g){return g.parents(".editContainer").index()};e.prototype.load=function(g){this.cmdFactory.createLoadBoxesCommand(this,g).execute();return this.commandManager.initNumOfPages=this.areas.length};e.prototype.getAllHunks=function(){return JSON.stringify(function(){var h,g,k;g=this.areas;k=[];h=0;for(g=g.length;h<g;h++){k.push(this.area.boxesContainer.getAllHunks())}return k}.call(this))};return e}(ac);o=function(d){function e(g){this.root=g;e.__super__.constructor.call(this,this.root)}ag(e,d);e.LEFT_POSITION=void 0;e.TOP_POSITION=void 0;e.prototype.buildElement=function(){return this.element=$('          <div class="edit-menu FontPanel shadow-effect">            <div class="edit-menu-row1">               <select class="fontTypeBtn from-control edit-menu-row1-dd-ff">                 <option value="Times New Roman" selected>Times New Roman</option>                 <option value="Arial">Arial</option>                 <option value="Inconsolata">Inconsolata</option>                 <option value="Glyphicons Halflings">Glyphicons Halflings</option>               </select>                              <select class="fontSizeBtn from-control edit-menu-row1-dd-fs">                 <option value="6">6</option>                 <option value="8">8</option>                 <option value="10" selected>10</option>                 <option value="11">11</option>                 <option value="12">12</option>                 <option value="14">14</option>                 <option value="16">16</option>                 <option value="20">20</option>               </select>                              <div class="boldButton boldButtonDisable font-panel-icon-row"></div>               <div class="italicButton italicButtonDisable font-panel-icon-row"></div>               <div class="underlineButton underlineButtonDisable font-panel-icon-row"></div>             </div>             <div class="edit-menu-row2">                <div class="leftAlignBtn leftAlignButtonEnable font-panel-icon-row"></div>                <div class="centerAlignBtn centerAlignButtonDisable font-panel-icon-row"></div>                <div class="rightAlignBtn rightAlignButtonDisable font-panel-icon-row"></div>                <div class="colorPicker colorPickerButton font-panel-icon-row"></div>                <div class="orderedPointBtn orderedBulletPointButtonDisable font-panel-icon-row"></div>                <div class="bulletPointBtn bulletPointButtonDisable font-panel-icon-row"></div>                                <div>               <img class="icon-set letter-space-img" src="./ppedit/img/icons/text_letterspacing25.png" style="float:left;display:inline;">               <select class="letter-space from-control edit-menu-row1-dd-fs">                 <option value="0" selected>0</option>                 <option value="1">1</option>                 <option value="2">2</option>                 <option value="3">3</option>                 <option value="4">4</option>                 <option value="5">5</option>               </select>               </div>               <div>               <img class="icon-set line-height-img" src="./ppedit/img/icons/text-line-spacing25.png" style="float:left;display:inline;">               <select class="line-height from-control edit-menu-row1-dd-fs">                 <option value="117" selected>1.0</option>                 <option value="175">1.5</option>                 <option value="233">2.0</option>                 <option value="291">2.5</option>                 <option value="349">3.0</option>                 <option value="407">3.5</option>                 <option value="465">4.0</option>               </select>               </div>               <div>               <img class="icon-set line-height-img" src="./ppedit/img/icons/text-padding25.png" style="float:left;display:inline;">               <select class="padding from-control edit-menu-row1-dd-fs">                 <option value="0" selected>0</option>                 <option value="5">0.5</option>                 <option value="10">1.0</option>                 <option value="15">1.5</option>                 <option value="20">2.0</option>                 <option value="25">2.5</option>                 <option value="30">3.0</option>                 <option value="35">3.5</option>                 <option value="40">4.0</option>               </select>               </div>             </div>            </div>')};e.prototype.bindEvents=function(){var g=this;this.element.mousedown(function(h){return g.selectFontPanel()}).mouseup(function(h){e.LEFT_POSITION=g.currentFontPanelPosition().left;e.TOP_POSITION=g.currentFontPanelPosition().right;return g.stopMoveFontPanel()}).on("containerMouseMove",function(h,l,k){if(h.target===g.element.get(0)&&(0>=g.element.position().left&&(g.stopMoveFontPanel(),g.element.css("left","1px")),g.element.position().left>=g.element.parent().width()-g.element.width()&&(g.stopMoveFontPanel(),g.element.css("left",g.element.parent().width()-g.element.width()-1+"px")),0>=g.element.position().top&&(g.stopMoveFontPanel(),g.element.css("top","1px")),g.element.position().top>=g.element.parent().height()-g.element.height()&&(g.stopMoveFontPanel(),g.element.css("top",g.element.parent().height()-g.element.height()-1+"px")),g.element.hasClass("ppedit-panel-selected")&&null!=k)){return g.moveFontPanel(k.x,k.y)}}).on("containerMouseLeave",function(){return g.stopMoveFontPanel()}).focusin(function(h){if(h.target!==g.element.get(0)){return g.stopMoveFontPanel()}});this.element.find("select.fontTypeBtn").change(function(h){h=$(h.target).find("option:selected").val();return g.root.trigger("fontTypeChanged",[h])});this.element.find("select.letter-space").change(function(h){h=$(h.target).find("option:selected").val()+"px";return g.root.trigger("letterSpaceChanged",[h])});this.element.find("select.fontSizeBtn").change(function(h){h=$(h.target).find("option:selected").val()+"pt";return g.root.trigger("fontSizeChanged",[h])});this.element.find("select.line-height").change(function(h){h=$(h.target).find("option:selected").val();"normal"!==h&&(h+="%");return g.root.trigger("lineHeightChanged",[h])});this.element.find("select.padding").change(function(h){h=$(h.target).find("option:selected").val()+"px";return g.root.trigger("paddingChanged",[h])});this.element.find(".colorPicker").click(function(h){return $(h.target).colpick({colorScheme:"dark",layout:"rgbhex",color:"ff8800",onSubmit:function(k,n,l,m){g.element.trigger("textColorChanged",[n]);return $(m).colpickHide()}})});this.element.find(".boldButton").click(function(h){if($(h.target).hasClass("boldButtonDisable")){return h=$(h.target).attr("class","boldButton boldButtonEnable font-panel-icon-row"),h.trigger(h.hasClass("boldButtonEnable font-panel-icon-row")?"fontWeightBtnEnableClick":"fontWeightBtnDisableClick")}h=$(h.target).attr("class","boldButtonDisable font-panel-icon-row");return h.trigger(h.hasClass(".boldButtonDisable font-panel-icon")?"fontWeightBtnEnableClick":"fontWeightBtnDisableClick")});this.element.find(".italicButton").click(function(h){if($(h.target).hasClass("italicButtonDisable")){return h=$(h.target).attr("class","italicButtonEnable font-panel-icon-row"),h.trigger(h.hasClass("italicButtonEnable font-panel-icon-row")?"fontItalicBtnEnableClick":"fontItalicBtnDisableClick")}h=$(h.target).attr("class","italicButtonDisable font-panel-icon-row");return h.trigger(h.hasClass(".italicButtonDisable font-panel-icon")?"fontItalicBtnEnableClick":"fontItalicBtnDisableClick")});this.element.find(".underlineButton").click(function(h){if($(h.target).hasClass("underlineButtonDisable")){return h=$(h.target).attr("class","underlineButtonEnable font-panel-icon-row"),h.trigger(h.hasClass("underlineButtonEnable font-panel-icon-row")?"fontUnderlinedBtnEnableClick":"fontUnderlinedBtnDisableClick")}h=$(h.target).attr("class","underlineButtonDisable font-panel-icon-row");return h.trigger(h.hasClass(".underlineButtonDisable font-panel-icon-row")?"fontUnderlinedBtnEnableClick":"fontUnderlinedBtnDisableClick")});this.element.find(".centerAlignBtn").click(function(h){if($(h.target).hasClass("centerAlignButtonDisable")){return h=$(h.target).attr("class","centerAlignBtn centerAlignButtonEnable font-panel-icon-row"),g.element.find(".leftAlignBtn").attr("class","leftAlignBtn leftAlignButtonDisable font-panel-icon-row"),g.element.find(".rightAlignBtn").attr("class","rightAlignBtn rightAlignButtonDisable font-panel-icon-row"),h.trigger("centerAlignment")}$(h.target).attr("class","centerAlignBtn centerAlignButtonDisable font-panel-icon-row");g.element.find(".leftAlignBtn").attr("class","leftAlignBtn leftAlignButtonEnable font-panel-icon-row");g.element.find(".rightAlignBtn").attr("class","rightAlignBtn rightAlignButtonDisable font-panel-icon-row");return $(h.target).trigger("leftAlignment")});this.element.find(".rightAlignBtn").click(function(h){if($(h.target).hasClass("rightAlignButtonDisable")){return h=$(h.target).attr("class","rightAlignBtn rightAlignButtonEnable font-panel-icon-row"),g.element.find(".leftAlignBtn").attr("class","leftAlignBtn leftAlignButtonDisable font-panel-icon-row"),g.element.find(".centerAlignBtn").attr("class","centerAlignBtn centerAlignButtonDisable font-panel-icon-row"),h.trigger("rightAlignment")}$(h.target).attr("class","rightAlignBtn rightAlignButtonDisable font-panel-icon-row");g.element.find(".leftAlignBtn").attr("class","leftAlignBtn leftAlignButtonEnable font-panel-icon-row");g.element.find(".centerAlignBtn").attr("class","centerAlignBtn centerAlignButtonDisable font-panel-icon-row");return $(h.target).trigger("leftAlignment")});this.element.find(".leftAlignBtn").click(function(h){if($(h.target).hasClass("leftAlignButtonDisable")){return h=$(h.target).attr("class","leftAlignBtn leftAlignButtonEnable font-panel-icon-row"),g.element.find(".rightAlignBtn").attr("class","rightAlignBtn rightAlignButtonDisable font-panel-icon-row"),g.element.find(".centerAlignBtn").attr("class","centerAlignBtn centerAlignButtonDisable font-panel-icon-row"),h.trigger("leftAlignment")}});this.element.find(".rightAlignBtn").click(function(h){return $(h.target).trigger("rightAlignment")});this.element.find(".leftAlignBtn").click(function(h){return $(h.target).trigger("leftAlignment")});this.element.find(".bulletPointBtn").click(function(h){return $(h.target).trigger("bulletPointBtnEnableClick")});this.element.find(".orderedPointBtn").click(function(h){return $(h.target).trigger("orderedPointBtnEnableClick")});this.element.find(".gridElementBtn").click(function(){return $(event.target).trigger("panelClickGridBtnClick")});return this.element.find(".snapBtn").click(function(){return $(event.target).hasClass("snapBtn-selected")?$(event.target).removeClass("snapBtn-selected"):$(event.target).addClass("snapBtn-selected")})};e.prototype.changeColor=function(h,g,l,k){$(k).css("background-color","#"+g);return $(k).colpickHide()};e.prototype.setSettingsFromStyle=function(g){this.element.find(".fontTypeBtn").children().removeAttr("selected").filter("option[value="+g["font-family"]+"]").attr("selected","selected");this.element.find(".fontSizeBtn").children().removeAttr("selected").filter('option[value="'+parseInt(g["font-size"])+'"]').attr("selected","selected");this.element.find(".letter-space").children().removeAttr("selected").filter('option[value="'+parseInt(g["letter-spacing"])+'"]').attr("selected","selected");this.element.find(".line-height").children().removeAttr("selected").filter('option[value="'+parseInt(g["line-height"])+'"]').attr("selected","selected");this.element.find(".padding").children().removeAttr("selected").filter('option[value="'+parseInt(g.padding)+'"]').attr("selected","selected");this._switchBtn(".wbtn","bold"===g["font-weight"]);this._switchBtn(".ubtn",-1!==g["text-decoration"].indexOf("underline"));this._switchBtn(".ibtn","italic"===g["font-style"]);this.element.find(".centerAlignBtn").removeClass("active");this.element.find(".leftAlignBtn").removeClass("active");this.element.find(".rightAlignBtn").removeClass("active");if("left"===g["text-align"]){return this.element.find(".leftAlignBtn").addClass("active")}if("center"===g["text-align"]){return this.element.find(".centerAlignBtn").addClass("active")}if("right"===g["text-align"]){return this.element.find(".rightAlignBtn").addClass("active")}};e.prototype._switchBtn=function(h,g){return g?this.element.find(h).addClass("ppedit-btn-enabled active"):this.element.find(h).removeClass("ppedit-btn-enabled active")};e.prototype.selectFontPanel=function(){return this.element.addClass("ppedit-panel-selected")};e.prototype.moveFontPanel=function(h,g){var k;k=this.currentFontPanelPosition();return this.setFontPanelPosition(h+k.left,g+k.top)};e.prototype.stopMoveFontPanel=function(){return this.element.removeClass("ppedit-panel-selected")};e.prototype.currentFontPanelPosition=function(){return this.element.position()};e.prototype.setFontPanelPosition=function(h,g){this.element.css("left",h+"px");return this.element.css("top",g+"px")};return e}(ac);U=function(d){function e(g){this.root=g;e.__super__.constructor.call(this,this.root)}ag(e,d);e.prototype.buildElement=function(){return this.element=$('            <div class="left-sidebar">              <img class="icon-set undoImg" src="./ppedit/img/icons/OFF/glyphicons_221_unshare.png">              <img class="icon-set redoImg" src="./ppedit/img//icons/OFF/glyphicons_222_share.png">              <img class="icon-set gridImg" src="./ppedit/img/icons/OFF/glyphicons_155_show_big_thumbnails.png">              <img class="icon-set snapImg" src="./ppedit/img/icons/OFF/glyphicons_023_magnet.png">          </div>')};e.prototype.bindEvents=function(){var g=this;this.element.find(".snapImg").click(function(){return $(event.target).hasClass("snapBtn-selected")?$(event.target).removeClass("snapBtn-selected"):$(event.target).addClass("snapBtn-selected")});this.element.find(".snapImg").mouseover(function(h){return $(h.target).attr("src","./ppedit/img/icons/ON/glyphicons_023_magnet.png")});this.element.find(".snapImg").mouseout(function(h){return $(h.target).attr("src","./ppedit/img/icons/OFF/glyphicons_023_magnet.png")});this.element.find(".gridImg").click(function(){return g.root.trigger("panelClickGridBtnClick")});this.element.find(".gridImg").mouseover(function(h){return $(h.target).attr("src","./ppedit/img/icons/ON/glyphicons_155_show_big_thumbnails.png")});this.element.find(".gridImg").mouseout(function(h){return $(h.target).attr("src","./ppedit/img/icons/OFF/glyphicons_155_show_big_thumbnails.png")});this.element.find(".undoImg").click(function(){return g.root.trigger("requestUndo")});this.element.find(".undoImg").mouseover(function(h){return $(h.target).attr("src","./ppedit/img/icons/ON/glyphicons_221_unshare.png")});this.element.find(".undoImg").mouseout(function(h){return $(h.target).attr("src","./ppedit/img/icons/OFF/glyphicons_221_unshare.png")});this.element.find(".redoImg").click(function(){return g.root.trigger("requestRedo")});this.element.find(".redoImg").mouseover(function(h){return $(h.target).attr("src","./ppedit/img/icons/ON/glyphicons_222_share.png")});return this.element.find(".redoImg").mouseout(function(h){return $(h.target).attr("src","./ppedit/img/icons/OFF/glyphicons_222_share.png")})};return e}(ac);(function(h,k,r){var q,n,l,m;q=void 0;m={"default":"cool!"};l=null;n={init:function(d){q=h(this);h.extend(m,d||{});l=new z(q);l.buildElement();q.append(l.element);l.bindEvents();return q},doSomething:function(d){return q},destroy:function(){return q},save:function(){return l.commandManager.getUndoJSON()},allHunks:function(){return l.area.boxesContainer.getAllHunks()},clearHistory:function(){l.commandManager.clearHistory();return q},load:function(d){l.load(d.hunks);return q}};return h.fn.ppedit=function(d){return n[d]?n[d].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==typeof d&&d?h.error("Method "+d+" does not exist on jquery.ppedit"):n.init.apply(this,arguments)}})(jQuery,window,document)}).call(this);